2010-09-20  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Ojan Vafai.

        new-run-webkit-tests: refactor command line args getting passed to DRT

        This change cleans up some argument parsing between functions to get
        rid of some overlapping data structures. There should be no functional
        changes in this patch; it is pure refactoring in preparation for
        landing the Chrome GPU port and adding a generic way to pass
        args to DRT/TestShell.

        https://bugs.webkit.org/show_bug.cgi?id=46135

        * Scripts/webkitpy/layout_tests/layout_package/dump_render_tree_thread.py:
          - pass the options argument explicitly to the threads and drivers,
            also consolidate the passing of options to the driver.
          - pass options directly to process_output() to remove a couple
            parameters (minor cleanup).
        * Scripts/webkitpy/layout_tests/port/base.py:
          - pass the options argument to Port.create_driver().
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
          - update Port.create_driver() test
        * Scripts/webkitpy/layout_tests/port/chromium.py:
          - pass the options argument to Port.create_driver(), and clean up
            building of the cmd line for DRT.
        * Scripts/webkitpy/layout_tests/port/dryrun.py:
          - pass the options argument to Port.create_driver()
        * Scripts/webkitpy/layout_tests/port/test.py:
          - pass the options argument to Port.create_driver()
        * Scripts/webkitpy/layout_tests/port/webkit.py:
          - pass the options argument to Port.create_driver(), and clean up
            building of the cmd line for DRT.
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
          - consolidate args in _get_dump_render_tree_args and rename to
            _get_test_args(); move all of the command-line args to the
            Port implementations.

2010-09-20  Andrew Wilson  <atwilson@chromium.org>

        Revert change which was accidentally committed along with some expectation changes.

        * Scripts/webkitpy/layout_tests/port/base.py:

2010-09-20  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        Add explicit --force-patch flag to webkitpy tools
        https://bugs.webkit.org/show_bug.cgi?id=46103
        
        It wasn't obvious until I read the applypatch.py source code that
        --non-interfactive implies passing --force to patch. Add --force-patch
        as an alias to the flag, so that this behavior is more discoverable.

        * Scripts/webkitpy/tool/steps/applypatch.py:
        * Scripts/webkitpy/tool/steps/options.py:

2010-09-20  Eric Seidel  <eric@webkit.org>

        Unreviewed, adding a line which got dropped and is trivially correct (and tested).

        commit-queue can't land patches
        https://bugs.webkit.org/show_bug.cgi?id=46138

        Add a line of code I forgot in my last commit.

        * Scripts/webkitpy/common/net/bugzilla.py:
        * Scripts/webkitpy/common/net/bugzilla_unittest.py:

2010-09-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        The commit-cluster bots still race to lock patch_ids
        https://bugs.webkit.org/show_bug.cgi?id=46130

        It turns out we need to use a transaction object to make the
        read/modify/write lock operation atomic.  From reading the AppEngine
        documentation, I think this patch should do what we want.  It's hard to
        test locally because the test instance isn't distributed in the same
        way the production instance is.

        * QueueStatusServer/handlers/nextpatch.py:
        * QueueStatusServer/model/activeworkitems.py: Added.

2010-09-20  Andy Estes  <aestes@apple.com>

        Reviewed by Adam Barth.

        REGRESSION (HTML5 Parser): Pages broken due to <tag<tag> parsing changes
        https://bugs.webkit.org/show_bug.cgi?id=40961

        Implement WebKitUsePreHTML5ParserQuirks preference.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues): Reset WebKitUsePreHTML5ParserQuirks
        to false after a test finishes.

2010-09-20  Adam Roben  <aroben@apple.com>

        Windows build fix

        * MiniBrowser/Configurations/MiniBrowserCommon.vsprops: Put
        $(WebKitOutputDir)\include before $(WebKitLibrariesDir)\include so
        we'll pick up the most recent versions of the headers.

2010-09-20  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue should check commit-queue+ again just before committing
        https://bugs.webkit.org/show_bug.cgi?id=32679

        Added a _revalidate_patch check, right before landing.

        Since _revalidate_patch passes the patch_id from the work item
        back to bugzilla, I had to fix all of the previous queue tests to
        use valid attachment ids (that's the majority of this change).

        In order to validate that the bug was still open, I had to teach
        bugzilla.Bug about open/closed states.

        * Scripts/webkitpy/common/net/bugzilla.py:
        * Scripts/webkitpy/tool/commands/earlywarningsystem_unittest.py:
        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:
        * Scripts/webkitpy/tool/commands/queuestest.py:
        * Scripts/webkitpy/tool/mocktool.py:

2010-09-20  Mihai Parparita  <mihaip@chromium.org>

        Unreviewed.

        Adding myself as a comitter.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Two instances of commit-queue try to process the same patch
        https://bugs.webkit.org/show_bug.cgi?id=46113

        This patch makes next-patch atomic so that the server won't vend the
        same patch twice in the same hour.

        * QueueStatusServer/handlers/nextpatch.py:

2010-09-20  Adam Roben  <aroben@apple.com>

        Make WebKitTestRunner's wait-to-dump watchdog timer work on Windows

        We were previously trying to use a CFRunLoopTimer, but since Windows
        doesn't use CFRunLoop on most threads this doesn't work. Now we use a
        Windows-style timer on Windows.

        I also replaced all uses of "watchdog" with "watchdog timer".

        Fixes <http://webkit.org/b/46101> WebKitTestRunner's wait-to-dump
        watchdog timer doesn't work on Windows

        Reviewed by Anders Carlsson.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::dump): Updated for rename.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp: Removed
        platform-specific functions.
        (WTR::LayoutTestController::LayoutTestController): Added call to
        platformInitialize.
        (WTR::LayoutTestController::waitUntilDone): Changed to call
        initializeWaitToDumpWatchdogTimerIfNeeded instead of doing the work
        right in this function.
        (WTR::LayoutTestController::waitToDumpWatchdogTimerFired): Updated for
        rename.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.h: Added new
        members needed to support the watchdog timer abstraction. Replaced
        some "watchdog"s with "watchdog timer".

        * WebKitTestRunner/InjectedBundle/mac/LayoutTestControllerMac.mm:
        Added.
        (WTR::LayoutTestController::platformInitialize): Does nothing on this
        platform.
        (WTR::LayoutTestController::invalidateWaitToDumpWatchdog): Moved here
        from LayoutTestController.cpp and changed to use an early return.
        (WTR::waitUntilDoneWatchdogTimerFired): Moved here from
        LayoutTestController.cpp.
        (WTR::LayoutTestController::initializeWaitToDumpWatchdogTimerIfNeeded):
        Moved code here from LayoutTestController::waitUntilDone and changed
        to use an early return.

        * WebKitTestRunner/InjectedBundle/win/LayoutTestControllerWin.cpp:
        Added.
        (WTR::LayoutTestController::platformInitialize): Initialize our
        watchdog timer.
        (WTR::LayoutTestController::invalidateWaitToDumpWatchdog): Added.
        Kills and clears the watchdog timer.
        (WTR::waitToDumpWatchdogTimerFired): Added. Calls through to the
        LayoutTestController member function of the same name.
        (WTR::LayoutTestController::initializeWaitToDumpWatchdogTimerIfNeeded):
        Added. Sets up the timer if it isn't already set.

        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj: Added
        LayoutTestControllerMac.mm.

        * WebKitTestRunner/win/InjectedBundle.vcproj: Added
        LayoutTestControllerWin.cpp.

2010-09-20  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Daniel Bates.

        [GTK] fast/forms/listbox-selection.html fails
        https://bugs.webkit.org/show_bug.cgi?id=45942

        Use the gdkModifersFromJSValue helper to parse all appropriate modifier
        strings in keyDownCallback.

        * DumpRenderTree/gtk/EventSender.cpp:
        (keyDownCallback): Use the gdkModifersFromJSValue instead of duplicating the 
        modifier parsing logic.

2010-09-19  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        WebKit2 decidePolicyForNavigationAction should include mouse button information
        <rdar://problem/8413165>
        https://bugs.webkit.org/show_bug.cgi?id=46060

        * MiniBrowser/mac/BrowserWindowController.m:
        (decidePolicyForNavigationAction):
        (decidePolicyForNewWindowAction):

2010-09-19  Daniel Bates  <dbates@rim.com>

        Reviewed by Martin Robinson.

        Add unit tests for diffs that delete or modify a change log entry
        or describe changes that are far apart
        https://bugs.webkit.org/show_bug.cgi?id=46046

        Add additional unit tests to test change log diffs that contain
        deletions or changes that are far apart from each other in the
        ChangeLog file.

        * Scripts/webkitperl/VCSUtils_unittest/fixChangeLogPatch.pl:
          - Added the following unit tests:
          "fixChangeLogPatch: [no change] In-place change."
          "fixChangeLogPatch: [no change] Remove first entry."
          "fixChangeLogPatch: [no change] Remove entry in the middle."
          "fixChangeLogPatch: [no change] Far apart changes (i.e. more than one chunk)."

2010-09-19  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Replace WKBundleRangeRef with WKBundleRangeHandleRef.
        https://bugs.webkit.org/show_bug.cgi?id=46054

        The new one acts like WKBundleNodeHandleRef and allows for getting a
        wrapper in a specific world for the handle.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::propertyValue):
        (WTR::propertyValueDouble):
        (WTR::propertyValueInt):
        (WTR::numericWindowPropertyValue):
        (WTR::toStr):
        (WTR::InjectedBundlePage::shouldBeginEditing):
        (WTR::InjectedBundlePage::shouldEndEditing):
        (WTR::InjectedBundlePage::shouldInsertNode):
        (WTR::InjectedBundlePage::shouldInsertText):
        (WTR::InjectedBundlePage::shouldDeleteRange):
        (WTR::InjectedBundlePage::shouldChangeSelectedRange):
        (WTR::InjectedBundlePage::shouldApplyStyle):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:

2010-09-19  Kent Tamura  <tkent@chromium.org>

        Unreviewed. Fix WebGL test regressions by r67809.

        * DumpRenderTree/chromium/WebPreferences.cpp:
        (WebPreferences::applyTo): Call setExperimentalWebGLEnabled().

2010-09-19  Kent Tamura  <tkent@chromium.org>

        Reviewed by Adam Barth.

        [DRT/Chromium] Fix a WebSettings handling bug
        https://bugs.webkit.org/show_bug.cgi?id=45945

        Before this change, Chromium DRT reset WebSettings for every new
        window. It was wrong.
        If new window is not the first one, we have to apply the same
        settings as the first window.  So, we introduce WebPreference to
        store the current settings, and apply it to new windows. It's same
        as test_shell's behavior.

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
          Use WebPreferences instead of WebSettings.
        (LayoutTestController::setUserStyleSheetEnabled):
        (LayoutTestController::setUserStyleSheetLocation):
        (LayoutTestController::setAuthorAndUserStylesEnabled):
        (LayoutTestController::setPopupBlockingEnabled):
        (LayoutTestController::disableImageLoading):
        (LayoutTestController::setJavaScriptCanAccessClipboard):
        (LayoutTestController::setXSSAuditorEnabled):
        (LayoutTestController::setAllowUniversalAccessFromFileURLs):
        (LayoutTestController::setAllowFileAccessFromFileURLs):
        (LayoutTestController::overridePreference):
        (LayoutTestController::setEditingBehavior):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::resetWebSettings): Use WebPreferences.
        (TestShell::runFileTest): ditto.
        (TestShell::createNewWindow): Apply existing WebPreferences to a new WebView.
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::preferences):
        (TestShell::applyPreferences):
        * DumpRenderTree/chromium/WebPreferences.cpp: Added.
        * DumpRenderTree/chromium/WebPreferences.h: Added.

2010-09-18  Prasad Tammana  <prasadt@chromium.org>

        Reviewed by David Levin.

        update-webkit --chromium spitting out a spurious error
        https://bugs.webkit.org/show_bug.cgi?id=45868

        * Scripts/update-webkit-chromium: Use commandExists() function to check for existence of gclient.

2010-09-18  Sam Weinig  <sam@webkit.org>

        Reviewed by Dan Bernstein.

        Improve/unify the PageLoadClient interfaces
        https://bugs.webkit.org/show_bug.cgi?id=46043

        * MiniBrowser/mac/BrowserWindowController.m:
        (didStartProvisionalLoadForFrame):
        (didReceiveServerRedirectForProvisionalLoadForFrame):
        (didFailProvisionalLoadWithErrorForFrame):
        (didCommitLoadForFrame):
        (didFinishDocumentLoadForFrame):
        (didFinishLoadForFrame):
        (didFailLoadWithErrorForFrame):
        (didReceiveTitleForFrame):
        (didFirstLayoutForFrame):
        (didFirstVisuallyNonEmptyLayoutForFrame):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::InjectedBundlePage):
        (WTR::InjectedBundlePage::didStartProvisionalLoadForFrame):
        (WTR::InjectedBundlePage::didReceiveServerRedirectForProvisionalLoadForFrame):
        (WTR::InjectedBundlePage::didFailProvisionalLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::didCommitLoadForFrame):
        (WTR::InjectedBundlePage::didFinishLoadForFrame):
        (WTR::InjectedBundlePage::didFinishDocumentLoadForFrame):
        (WTR::InjectedBundlePage::didFailLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::didReceiveTitleForFrame):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::didReceiveMessageFromInjectedBundle):
        (WTR::TestController::didFinishLoadForFrame):
        * WebKitTestRunner/TestController.h:

2010-09-17  Eric Seidel  <eric@webkit.org>

        Unreviewed.  Adding a shell script I use to run the
        commit-queue. Now that multiple machines run the cq,
        it makes sense to share the script between them.

        * EWSTools/start-commit-queue.sh: Added.

2010-09-17  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Jon Honeycutt.

        The colors on the new build.webkit.org (after upgrading the master to 0.8.1) are
        slightly harder to read, so this reverts the previous background colors for various
        states, making it easier to read.

        * BuildSlaveSupport/build.webkit.org-config/public_html/default.css:
        (.success):
        (.failure):
        (.warnings):
        (.exception):
        (.start,.running,td.building):
        (.offline,td.offline):

2010-09-17  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r67692.
        http://trac.webkit.org/changeset/67692
        https://bugs.webkit.org/show_bug.cgi?id=46011

        broke layout test dashboard (Requested by johnny_g on
        #webkit).

        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:
        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator_unittest.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:

2010-09-17  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Oliver Hunt.

        Style bot complains about cairo forward declaration naming
        https://bugs.webkit.org/show_bug.cgi?id=45867

        Exclude Cairo forward declarations from indentifiers with underscores checks.

        * Scripts/webkitpy/style/checkers/cpp.py: Add exclusion for Cairo forward-declarations.
        * Scripts/webkitpy/style/checkers/cpp_unittest.py: Add some tests for this.

2010-09-16  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by Ojan Vafai.

        Include detailed test modifiers (e.g. FLAKY) in results.json for failing non-layout tests
        https://bugs.webkit.org/show_bug.cgi?id=45408

        This change also tries to remove duplicated upload_results_json methods
        in run_webkit_tests.py and json_results_generator.py.

        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:
        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator_unittest.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:

2010-09-16  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Andreas Kling.

        [Qt] When switching views (WebViewGraphicsBased <--> WebViewTraditional), QWebPage signals and QActions have to be re-set.

        Recently r67554 changed the way different views use the WebPage class: it was previously being shared between
        different views, but now for each view switch, a new WebPage class is constructed and set. Signals and QAction's
        were not being set to the new WebPage though. Patch fix that, by re constructing the toolbar, and then re-hooking
        all page specific stuff to the UI.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::initializeView):
        * QtTestBrowser/mainwindow.cpp:
        (MainWindow::MainWindow):
        (MainWindow::buildUI):
        (MainWindow::setPage):
        * QtTestBrowser/mainwindow.h:

2010-09-12  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Andreas Kling.

        Make all accesses to m_item (GraphicsWebView) done by WebViewGraphicsBased class happen though graphicsWebView getter method.

        This patch is mostly a preparation for another commit, where the ownership of the m_item/GraphicsWebView
        object will move to the qgraphicsscene instead of the qgraphicsview.

        * QtTestBrowser/webview.cpp:
        (WebViewGraphicsBased::setPage):
        (WebViewGraphicsBased::setResizesToContents):
        (WebViewGraphicsBased::resizeEvent):
        (WebViewGraphicsBased::animatedFlip):
        * QtTestBrowser/webview.h:
        (WebViewGraphicsBased::setItemCacheMode):
        (WebViewGraphicsBased::itemCacheMode):

2010-09-12  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Andreas Kling.

        Moved setYRotation method body out of the class (WebViewGraphicsBased) definition.

        We usually separate methods whose body are larger than a few lines from the class definition.

        * QtTestBrowser/webview.h:
        (WebViewGraphicsBased::yRotation):
        (WebViewGraphicsBased::setYRotation):

2010-09-12  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Andreas Kling.

        Make initializeView method of LauncherWindow private.

        No one else needs to be able to call it but LauncherWindow.
        Also moving the declation of isGraphicsBased method down in the same file, in order
        to better group related methods.

        * QtTestBrowser/launcherwindow.h:

2010-09-12  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Andreas Kling.

        Make the getter 'page' method of MainWindow const.

        * QtTestBrowser/mainwindow.cpp:
        (MainWindow::page):
        * QtTestBrowser/mainwindow.h:

2010-09-12  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Andreas Kling.

        Remove useless parameter from MainWindow class' constructor.

        The parameter defaults to an empty URL and is not being used by any caller. Apart from that it is also
        not referred in the constructor body and does not make much sense.

        * QtTestBrowser/mainwindow.cpp:
        (MainWindow::MainWindow):
        * QtTestBrowser/mainwindow.h:

2010-09-15  Tony Chang  <tony@chromium.org>

        Reviewed by Kent Tamura.

        [Chromium] Needs DRT queueLoadHTMLString and setDeferMainResourceLoad-implementations
        https://bugs.webkit.org/show_bug.cgi?id=42151

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (WorkItemLoadHTMLString::WorkItemLoadHTMLString):
        (WorkItemLoadHTMLString::run):
        (LayoutTestController::queueLoadHTMLString):
        (LayoutTestController::reset):
        (LayoutTestController::setDeferMainResourceDataLoad):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController::deferMainResourceDataLoad):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::didCreateDataSource):

2010-09-16  Adrienne Walker  <enne@google.com>

        Reviewed by Kenneth Russell.

        Add script to synchronize WebKit and Khronos WebGL tests
        https://bugs.webkit.org/show_bug.cgi?id=42336

        * Scripts/update-webgl-conformance-tests: Added.
        * Scripts/webkitpy/layout_tests/update_webgl_conformance_tests.py: Added.
        * Scripts/webkitpy/layout_tests/update_webgl_conformance_tests_unittest.py: Added.

2010-09-16  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Add support for sending synchronous messages from the InjectedBundle to the WKContext
        <rdar://problem/8365320>
        https://bugs.webkit.org/show_bug.cgi?id=44785

        * MiniBrowser/mac/AppDelegate.m:
        (didReceiveSynchronousMessageFromInjectedBundle):
        (-[BrowserAppDelegate init]):
        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (didCreatePage):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):

2010-09-16  Leonid Ebril  <leonid.ebril@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] QtTestBrowser: Disable creation of a new window for screenshot on Symbian platform.
        https://bugs.webkit.org/show_bug.cgi?id=45885

        Avoid creation of an additional window for screenshot to prevent overlapping with original window.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::screenshot):

2010-09-16  Anders Carlsson  <andersca@apple.com>

        Fix clang++ build.

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController zoomIn:]):
        (-[BrowserWindowController zoomOut:]):
        (-[BrowserWindowController resetZoom:]):
        Remove trailing semicolons.

2010-09-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r67628.
        http://trac.webkit.org/changeset/67628
        https://bugs.webkit.org/show_bug.cgi?id=45904

        broke the build (Requested by eric_carlson on #webkit).

        * DumpRenderTree/gtk/EventSender.cpp:
        (contextClickCallback):

2010-09-16  Balazs Kelemen  <kbalazs@webkit.org>

        Unreviewed.

        Adding myself as a comitter.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-15  Philippe Normand  <pnormand@igalia.com>

        Reviewed by Eric Carlson.

        [GTK] enhanced context menu for media elements
        https://bugs.webkit.org/show_bug.cgi?id=45021

        EventSender::contextClick() now returns an array of js
        objects. Each object has a title property and a click() method.

        * DumpRenderTree/gtk/EventSender.cpp:
        (getMenuItemTitleCallback):
        (setMenuItemTitleCallback):
        (menuItemClickCallback):
        (getMenuItemClass):
        (contextClickCallback):

2010-09-14  Philippe Normand  <pnormand@igalia.com>

        Reviewed by Eric Carlson and Martin Robinson.

        [GTK] eventSender.contextClick() should return the contents of the context menu
        https://bugs.webkit.org/show_bug.cgi?id=39102

        Make the eventSender use the new private WebKitGtk+ API to
        retrieve the context-menu item titles and store them in an array.

        * DumpRenderTree/gtk/EventSender.cpp:
        (contextClickCallback):

2010-09-16  Eric Uhrhane  <ericu@chromium.org>

        Reviewed by Jian Li.

        Unify FILE_SYSTEM and FILE_WRITER enables under the name FILE_SYSTEM.
        https://bugs.webkit.org/show_bug.cgi?id=45798

        * Scripts/build-webkit:

2010-09-16  Robert Hogan  <robert@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt] Support globalhistory tests
        https://bugs.webkit.org/show_bug.cgi?id=45774

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::isGlobalHistoryTest):
        (WebCore::DumpRenderTree::open):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::dumpHistoryCallbacks):
        (LayoutTestController::removeAllVisitedLinks):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-09-10  Tony Chang  <tony@chromium.org>

        Reviewed by Eric Seidel.

        deduplicate-tests should be runnable from any WebKit directory
        https://bugs.webkit.org/show_bug.cgi?id=44709

        * Scripts/webkitpy/layout_tests/deduplicate_tests.py:
        * Scripts/webkitpy/layout_tests/deduplicate_tests_unittest.py:

2010-09-15  Tony Chang  <tony@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] sort testing methods in DRT
        https://bugs.webkit.org/show_bug.cgi?id=45850

        * DumpRenderTree/chromium/EventSender.cpp:
        (EventSender::EventSender):
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        * DumpRenderTree/chromium/TextInputController.cpp:
        (TextInputController::TextInputController):

2010-09-15  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        CQ status shows items out of order
        https://bugs.webkit.org/show_bug.cgi?id=45846
        
        Only group consecutive status items with the same patch ID into the same
        group, so that overall item ordering is preserved.
        
        Also don't indent status items that only have a single item in their
        group.

        * QueueStatusServer/handlers/queuestatus.py:
        * QueueStatusServer/templates/includes/singlequeuestatus.html: Added.
        * QueueStatusServer/templates/queuestatus.html:

2010-09-15  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Add queue start/stop messages
        https://bugs.webkit.org/show_bug.cgi?id=45853

        I ended up needing to clean up a bunch of our unit testing
        in order to test this new code path nicely.

        There are also a few PEP8 changes needed to pass check-webkit-style.

        * Scripts/webkitpy/tool/bot/queueengine.py:
        * Scripts/webkitpy/tool/bot/queueengine_unittest.py:
        * Scripts/webkitpy/tool/commands/earlywarningsystem_unittest.py:
        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:
        * Scripts/webkitpy/tool/commands/queuestest.py:
        * Scripts/webkitpy/tool/commands/sheriffbot_unittest.py:

2010-09-15  Simon Fraser  <simon.fraser@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=45849
        WKURLCreateWithCFURL crashes with null url
        
        Fix MiniBrowser crash when the url is not parseable.

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController fetch:]):

2010-09-15  Patrick Gansterer  <paroga@paroga.com>

        Unreviewed.

        Adding myself to the committers list.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-14  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Make it possible to run more than one commit-queue instance
        https://bugs.webkit.org/show_bug.cgi?id=45786

        Mostly we need to make sure the two (or more) instances get
        different patches to work on.  To do this, I re-worked
        the code responsible for getting the next work item to
        round trip through the status server.  The status server only
        vends patches from the work items list, only if those patches
        have not had status reported for them in the last hour.

        This is another step towards making all queues go through the
        status server, thus making it possible to run more than one
        instance of various EWS bots (as requested in bug 44292).

        The webkitpy changes are already covered by existing unit tests.
        The QueueStatusSever sadly has no testing infrastructure yet. :(

        * QueueStatusServer/handlers/nextpatch.py: Added.
        * QueueStatusServer/index.yaml:
        * QueueStatusServer/main.py:
        * Scripts/webkitpy/tool/commands/queues.py:

2010-09-15  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Tony Chang.

        NRWT fails with UnicodeDecodeError on editing/selection/mixed-editability-10.html
        https://bugs.webkit.org/show_bug.cgi?id=45791

        Force filenames to be raw bytes before running difflib.unified_diff.

        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:

2010-09-15  Simon Hausmann  <simon.hausmann@nokia.com>

        Reviewed by Tor Arne Vestbø.

        [Qt] QtTestBrowser crashes when enabling QGraphicsView mode after first loading page without it enabled
        https://bugs.webkit.org/show_bug.cgi?id=35247

        The main issue when changing the views is that the plugins and any other components that
        depend on view specific attributes such as the native window id are not teared down.
        Even if we had a tear-down procedure, we'd have to re-initialize the plugin after
        switching to the new view (QGraphicsWebView). This is a rather uncommon situation, so
        we decided to work around this in QtTestBrowser by making toggling between QWebView
        and QGraphicsWebView also re-create the page.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::initializeView):
        * QtTestBrowser/mainwindow.h:

2010-09-14  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        Send webkit accessibility notifications to Chromium
        https://bugs.webkit.org/show_bug.cgi?id=45156

        Move printf inside shouldDumpAccessibilityNotifications check.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::postAccessibilityNotification):

2010-09-14  Tony Chang  <tony@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] fix http/tests/security/local-user-CSS-from-remote.html
        https://bugs.webkit.org/show_bug.cgi?id=45788

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::setUserStyleSheetLocation): use a base64 url like in Chrome

2010-09-14  Tony Chang  <tony@chromium.org>

        Reviewed by Ojan Vafai.

        [chromium] Remove WebKit::areLayoutTestImagesOpaque since it's no longer needed
        https://bugs.webkit.org/show_bug.cgi?id=45768

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dumpImage): new baselines are checked in and Linux will match Windows going forward.

2010-09-14  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix, add newly added directories to the directory list.

        * wx/build/settings.py:

2010-09-14  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Remove WKBundleNodeRef, replacing uses with WKBundleNodeHandleRef.
        https://bugs.webkit.org/show_bug.cgi?id=45785

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::propertyValue):
        (WTR::numericWindowPropertyValue):
        (WTR::dumpPath):
        (WTR::toStr):
        (WTR::operator<<):
        (WTR::InjectedBundlePage::InjectedBundlePage):
        (WTR::InjectedBundlePage::shouldInsertNode):
        (WTR::InjectedBundlePage::shouldBeginEditing):
        (WTR::InjectedBundlePage::shouldEndEditing):
        (WTR::InjectedBundlePage::shouldInsertText):
        (WTR::InjectedBundlePage::shouldDeleteRange):
        (WTR::InjectedBundlePage::shouldChangeSelectedRange):
        (WTR::InjectedBundlePage::shouldApplyStyle):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:

2010-09-14  Adam Barth  <abarth@webkit.org>

        Fix two typos in commit-queue.  The first is harmless.  The second
        causes the queue to reject patches when the build is broken.  :(

        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:

2010-09-14  Chris Guillory   <chris.guillory@google.com>

        Reviewed by Chris Fleizach.

        Send all accessibility notifications to Chromium.
        https://bugs.webkit.org/show_bug.cgi?id=45156

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::postAccessibilityNotification):
        * DumpRenderTree/chromium/WebViewHost.h:

2010-09-14  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        commit-queue is slow during the day
        https://bugs.webkit.org/show_bug.cgi?id=45780

        Thanks to the new logging, we've noticed that checkout-is-out-of-date
        errors in the first pass of landing don't retry the land.  Instead,
        they're treated as failures and cause the commit-queue to do two more
        builds before really trying to land the patch.  Worse, in the second
        build, we can get bitten by a flaky test.

        This patch takes a slightly different approach to the commit-queue's
        main control logic.  We now use a separate subprocess for building and
        testing and for landing.  This means we should very rarely see the
        checkout-is-out-of-date error, and when we do see it, we should retry
        more quickly.  If my understanding is correct, this should be a big
        speed win for the commit-queue.

        * Scripts/webkitpy/tool/commands/download.py:
        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:

2010-09-14  Tony Chang  <tony@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] implement layoutTestController.setDomainRelaxationForbiddenForURLScheme
        https://bugs.webkit.org/show_bug.cgi?id=45762

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::setDomainRelaxationForbiddenForURLScheme):
        * DumpRenderTree/chromium/LayoutTestController.h:

2010-09-14  Csaba Osztrogonác  <ossy@webkit.org>

        Adding myself as a reviewer.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-14  Zoltan Horvath  <zoltan@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Build-webkit shows a warning when WebKitBuild directory is not exist
        https://bugs.webkit.org/show_bug.cgi?id=45736

        Build-webkit has showed a warning when WebKitBuild didn't exist, add
        an additional condition to avoid it.

        * Scripts/build-webkit:

2010-09-13  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue should log when it's retrying due to checkout out of date error
        https://bugs.webkit.org/show_bug.cgi?id=45725

        This will allow us to better track how often we see these errors
        and how long it takes the queue to recover from them.

        In order to pass the tests, I had to correct an error
        from a previous change.  The UnitTestPort should not have
        ever been using the base port method as that will read
        a file from disk.  If the unit tests haven't passed the contents
        it should raise an IOError as though the file doesn't exist.

        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:

2010-09-13  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        Upload results when cq patch landing fails
        https://bugs.webkit.org/show_bug.cgi?id=45683
        
        Include script errors when CommitQueue._land fails.

        * Scripts/webkitpy/tool/commands/queues.py:

2010-09-13  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by David Kilzer.

        AX: accessibilityIsIgnored is returning nil when return value expects a BOOL
        https://bugs.webkit.org/show_bug.cgi?id=45548

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (isIgnoredCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::isIgnored):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::isIgnored):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::isIgnored):

2010-09-13  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Andreas Kling.

        jscPath() is incorrect in Windows' cmd.exe shell
        https://bugs.webkit.org/show_bug.cgi?id=45651

        * Scripts/webkitdirs.pm: Add ".exe" suffix to $jscName on Windows.

2010-09-13  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        REGRESSION (r64816-r64889): Crash in WebCore::AccessibilityRenderObject
        https://bugs.webkit.org/show_bug.cgi?id=43807

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (textMarkerForPointCallback):
        (AccessibilityUIElement::textMarkerForPoint):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::textMarkerForPoint):

2010-09-13  Andreas Kling  <andreas.kling@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] build-webkit: Add --v8 option to build against V8

        Note that V8 is picked up from QtScript, so this currently requires building
        against the experimental qt-script-v8 branch.

        * Scripts/build-webkit:

2010-09-13  Hans Wennborg  <hans@chromium.org>

        Reviewed by Jeremy Orlow.

        Add WebDeviceOrientationClientMock::create() and use it from DRT.
        https://bugs.webkit.org/show_bug.cgi?id=45650

        Do not use the WebDeviceOrientationClientMock constructor directly,
        but use the create() member function.

        This should fix the linker errors for the multi-DLL Chromium DRT build.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::setMockDeviceOrientation):
        (LayoutTestController::deviceOrientationClient):

2010-08-27  Kenneth Rohde Christiansen  <kenneth.christiansen@openbossa.org>

        Reviewed by Antti Koivisto.

        Add support for testing the viewport meta tag algorithm,
        based on the following draft spec:

        http://people.opera.com/rune/TR/ED-css-viewport-20100806/

        Add common handling of viewport meta tag based on new Opera spec
        https://bugs.webkit.org/show_bug.cgi?id=44201

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::dumpConfigurationForViewport):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-09-12  Kent Tamura  <tkent@chromium.org>

        Reviewed by Tony Chang.

        [DRT/Chromium] Remove dependency to base/string16.h and gfx/codec/png_codec.h
        https://bugs.webkit.org/show_bug.cgi?id=45517

        Use webkit_support_gfx.h for PNG encoding/decoding instead of png_codec.h

        * DumpRenderTree/chromium/ImageDiff.cpp:
        (Image::craeteFromStdin):
        (Image::createFromFilename):
        (diffImages):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dumpImage):

2010-09-10  MORITA Hajime  <morrita@google.com>

        Reviewed by Tony Chang.

        [Chromium] Implement textInputController.hasSpellingMarker() for Chromium
        https://bugs.webkit.org/show_bug.cgi?id=45441

        Added TextInputController::hasSpellingMarker().
        
        * DumpRenderTree/chromium/TextInputController.cpp:
        (TextInputController::TextInputController):
        (TextInputController::hasSpellingMarker):
        * DumpRenderTree/chromium/TextInputController.h:

2010-09-12  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, build fix.

        My last change accidentally contained a local change to the
        rebaselinig script; webkit-patch land picked it up without telling
        me and committed it :(

        * Scripts/webkitpy/layout_tests/rebaseline_chromium_webkit_tests.py:

2010-09-11  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Anders Carlsson.

        Attempt to fix Windows MiniBrowser build (untested)
        https://bugs.webkit.org/show_bug.cgi?id=45609

        * MiniBrowser/win/BrowserView.cpp:
        (runJavaScriptConfirm):
        (runJavaScriptPrompt):

2010-09-11  Sam Weinig  <sam@webkit.org>

        Reviewed by Maciej Stachowiak.

        Fix zoom related tests when testing WebKit2.

        * WebKitTestRunner/InjectedBundle/EventSendingController.cpp:
        (WTR::EventSendingController::zoomPageIn): Zoom in and zoom out are not the same.

2010-09-11  Sam Weinig  <sam@webkit.org>

        Reviewed by Dan Bernstein.

        Implement WebKit2 callback equivalent to - [WebUIDelegate webView:setStatusText:]
        <rdar://problem/8359252>
        https://bugs.webkit.org/show_bug.cgi?id=45605

        * MiniBrowser/mac/BrowserWindowController.m:
        (setStatusText):
        (contentsSizeChanged):
        (-[BrowserWindowController awakeFromNib]):
        * MiniBrowser/win/BrowserView.cpp:
        (runJavaScriptConfirm):
        (runJavaScriptPrompt):
        (setStatusText):
        (contentsSizeChanged):
        (BrowserView::create):
        * WebKitTestRunner/TestController.cpp:
        (WTR::createOtherPage):
        (WTR::TestController::initialize):

2010-09-11  Sam Weinig  <sam@webkit.org>

        Reviewed by Dan Bernstein.

        Add callback mechanism for the getting the source of a frame
        <rdar://problem/8364681>
        https://bugs.webkit.org/show_bug.cgi?id=45604

        Add ability to dump the main frame's source to the console.

        * MiniBrowser/mac/BrowserWindowController.h:
        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController dumpSourceToConsole:]):
        * MiniBrowser/mac/MainMenu.xib:

2010-09-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Remove unneeded Empty Queue messages
        https://bugs.webkit.org/show_bug.cgi?id=45602

        We already have a /gc job to delete these.
        recentstatus.py is already smart enough to use the
        most recent of the workitems last update or the most recent status,
        so removing these should not change the _last_status_date() return
        value more than a few milliseconds.

        These messages just spam the recent status log.

        * Scripts/webkitpy/tool/commands/queues.py:

2010-09-11  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        Fix Python exception when generating synthetic patch IDs
        https://bugs.webkit.org/show_bug.cgi?id=45592

        Can't concatenate strings and numbers directly.

        * QueueStatusServer/handlers/queuestatus.py:

2010-09-11  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Adam Barth.

        Group statuses in queue status by patch ID
        https://bugs.webkit.org/show_bug.cgi?id=45588

        Group statuses by patch ID so that the status page is easier
        to scan.

        * QueueStatusServer/handlers/queuestatus.py:
        * QueueStatusServer/stylesheets/dashboard.css:
        (.status-group):
        (.status-bug):
        (.status-group ul):
        (.status-group ul li):
        (.status-group ul li:hover):
        (.status-cell):
        (.status-cell:hover):
        (.status-cell.pass):
        (.status-cell.fail):
        (.status-cell.pending):
        (.status-cell.error):
        * QueueStatusServer/templates/dashboard.html:
        * QueueStatusServer/templates/queuestatus.html:

2010-09-11  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Tony Chang.

        Implement layoutTestController.dumpResourceResponseMIMETypes in Chromium DRT
        https://bugs.webkit.org/show_bug.cgi?id=45479

        Implement layoutTestController.dumpResourceResponseMIMETypes (modelled after
        implementation in ResourceLoadDelegate in the Mac port).

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::dumpResourceResponseMIMETypes):
        (LayoutTestController::reset):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController::setShouldDumpResourceResponseMIMETypes):
        (LayoutTestController::shouldDumpResourceResponseMIMETypes):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::shouldDumpResourceResponseMIMETypes):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::didReceiveResponse):

2010-09-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        queues.webkit.org should expose /remote_api for data upload/download
        https://bugs.webkit.org/show_bug.cgi?id=45559

        * QueueStatusServer/app.yaml:
         - /remote_api is a standard app-engine service which allows use of
           the bulk uploader for data upload/download.  Exposing this
           (for admin access only) allows us to use 

2010-09-10  Sam Weinig  <sam@webkit.org>

        Reviewed by Dan Bernstein.

        Add zoom support to WebKit2 API
        <rdar://problem/7660657>
        https://bugs.webkit.org/show_bug.cgi?id=45585

        - Add zoom options to MiniBrowser that mimic Safari's options using
          the new WebKit2 zoom APIs.
        - Switch uses of float for the zoom APIs to use double.

        * MiniBrowser/mac/BrowserWindowController.h:
        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController initWithPageNamespace:]):
        (-[BrowserWindowController validateMenuItem:]):
        (-[BrowserWindowController validateUserInterfaceItem:]):
        (-[BrowserWindowController currentZoomFactor]):
        (-[BrowserWindowController setCurrentZoomFactor:]):
        (-[BrowserWindowController canZoomIn]):
        (-[BrowserWindowController zoomIn:]):
        (-[BrowserWindowController canZoomOut]):
        (-[BrowserWindowController zoomOut:]):
        (-[BrowserWindowController canResetZoom]):
        (-[BrowserWindowController resetZoom:]):
        (-[BrowserWindowController toggleZoomMode:]):
        * MiniBrowser/mac/MainMenu.xib:
        * WebKitTestRunner/InjectedBundle/EventSendingController.cpp:
        (WTR::EventSendingController::textZoomIn):
        (WTR::EventSendingController::textZoomOut):
        (WTR::EventSendingController::zoomPageIn):
        (WTR::EventSendingController::zoomPageOut):

2010-09-10  Robert Hogan  <robert@webkit.org>

        Reviewed by Andreas Kling.

        [Qt] Fix crash in DRT in standalone mode

        https://bugs.webkit.org/show_bug.cgi?id=45454

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::loadNextTestInStandAloneMode):

2010-09-10  Sam Weinig  <sam@webkit.org>

        Reviewed by Darin Adler.

        Remove unnecessary constraint in WebCore of choosing either text zoom or full page zoom.
        Precursor to <rdar://problem/7660657>
        https://bugs.webkit.org/show_bug.cgi?id=45522

        Update for changes to the Bundle API to allow separate control of page and text zoom
        levels.

        * WebKitTestRunner/InjectedBundle/EventSendingController.cpp:
        (WTR::EventSendingController::textZoomIn):
        (WTR::EventSendingController::textZoomOut):
        (WTR::EventSendingController::zoomPageIn):
        (WTR::EventSendingController::zoomPageOut):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::reset):

2010-09-10  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Andreas Kling.

        [Qt] Support click event for notifications
        https://bugs.webkit.org/show_bug.cgi?id=44836

        Add support for simulateDesktopNotificationClick by calling
        back to DumpRenderTreeSupportQt.cpp.

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::simulateDesktopNotificationClick):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-09-10  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Eric Seidel.

        Update queue status when patches fail their first land attempt
        https://bugs.webkit.org/show_bug.cgi?id=45583

        Add a few more _update_status calls to make it more obvious if a patch is 
        being retried because tests failed.

        * Scripts/webkitpy/tool/commands/queues.py:

2010-09-10  Balazs Kelemen  <kb@inf.u-szeged.hu>

        Reviewed by Andreas Kling.

        [Qt] MiniBrowser crashes with multiply windows when closing one of them
        https://bugs.webkit.org/show_bug.cgi?id=45536

        * MiniBrowser/qt/BrowserView.cpp:
        (BrowserView::BrowserView): Reference the context instead of adopting it
        because it can be shared across different views.

2010-09-10  Tony Chang  <tony@chromium.org>

        Unreviewed, rolling out r67241.
        http://trac.webkit.org/changeset/67241
        https://bugs.webkit.org/show_bug.cgi?id=44709

        Accidentally committed.

        * Scripts/webkitpy/layout_tests/deduplicate_tests.py:
        * Scripts/webkitpy/layout_tests/deduplicate_tests_unittest.py:

2010-09-10  Tony Chang  <tony@chromium.org>

        Reviewed by Ojan Vafai.

        deduplicate-tests should be runnable from any WebKit directory
        https://bugs.webkit.org/show_bug.cgi?id=44709

        * Scripts/webkitpy/layout_tests/deduplicate_tests.py:
        * Scripts/webkitpy/layout_tests/deduplicate_tests_unittest.py:

2010-09-10  Tony Chang  <tony@chromium.org>

        Unreviewed, rolling out r67216.
        http://trac.webkit.org/changeset/67216
        https://bugs.webkit.org/show_bug.cgi?id=44709

        Broke

        * Scripts/webkitpy/layout_tests/deduplicate_tests.py:
        * Scripts/webkitpy/layout_tests/deduplicate_tests_unittest.py:

2010-09-10  Tony Chang  <tony@chromium.org>

        Reviewed by Ojan Vafai.

        deduplicate-tests should be runnable from any WebKit directory
        https://bugs.webkit.org/show_bug.cgi?id=44709

        * Scripts/webkitpy/layout_tests/deduplicate_tests.py:
        * Scripts/webkitpy/layout_tests/deduplicate_tests_unittest.py:

2010-09-09  Hans Wennborg  <hans@chromium.org>

        Reviewed by Jeremy Orlow.

        Hook up LayoutTestController.setMockDeviceOrientation() in Chromium DumpRenderTree.
        https://bugs.webkit.org/show_bug.cgi?id=45460

        This enables DumpRenderTree to run layout tests for DeviceOrientation.

        Also declare the LayoutTestController destructor out-of-line.
        Otherwise the implicit destructor would cause compiler errors because
        of the OwnPtr<WebKit::WebDeviceOrientationClientMock> member.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::~LayoutTestController):
        (LayoutTestController::setMockDeviceOrientation):
        (LayoutTestController::deviceOrientationClient):
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::deviceOrientationClient):
        * DumpRenderTree/chromium/WebViewHost.h:

2010-09-09  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r67119.
        http://trac.webkit.org/changeset/67119
        https://bugs.webkit.org/show_bug.cgi?id=45505

        Extra newlines in results (Requested by tony^work on #webkit).

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::reset):
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/chromium/TestShell.h:
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (printResponseDescription):
        (printNodeDescription):
        (printRangeDescription):
        (WebViewHost::shouldBeginEditing):
        (WebViewHost::shouldEndEditing):
        (WebViewHost::shouldInsertNode):
        (WebViewHost::shouldChangeSelectedRange):
        (WebViewHost::shouldDeleteRange):
        (WebViewHost::shouldApplyStyle):
        (WebViewHost::didBeginEditing):
        (WebViewHost::didChangeSelection):
        (WebViewHost::didChangeContents):
        (WebViewHost::didEndEditing):
        (WebViewHost::decidePolicyForNavigation):
        (WebViewHost::didCancelClientRedirect):
        (WebViewHost::didStartProvisionalLoad):
        (WebViewHost::didReceiveServerRedirectForProvisionalLoad):
        (WebViewHost::didFailProvisionalLoad):
        (WebViewHost::didCommitProvisionalLoad):
        (WebViewHost::didFinishDocumentLoad):
        (WebViewHost::didHandleOnloadEvents):
        (WebViewHost::didFailLoad):
        (WebViewHost::didFinishLoad):
        (WebViewHost::didChangeLocationWithinPage):
        (WebViewHost::willSendRequest):
        (WebViewHost::didReceiveResponse):
        (WebViewHost::didFinishResourceLoad):
        (WebViewHost::didFailResourceLoad):
        (WebViewHost::didDisplayInsecureContent):
        (WebViewHost::didRunInsecureContent):
        (WebViewHost::printFrameDescription):

2010-09-09  Michael Saboff  <msaboff@apple.com>

        Unreviewed, adding myself to committers list.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-09  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Tony Chang.

        Implement layoutTestController.dumpResourceResponseMIMETypes in Chromium DRT
        https://bugs.webkit.org/show_bug.cgi?id=45479

        Implement layoutTestController.dumpResourceResponseMIMETypes (modelled after
        implementation in ResourceLoadDelegate in the Mac port).

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::dumpResourceResponseMIMETypes):
        (LayoutTestController::reset):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController::setShouldDumpResourceResponseMIMETypes):
        (LayoutTestController::shouldDumpResourceResponseMIMETypes):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::shouldDumpResourceResponseMIMETypes):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::didReceiveResponse):

2010-09-09  Mihai Parparita  <mihaip@chromium.org>

        Reviewed by Daniel Bates.

        svn-apply tries to delete directories it shouldn't
        https://bugs.webkit.org/show_bug.cgi?id=45424

        isDirectoryEmptyForRemoval had the wrong check. If an item in the
        directory is itself a directory, then the directory is definitely
        not empty.

        * Scripts/svn-apply:

2010-09-09  Chris Fleizach  <cfleizach@apple.com>

        Fixing GTK and windows build failure.

        AX: Support AccessibilityTextMarkers in DRT
        https://bugs.webkit.org/show_bug.cgi?id=44778

        * DumpRenderTree/AccessibilityTextMarker.h:
        (AccessibilityTextMarker::platformTextMarker):
        (AccessibilityTextMarkerRange::platformTextMarkerRange):
        * DumpRenderTree/mac/AccessibilityTextMarkerMac.mm:
        (AccessibilityTextMarker::platformTextMarker):
        (AccessibilityTextMarkerRange::platformTextMarkerRange):

2010-09-09  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by David Kilzer.

        AX: Support AccessibilityTextMarkers in DRT
        https://bugs.webkit.org/show_bug.cgi?id=44778

        Add AccessibilityTextMarker and AccessibilityTextMarkerRange which encapsulate the AXTextMarkers 
        that WebCore uses when vending information about its VisiblePositions through AX.

        There are a few new methods in AccessibilityUIElement to retrieve and use text markers, and some basic
        methods for encapsulating and checking equality.

        This will allow future bug fixes in the text marker system to be adequately tested.

        * DumpRenderTree/AccessibilityTextMarker.cpp: Added.
        (toTextMarker):
        (isMarkerEqualCallback):
        (markerFinalize):
        (AccessibilityTextMarker::makeJSAccessibilityTextMarker):
        (AccessibilityTextMarker::getJSClass):
        (toTextMarkerRange):
        (isMarkerRangeEqualCallback):
        (markerRangeFinalize):
        (AccessibilityTextMarkerRange::makeJSAccessibilityTextMarkerRange):
        (AccessibilityTextMarkerRange::getJSClass):
        * DumpRenderTree/AccessibilityTextMarker.h: Added.
        (AccessibilityTextMarker::platformTextMarker):
        (AccessibilityTextMarkerRange::platformTextMarkerRange):
        (AccessibilityTextMarker::AccessibilityTextMarker):
        (AccessibilityTextMarker::~AccessibilityTextMarker):
        (AccessibilityTextMarker::isEqual):
        (AccessibilityTextMarkerRange::AccessibilityTextMarkerRange):
        (AccessibilityTextMarkerRange::~AccessibilityTextMarkerRange):
        (AccessibilityTextMarkerRange::isEqual):
        * DumpRenderTree/AccessibilityUIElement.cpp:
        (textMarkerRangeForElementCallback):
        (textMarkerRangeLengthCallback):
        (textMarkerRangeForMarkersCallback):
        (startTextMarkerForTextMarkerRangeCallback):
        (endTextMarkerForTextMarkerRangeCallback):
        (accessibilityElementForTextMarkerCallback):
        (AccessibilityUIElement::textMarkerRangeForElement):
        (AccessibilityUIElement::textMarkerRangeLength):
        (AccessibilityUIElement::startTextMarkerForTextMarkerRange):
        (AccessibilityUIElement::endTextMarkerForTextMarkerRange):
        (AccessibilityUIElement::accessibilityElementForTextMarker):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        * DumpRenderTree/mac/AccessibilityTextMarkerMac.mm: Added.
        (AccessibilityTextMarker::AccessibilityTextMarker):
        (AccessibilityTextMarker::~AccessibilityTextMarker):
        (AccessibilityTextMarker::isEqual):
        (AccessibilityTextMarkerRange::AccessibilityTextMarkerRange):
        (AccessibilityTextMarkerRange::~AccessibilityTextMarkerRange):
        (AccessibilityTextMarkerRange::isEqual):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::textMarkerRangeForElement):
        (AccessibilityUIElement::textMarkerRangeLength):
        (AccessibilityUIElement::textMarkerRangeForMarkers):
        (AccessibilityUIElement::startTextMarkerForTextMarkerRange):
        (AccessibilityUIElement::endTextMarkerForTextMarkerRange):
        (AccessibilityUIElement::accessibilityElementForTextMarker):
        * DumpRenderTree/win/DumpRenderTree.vcproj:

2010-08-25  Tony Chang  <tony@chromium.org>

        Reviewed by Ojan Vafai.

        don't delete duplicates needed because of intermediate results
        https://bugs.webkit.org/show_bug.cgi?id=44653

        Also, output the full path so we can pipe the output to rm.

        * Scripts/webkitpy/layout_tests/deduplicate_tests.py:
        * Scripts/webkitpy/layout_tests/deduplicate_tests_unittest.py:

2010-09-09  Balazs Kelemen  <kb@inf.u-szeged.hu>

        Reviewed by Andreas Kling.

        [Qt] MiniBrowser does not starts properly
        https://bugs.webkit.org/show_bug.cgi?id=45459

        Do not try set up the first window by calling newWindow on a
        newly created BrowserWindow since it creates a new object.
        * MiniBrowser/qt/BrowserWindow.cpp:
        (BrowserWindow::BrowserWindow):
        * MiniBrowser/qt/main.cpp:
        (main):

2010-09-09  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Get ImageDiff building on Win32
        https://bugs.webkit.org/show_bug.cgi?id=45353

        * DumpRenderTree/gtk/ImageDiff.cpp:
        (main): Switch from using strtok to g_strsplit.

2010-09-09  Zoltan Horvath  <zoltan@webkit.org>

        Reviewed by Andreas Kling.

        [Qt] Modify load method of MiniBrowser's BrowserView class
        https://bugs.webkit.org/show_bug.cgi?id=45442

        Modify load method to take a QString as argument, remove unnecessary QT_VERSION_CHECK.

        * MiniBrowser/qt/BrowserView.cpp:
        (BrowserView::load):
        * MiniBrowser/qt/BrowserView.h:
        * MiniBrowser/qt/BrowserWindow.cpp:
        (BrowserWindow::load):

2010-09-09  Tony Chang  <tony@chromium.org>

        Reviewed by Ojan Vafai.

        fix show_results in new-run-webkit-tests
        https://bugs.webkit.org/show_bug.cgi?id=45413

        * Scripts/webkitpy/layout_tests/port/chromium.py:

2010-09-08  Victor Wang  <victorw@chromium.org>

        Reviewed by Ojan Vafai.

        [Chromium] Fix test results server to make sure
        it does not have corrupted data.

        results.json file size coulbe be >1M and we split
        the data into multiple data store entries in this
        case. This patch fixes the issue that the data may
        be corrupted if data store error happens in the middle
        of saving multiple entries.

        https://bugs.webkit.org/show_bug.cgi?id=45063

        * TestResultServer/model/datastorefile.py:

2010-09-08  Peter Varga  <pvarga@inf.u-szeged.hu>

        Reviewed by Kenneth Rohde Christiansen.

        Fix ignoring return value warning in case of gcc 4.4.4
        https://bugs.webkit.org/show_bug.cgi?id=45384

        * DumpRenderTree/TestNetscapePlugIn/PluginObject.cpp:
        (testPostURLFile):
        If fwrite have written zero byte then the testPostURLFile function
        returns with false as tempFile can't be opened.
        * DumpRenderTree/qt/ImageDiff.cpp:
        (main):
        Put fwrite function into an if condition without body to avoid
        warning. It is safe because this function writes to the stdout.

2010-09-08  Satish Sampath  <satish@chromium.org>

        Unreviewed, adding myself to committers list.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-08  Hans Wennborg  <hans@chromium.org>

        Unreviewed.

        Adding myself as a committer in committers.py.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-08  Zoltan Horvath  <zoltan@webkit.org>

        Reviewed by Simon Hausmann.

        [Qt] Refactor MiniBrowser 
        https://bugs.webkit.org/show_bug.cgi?id=45173

        Split BrowserWindow into two source files and headers. Remove unnecessary header includes.

        * MiniBrowser/qt/BrowserView.cpp: Added.
        (createNewPage):
        (BrowserView::BrowserView):
        (BrowserView::resizeEvent):
        (BrowserView::load):
        (BrowserView::view):
        * MiniBrowser/qt/BrowserView.h: Added.
        (BrowserView::~BrowserView):
        * MiniBrowser/qt/BrowserWindow.cpp:
        * MiniBrowser/qt/BrowserWindow.h:
        * MiniBrowser/qt/MiniBrowser.pro:

2010-09-08  Adam Barth  <abarth@webkit.org>

        Rubber-stamped by Eric Seidel.

        Rename DocLoader to CachedResourceLoader because that's what it does.

        * Scripts/do-webcore-rename:

2010-09-07  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by Ojan Vafai.

        Enable incremental results.json generation for non-layout tests.
        https://bugs.webkit.org/show_bug.cgi?id=45315

        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py: Enable generate_incremental_results=True by default. (This still keeps to generate results.json.)  Also add a code to upload results json files to the app-engine server.  Need a chromium change to actually start the uploading.

        * TestResultServer/model/jsonresults.py: Make sure we save the file with test_type for incremental cases too.


2010-09-07  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, build fix

        Missed one test in mac_unittest.py in previous change; for some
        reason the method is listed twice. I will fix both for now, but will
        figure this out in a later, not-time-sensitive patch.

        https://bugs.webkit.org/show_bug.cgi?id=45357

        * Scripts/webkitpy/layout_tests/port/mac_unittest.py:

2010-09-07  Kent Tamura  <tkent@chromium.org>

        Reviewed by Tony Chang.

        test-webkitpy: Fix load error of
        webkitpy/layout_tests/port/factory_unittest.py on Win32 Python
        https://bugs.webkit.org/show_bug.cgi?id=45356 Need a short

        * Scripts/webkitpy/layout_tests/port/server_process.py:
          Avoid to import fcntl on win32. Win32 Python doesn't have fcntl
          and we don't use server_process.py on Win32 Python. However
          unittest.py tries to load everything in a module.

2010-09-07  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Kent Tamura.

        Fix regression introduced in previous change to new-run-webkit-tests
        (bug 45090) to not try to run unittests for the Mac implementation
        of the Port interface if we aren't running on a Mac.

        Also fix the overrides implementation mock in the chromium unittests
        to fix the case where there are overrides checked in that cause
        problems.

        https://bugs.webkit.org/show_bug.cgi?id=45357

        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        * Scripts/webkitpy/layout_tests/port/mac_unittest.py:
        * Scripts/webkitpy/layout_tests/port/port_testcase.py:

2010-09-01  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Ojan Vafai.

        new-run-webkit-tests: still more unit tests

        Clean up and remove unnecessary code. Biggest notable change is
        moving the chromium-specific imagediff code from port/base to
        port/chromium.

        Add more unit tests for run_webkit_tests.py, port/base.py,
        port/factory.py, port/dryrun.py, and
        layout_package/dump_render_tree_thread.py

        This covers almost all of the generic and test code paths except for
        a few error paths involving invalid or port-specific command line
        arguments, and the code path for uploading results files to the
        buildbots.
        
        https://bugs.webkit.org/show_bug.cgi?id=45090

        * Scripts/webkitpy/layout_tests/data/failures/expected/hang.html: Added.
        * Scripts/webkitpy/layout_tests/data/http/tests/passes/text-expected.txt: Copied from WebKitTools/Scripts/webkitpy/layout_tests/data/passes/text-expected.txt.
        * Scripts/webkitpy/layout_tests/data/http/tests/passes/text.html: Copied from WebKitTools/Scripts/webkitpy/layout_tests/data/passes/text.html.
        * Scripts/webkitpy/layout_tests/data/http/tests/ssl/text-expected.txt: Copied from WebKitTools/Scripts/webkitpy/layout_tests/data/passes/text-expected.txt.
        * Scripts/webkitpy/layout_tests/data/http/tests/ssl/text.html: Copied from WebKitTools/Scripts/webkitpy/layout_tests/data/passes/text.html.
        * Scripts/webkitpy/layout_tests/data/platform/test/test_expectations.txt:
        * Scripts/webkitpy/layout_tests/data/websocket/tests/passes/text-expected.txt: Copied from WebKitTools/Scripts/webkitpy/layout_tests/data/passes/text-expected.txt.
        * Scripts/webkitpy/layout_tests/data/websocket/tests/passes/text.html: Copied from WebKitTools/Scripts/webkitpy/layout_tests/data/passes/text.html.
        * Scripts/webkitpy/layout_tests/layout_package/dump_render_tree_thread.py:
        * Scripts/webkitpy/layout_tests/layout_package/dump_render_tree_thread_unittest.py: Added.
        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        * Scripts/webkitpy/layout_tests/port/dryrun.py:
        * Scripts/webkitpy/layout_tests/port/factory_unittest.py:
        * Scripts/webkitpy/layout_tests/port/mac_unittest.py:
        * Scripts/webkitpy/layout_tests/port/port_testcase.py: Added.
        * Scripts/webkitpy/layout_tests/port/server_process.py:
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_unittest.py:

2010-09-07  Joseph Pecoraro  <joepeck@webkit.org>

        Reviewed by Darin Adler.

        Provide a way to trigger a <select multiple> onchange event on changes
        https://bugs.webkit.org/show_bug.cgi?id=45192

        Adds a selector on ObjCController for testing
        -[DOMHTMLSelectElement _activateItemAtIndex:allowMultipleSelection:] and
        its different uses.

        * DumpRenderTree/mac/ObjCController.m:
        (+[ObjCController isSelectorExcludedFromWebScript:]):
        (+[ObjCController webScriptNameForSelector:]):
        (-[ObjCController setSelectElement:selectedIndex:allowingMultiple:]):

2010-09-07  James Robinson  <jamesr@chromium.org>

        Rubber-stamped by Dimitri Glazkov.

        Move myself from the committer to the reviewer list.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-07  Tony Chang  <tony@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Make a public flag for how DRT generates bitmaps on Linux
        https://bugs.webkit.org/show_bug.cgi?id=45133

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dumpImage):

2010-09-07  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Implement --check-layout-test-sys-deps
        https://bugs.webkit.org/show_bug.cgi?id=45283

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (main): Check --check-layout-test-sys-deps and call checkLayoutTestSystemDependencies().
        * DumpRenderTree/chromium/TestShell.h: Declare checkLayoutTestSystemDependencies().
        * DumpRenderTree/chromium/TestShellGtk.cpp:
        (checkLayoutTestSystemDependencies): Add an empty implementation.
        * DumpRenderTree/chromium/TestShellMac.mm:
        (checkLayoutTestSystemDependencies): Add an empty implementation.
        * DumpRenderTree/chromium/TestShellWin.cpp:
        (checkLayoutTestSystemDependencies): Port similar function of test_shell.

2010-09-07  Jessie Berlin  <jberlin@apple.com>

        Unreviewed. Mac build fix.

        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (didClearWindowObjectForFrame):

2010-09-07  Jessie Berlin  <jberlin@apple.com>

        Reviewed by Darin Adler.

        Indicate which one of the ScriptWorlds for a Frame the Window Object has been cleared for
        https://bugs.webkit.org/show_bug.cgi?id=45217
        
        Make WebKitTestRunner work with this change.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::didClearWindowForFrame):
        Make sure the ScriptWorld here is the normal world, since that is no longer being done in
        WebFrameLoaderClient.
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:

2010-09-07  Philippe Normand  <pnormand@igalia.com>

        Unreviewed, build fix.

        webkit-patch command to find the ports covering a specific layout test
        https://bugs.webkit.org/show_bug.cgi?id=42832

        * Scripts/webkitpy/layout_tests/port/chromium.py: Don't assume the
        tests are present when building the expectations. This is needed
        for the unittests.

2010-09-06  Philippe Normand  <pnormand@igalia.com>

        Reviewed by Adam Barth.

        webkit-patch command to find the ports covering a specific layout test
        https://bugs.webkit.org/show_bug.cgi?id=42832

        To use it: webkit-patch skipped-ports some/layout/test.html

        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/layout_tests/port/base_unittest.py:
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        * Scripts/webkitpy/layout_tests/port/chromium_unittest.py:
        * Scripts/webkitpy/layout_tests/port/factory.py:
        * Scripts/webkitpy/layout_tests/port/factory_unittest.py:
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py:
        * Scripts/webkitpy/tool/commands/queries.py:
        * Scripts/webkitpy/tool/commands/queries_unittest.py:
        * Scripts/webkitpy/tool/main.py:
        * Scripts/webkitpy/tool/mocktool.py:

2010-09-07  Gabor Rapcsanyi  <rgabor@inf.u-szeged.hu>

        Reviewed by Eric Seidel.

        [NRWT] Add temp directory to all running drivers.
        https://bugs.webkit.org/show_bug.cgi?id=45261

        * Scripts/webkitpy/layout_tests/port/webkit.py:

2010-09-06  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Kent Tamura.

        [Chromium/DRT] Empty out user stylesheet after each test run.
        https://bugs.webkit.org/show_bug.cgi?id=45282

        This should significantly cut down on the number of the mysterious flaky tests
        whose diffs looked like the page was blown up to a very lage size. This
        was indeed the dirty work of platform/mac/fast/loader/user-stylesheet-fast-path.html,
        which set the base body font to 100px.

        Since the user stylesheet was never reset, _all_ pixel tests that ran after it in
        the same thread failed.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::resetWebSettings): Set user stylesheet to an empty URL.

2010-09-06  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Do not generate pixel results for text/plain resources
        https://bugs.webkit.org/show_bug.cgi?id=45253

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dump): Clear shouldGeneratePixelResults flag for text/plain.

2010-09-06  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Kent Tamura.

        print out correct error when a DRT thread dies in NRWT
        https://bugs.webkit.org/show_bug.cgi?id=45281

        Not sure why, but with the parens, python 2.6.5 on Linux
        gives an error that raise takes 5 arguments and 0 were given.
        Didn't test other platforms or python versions, but putting it
        all on one line fixes it and correctly prints the exception
        from the DRT thread.

        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:

2010-09-06  Eric Seidel  <eric@webkit.org>

        Unreviewed, just adding some emails from lists.webkit.org.

        Update committers.py to include emails from lists.webkit.org
        as found by the validate-committer-lists script.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-06  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Small code cleanup in DumpRenderTreeGtk.cpp
        https://bugs.webkit.org/show_bug.cgi?id=45213

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (initializeFonts): Made this function do nothing for non-X11 platforms, so we don't
        have to surround the invocation with #ifdefs.
        (useLongRunningServerMode): Added.
        (runTestingServerLoop): Added.
        (initializeGlobalsFromCommandLineOptions): Added.
        (runTest): Removed ifdefs.
        (main): Use new helper functions.

2010-09-06  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] EventSender should support modifier keys with mouseDown and mouseUp events
        https://bugs.webkit.org/show_bug.cgi?id=45235

        Add support for interpreting the modifier key arguments to the mouseDown and mouseUp
        methods of the EventSender.

        * DumpRenderTree/gtk/EventSender.cpp:
        (prepareMouseButtonEvent): Allow passing in a modifier bitmask, which will be OR'd
        with the current modifiers.
        (contextClickCallback): Always send no modifiers when preparing the mouse event.
        (gdkModifersFromJSValue): Added, converts a JSValue array into a GDK modifier bitmask.
        (mouseDownCallback): Send in the requested modifiers to prepareMouseButtonEvent.
        (mouseUpCallback): Ditto.

2010-09-05  Peter Kasting  <pkasting@google.com>

        Reviewed by Adam Barth.

        Make Chromium/Mac generate continuous mousewheel events with the same wheelDelta values as Safari/Mac.
        https://bugs.webkit.org/show_bug.cgi?id=45155

        * DumpRenderTree/chromium/EventSender.cpp: Modify Chromium DRT mousewheel event generation to match new behavior on Mac.
        (EventSender::handleMouseWheel):

2010-09-05  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Joseph Pecoraro.

        Web Inspector: remove WebDevToolsAgentClient::forceRepaint which is not used
        https://bugs.webkit.org/show_bug.cgi?id=45179

        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:

2010-09-05  Andreas Kling  <andreas.kling@nokia.com>

        Rubber-stamped by Daniel Bates.

        Adding myself as reviewer.

        * Scripts/webkitpy/common/config/committers.py:

2010-09-04  Daniel Bates  <dbates@rim.com>

        Reviewed by Martin Robinson.

        Teach svn-apply/unapply about svn:mergeinfo
        https://bugs.webkit.org/show_bug.cgi?id=45236

        Recognize the svn:mergeinfo property and ignore it for now.

        Currently, svn-apply/unapply recognize only '+' and '-'
        property changes within a diff. We should add support
        to recognize "Merged" and "Reverse-merged" changes as well.
        Because svn:mergeinfo is metadata that is used only by SVN
        and tends to be error-prone and/or nuisance (*), we will ignore
        it for now.
        (*) See "Parting Thoughts" of <http://www.collab.net/community/subversion/articles/merge-info.html>.

        * Scripts/VCSUtils.pm:
          - Modified parseSvnProperty() to recognize "Merged" and
            "Reverse-merged" as the start of a property value.
        * Scripts/webkitperl/VCSUtils_unittest/parseSvnDiffFooter.pl:
          - Added the following unit tests:
            "simple: add svn:mergeinfo"
            "simple: delete svn:mergeinfo"
            "simple: modified svn:mergeinfo"
        * Scripts/webkitperl/VCSUtils_unittest/parseSvnProperty.pl:
          - Added the following unit tests:
            "simple: add svn:mergeinfo"
            "simple: delete svn:mergeinfo"
            "simple: modified svn:mergeinfo"
            "simple: modified svn:mergeinfo using SVN 1.4 syntax"
            "'Merged' change followed by 'Merged' change"
            "'Reverse-merged' change followed by 'Reverse-merged' change"
        * Scripts/webkitperl/VCSUtils_unittest/parseSvnPropertyValue.pl:
          - Added the following unit tests:
            "'Merged' change"
            "'Reverse-merged' change"
            "'Reverse-merged' change followed by 'Merge' change"
            "'Merged' change followed by 'Merge' change"
            "'Reverse-merged' change followed by 'Reverse-merged' change"
            "'Reverse-merged' change followed by 'Reverse-merged' change followed by 'Merged' change"

2010-09-04  Lucas De Marchi  <lucas.demarchi@profusion.mobi>

        Reviewed by Kenneth Rohde Christiansen.

        [EFL] Move test browser to WebKitTools directory
        https://bugs.webkit.org/show_bug.cgi?id=45212

        Follow other ports like QT and GTK which moved the test browser to
        WebKitTools directory.

        * CMakeListsEfl.txt: Added.
        * EWebLauncher/main.c: Added.
        (print_history):
        (zoom_level_set):
        (on_ecore_evas_resize):
        (title_set):
        (viewport_set):
        (on_title_changed):
        (on_progress):
        (on_load_finished):
        (on_toolbars_visible_set):
        (on_toolbars_visible_get):
        (on_statusbar_visible_set):
        (on_statusbar_visible_get):
        (on_scrollbars_visible_set):
        (on_scrollbars_visible_get):
        (on_menubar_visible_set):
        (on_menubar_visible_get):
        (on_tooltip_text_set):
        (on_inputmethod_changed):
        (on_viewport_changed):
        (on_mouse_down):
        (on_focus_out):
        (on_focus_in):
        (on_resized):
        (on_key_down):
        (on_browser_del):
        (on_closeWindow):
        (quit):
        (browserCreate):
        (browserDestroy):
        (closeWindow):
        (main_signal_exit):
        (findThemePath):
        (main):

2010-09-03  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Adam Roben.

        Set project dependencies so that they build serially. This fixes
        issues when running run-webkit-tests if DRT is not built yet.

        * DumpRenderTree/DumpRenderTree.sln:

2010-09-03  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Adam Barth.

        Fix reading configuraiton in NWRT to work on Windows.
        https://bugs.webkit.org/show_bug.cgi?id=45180

        * Scripts/webkitpy/layout_tests/port/base.py: Added 'perl' argument, because Windows doesn't know what to do
            with the file otherwise.

2010-09-03  Chris Rogers  <crogers@google.com>

        Unreviewed

        Add myself to the committers list
        https://bugs.webkit.org/show_bug.cgi?id=45189

        * Scripts/webkitpy/common/config/committers.py:

2010-09-03  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Yury Semikhatsky.

        http/tests/inspector/console-xhr-logging.html and http/tests/inspector/resource-har-conversion.html are failing on chromium win bot
        Changed MIME type for .js to application/x-javascript for consistency with apache used on other platforms.
        https://bugs.webkit.org/show_bug.cgi?id=45137

        * Scripts/webkitpy/layout_tests/port/lighttpd.conf:

2010-09-03  Gabor Rapcsanyi  <rgabor@inf.u-szeged.hu>

        Reviewed by Eric Seidel.

        Add feature detection support to NRWT.
        https://bugs.webkit.org/show_bug.cgi?id=41842

        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/layout_tests/port/qt.py:
        * Scripts/webkitpy/layout_tests/port/webkit.py:
        * Scripts/webkitpy/layout_tests/port/webkit_unittest.py: Added.

2010-09-03  Hironori Bono  <hbono@chromium.org>

        Reviewed by Kent Tamura.

        Adds textInputController.hasSpellingMarker() to avoid using pixel tests for spellchecking tests
        and implements it for Mac.
        https://bugs.webkit.org/show_bug.cgi?id=41832

        * DumpRenderTree/mac/TextInputController.m: Added [TextInputController hasSpellingMarker:length:]
        and bind it so we can call it from JavaScript.
        (+[TextInputController isSelectorExcludedFromWebScript:]):
        (+[TextInputController webScriptNameForSelector:]):
        (-[TextInputController hasSpellingMarker:length:]):

2010-09-02  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Add a unit test for commit-queue retries
        https://bugs.webkit.org/show_bug.cgi?id=45162

        I think commit-queue retries are not correctly avoiding
        build and test on retries.  So I started testing the code.
        Unfortunately this test did not find the bug.  But now
        that we have the test we might as well keep it.
        I also fixed a broken import in validate-committer-lists.

        * Scripts/validate-committer-lists:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:

2010-09-02  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Remove dependency to base/task.h and base/timer.h
        https://bugs.webkit.org/show_bug.cgi?id=45091

        Task.{cpp,h} introduces a simpler version of Chromium
        base/task.h. It doesn't have TupleN and Method.

        * DumpRenderTree/DumpRenderTree.gypi:
         Add Task.cpp and Task.h
        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        (DRTDevToolsAgent::DRTDevToolsAgent):
        (DRTDevToolsAgent::reset):
        (DRTDevToolsAgent::asyncCall):
        (DRTDevToolsAgent::frontendLoaded):
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:
        (DRTDevToolsAgent::taskList): Added to use MethodTask<T>.
        * DumpRenderTree/chromium/DRTDevToolsClient.cpp:
        (DRTDevToolsClient::DRTDevToolsClient):
        (DRTDevToolsClient::~DRTDevToolsClient):
        (DRTDevToolsClient::reset):
        (DRTDevToolsClient::asyncCall):
        * DumpRenderTree/chromium/DRTDevToolsClient.h:
        (DRTDevToolsClient::taskList): Added to use MethodTask<T>.
        * DumpRenderTree/chromium/EventSender.cpp:
        (EventSender::EventSender):
        (EventSender::reset):
        (EventSender::scheduleAsynchronousClick):
        * DumpRenderTree/chromium/EventSender.h:
        (EventSender::taskList): Added to use MethodTask<T>.
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::WorkQueue::processWorkSoon):
        (LayoutTestController::waitUntilDone):
        (LayoutTestController::notifyDone):
        (LayoutTestController::reset):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController::taskList): Added to use MethodTask<T>.
        (LayoutTestController::WorkQueue::taskList): Added to use MethodTask<T>.
        * DumpRenderTree/chromium/NotificationPresenter.cpp:
        (deferredDisplayDispatch):
        (NotificationPresenter::show):
        * DumpRenderTree/chromium/Task.cpp: Added.
        * DumpRenderTree/chromium/Task.h: Added.

2010-09-02  Steve Block  <steveblock@google.com>

        Reviewed by Adam Barth.

        Hook up LayoutTestController.setMockDeviceOrientation() on Mac.
        https://bugs.webkit.org/show_bug.cgi?id=43181

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (createWebViewAndOffscreenWindow):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setMockDeviceOrientation):

2010-08-31  Adam Roben  <aroben@apple.com>

        Fix flashiness when resizing the browser window on Windows

        Reviewed by Sam Weinig.

        * MiniBrowser/win/BrowserWindow.cpp:
        (BrowserWindow::wndProc): Override WM_ERASEBKGND so Windows won't
        periodically fill the window with white.

2010-09-02  Peter Kasting  <pkasting@google.com>

        Reviewed by Dimitri Glazkov.

        Implement [continuous]MouseScrollBy() on Chromium, and partly on GTK.
        https://bugs.webkit.org/show_bug.cgi?id=45073

        * DumpRenderTree/chromium/EventSender.cpp:
        (EventSender::EventSender):
        (EventSender::mouseScrollBy):
        (EventSender::continuousMouseScrollBy):
        (EventSender::sendCurrentTouchEvent):
        (EventSender::handleMouseWheel):
        * DumpRenderTree/chromium/EventSender.h:
        * DumpRenderTree/gtk/EventSender.cpp:
        (mouseScrollByCallback):
        (continuousMouseScrollByCallback):

2010-09-01  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Tony Chang.

        Land a patched version of r66542 - change TestRunner to have an
        separate cleanup method and fix the ordering of cleanup between
        TestRunner and the printing module, and then wrap everything in a
        try/finally block to ensure reliable cleanup without needing to
        rely on stuff happening in the destructor of the TestRunner.

        Also refactor run_webkit_tests.run() to be much smaller and cleaner
        by creating a bunch of helper methods and moving more stuff into
        the TestRunner class.

        This fixes the crash at the end of the linux test run of
        new-run-webkit-tests (and undoes the rollout in 66547).

        https://bugs.webkit.org/show_bug.cgi?id=44902

        * Scripts/webkitpy/layout_tests/data/failures/expected/exception.html: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/keyboard.html: Added.
        * Scripts/webkitpy/layout_tests/data/passes/error-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/passes/error.html: Added.
        * Scripts/webkitpy/layout_tests/data/platform/test/test_expectations.txt:
        * Scripts/webkitpy/layout_tests/layout_package/dump_render_tree_thread.py:
        * Scripts/webkitpy/layout_tests/layout_package/printing.py:
        * Scripts/webkitpy/layout_tests/layout_package/printing_unittest.py:
        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_unittest.py:

2010-09-01  Mark Rowe  <mrowe@apple.com>

        Reviewed by Adam Roben.

        Fix TestNetscapePlugIn to compile without access to QuickDraw private headers.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:

2010-09-01  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Adam Roben.

        Have kill-old-processes kill debug and release variants of WebKit2WebWebProcess
        and WebKitTestRunner.

        * BuildSlaveSupport/win/kill-old-processes:

2010-09-01  Gabor Rapcsanyi  <rgabor@inf.u-szeged.hu>

        Reviewed by Antonio Gomes.

        [Qt] Remove obsolete include path from DumpRenderTree.pro

        * DumpRenderTree/qt/DumpRenderTree.pro:

2010-09-01  Mahesh Kulkarni  <mahesh.kulkarni@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] QWebPage::allowGeolocationRequest should be async API
        https://bugs.webkit.org/show_bug.cgi?id=41364

        Implements new async API for geolocation permission similar to
        Notification. WebPage maintains list of geolocation permission request
        QtWebkit and set's when LayoutTestController gets the access from test JS

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::WebPage::WebPage):
        (WebCore::WebPage::resetSettings):
        (WebCore::WebPage::requestPermission):
        (WebCore::WebPage::cancelPermission):
        (WebCore::WebPage::permissionSet):
        (WebCore::DumpRenderTree::DumpRenderTree):
        (WebCore::DumpRenderTree::processLine):
        (WebCore::DumpRenderTree::geolocationPermissionSet):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setGeolocationPermission):
        (LayoutTestController::setGeolocationPermissionCommon):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-09-01  Andras Becsi  <abecsi@webkit.org>

        Reviewed by Antti Koivisto.

        [Qt] Auto-generate WebKit2 forwarding headers
        https://bugs.webkit.org/show_bug.cgi?id=44692

        * MiniBrowser/qt/BrowserWindow.h: use source style includes
        * MiniBrowser/qt/MiniBrowser.pro: add missing include paths
        * Scripts/enumerate-included-framework-headers: Removed.

2010-08-31  Ademar de Souza Reis Jr  <ademar.reis@openbossa.org>

        Reviewed by Adam Barth.

        Allow Ctrl+C inside Bugzilla::fetch_bug_dictionary
        https://bugs.webkit.org/show_bug.cgi?id=44789

        * Scripts/webkitpy/common/net/bugzilla.py:

2010-08-31  Leandro Pereira  <leandro@profusion.mobi>

        Reviewed by Adam Barth.

        ews: Add support for EFL-EWS
        https://bugs.webkit.org/show_bug.cgi?id=44982

        * QueueStatusServer/model/queues.py: Add "efl-ews" to queues list.
        * Scripts/webkitpy/common/config/ports.py: Define a EflPort class
        and add it to the ports dict.
        * Scripts/webkitpy/tool/commands/earlywarningsystem.py: Define a
        EflEWS class.
        * Scripts/webkitpy/tool/commands/earlywarningsystem_unittest.py: Add
        a test case for the EFL EWS.

2010-08-31  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=42195
        <rdar://problem/8186761> WebKitTestRunner needs to support layoutTestController.setXSSAuditorEnabled

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp: (WTR::LayoutTestController::setXSSAuditorEnabled):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        Added setXSSAuditorEnabled, calling through to an WKBundle private method. Calling this method
        makes WebProcess use a different value for this preference than UIProcess thinks it uses.

        * WebKitTestRunner/TestController.cpp: (WTR::TestController::resetStateToConsistentValues):
        Reset xssAuditorEnabled. Even though the value doesn't change, this calls through to WebProcess,
        which forgets its override.

2010-08-31  Sam Weinig  <sam@webkit.org>

        Reviewed by Gavin Barraclough.

        WebKitTestRunner needs layoutTestController.addUserStyleSheet
        https://bugs.webkit.org/show_bug.cgi?id=42680

        WebKitTestRunner needs layoutTestController.addUserScript
        https://bugs.webkit.org/show_bug.cgi?id=42681

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::beginTesting):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::addUserScript):
        (WTR::LayoutTestController::addUserStyleSheet):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:

2010-08-31  Dirk Pranke  <dpranke@chromium.org>

        Unreviewed, rolling out r66542.
        http://trac.webkit.org/changeset/66542
        https://bugs.webkit.org/show_bug.cgi?id=44902

        r66542 - the weird logging dependencies in Python stuck again ...

        * Scripts/webkitpy/layout_tests/data/failures/expected/exception.html: Removed.
        * Scripts/webkitpy/layout_tests/data/failures/expected/keyboard.html: Removed.
        * Scripts/webkitpy/layout_tests/data/passes/error-expected.txt: Removed.
        * Scripts/webkitpy/layout_tests/data/passes/error.html: Removed.
        * Scripts/webkitpy/layout_tests/data/platform/test/test_expectations.txt:
        * Scripts/webkitpy/layout_tests/layout_package/dump_render_tree_thread.py:
        * Scripts/webkitpy/layout_tests/layout_package/printing.py:
        * Scripts/webkitpy/layout_tests/layout_package/printing_unittest.py:
        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_unittest.py:

2010-08-31  Dumitru Daniliuc  <dumi@chromium.org>

        Reviewed by Tony Chang.

        Implementing LayoutTestController::markerTextForListItem() in Chromium's DRT.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::markerTextForListItem):
        * DumpRenderTree/chromium/LayoutTestController.h:

2010-08-31  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Ojan Vafai.

        new-run-webkit-tests: add more unit tests

        Add more unit tests for new-run-webkit-tests; we now cover all but
        the most obscure code paths in the generic code. We still need to
        add coverage for the http server and web socket paths, and add better
        coverage of the platform-specific logic. Note that the rebaselining
        tool is still not well tested.

        Also clean up some of the configuration logic for the printing
        module and the way it interacts with the Python logging module; that
        is a crufty interface, to be certain.
        
        https://bugs.webkit.org/show_bug.cgi?id=44902

        * Scripts/webkitpy/layout_tests/data/failures/expected/exception.html: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/keyboard.html: Added.
        * Scripts/webkitpy/layout_tests/data/passes/error-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/passes/error.html: Added.
        * Scripts/webkitpy/layout_tests/data/platform/test/test_expectations.txt:
        * Scripts/webkitpy/layout_tests/layout_package/dump_render_tree_thread.py:
        * Scripts/webkitpy/layout_tests/layout_package/printing.py:
        * Scripts/webkitpy/layout_tests/layout_package/printing_unittest.py:
        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_unittest.py:

2010-08-31  Darin Adler  <darin@apple.com>

        Reviewed by Anders Carlsson.

        * Scripts/check-for-global-initializers: Add a file that ends up having global initializers
        in a debug build when built with certain compilers.

2010-08-31  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Gustavo Noronha Silva.

        [GTK] Isolate all GTK+ typedefs into one file
        https://bugs.webkit.org/show_bug.cgi?id=44900

        * DumpRenderTree/gtk/EventSender.h: Remove GTK+ typedefs.

2010-08-31  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Show more status on queue status pages
        https://bugs.webkit.org/show_bug.cgi?id=44938

        I upped the number of status lines from 6 to 15 --
        this has been bugging me for a while...

        I also disabled showing the chromium-win EWS queue
        since it's been down for almost 5 months now.

        * QueueStatusServer/handlers/dashboard.py:
        * QueueStatusServer/handlers/queuestatus.py:
        * QueueStatusServer/model/queues.py:

2010-08-31  Zoltan Horvath  <zoltan@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt] Read command line arguments and open them as URLs in new windows
        https://bugs.webkit.org/show_bug.cgi?id=44944

        Extend MiniBrowser to accept command line arguments and open them as URLs in new browser windows.

        * MiniBrowser/qt/main.cpp:
        (main):

2010-08-31  Adrian Perez  <aperez@igalia.com>

        Reviewed by Martin Robinson.

        Support scripts to run Buildbot slaves under daemontools (gtk related)
        https://bugs.webkit.org/show_bug.cgi?id=40053

        * BuildSlaveSupport/gtk: Added.
        * BuildSlaveSupport/gtk/README: Added.
        * BuildSlaveSupport/gtk/buildbot: Added.
        * BuildSlaveSupport/gtk/buildbot/log: Added.
        * BuildSlaveSupport/gtk/buildbot/log/run: Added.
        * BuildSlaveSupport/gtk/buildbot/run: Added.
        * BuildSlaveSupport/gtk/crashmon: Added.
        * BuildSlaveSupport/gtk/crashmon/crashmon: Added.
        * BuildSlaveSupport/gtk/crashmon/log: Added.
        * BuildSlaveSupport/gtk/crashmon/log/run: Added.
        * BuildSlaveSupport/gtk/crashmon/run: Added.
        * BuildSlaveSupport/gtk/daemontools-buildbot.conf: Added.
        * BuildSlaveSupport/gtk/pulseaudio: Added.
        * BuildSlaveSupport/gtk/pulseaudio/run: Added.
        * BuildSlaveSupport/gtk/xvfb: Added.
        * BuildSlaveSupport/gtk/xvfb/log: Added.
        * BuildSlaveSupport/gtk/xvfb/log/run: Added.
        * BuildSlaveSupport/gtk/xvfb/run: Added.

2010-08-27  John Gregg  <johnnyg@google.com>

        Reviewed by David Levin.

        Notifications should support a click event.
        Adds necessary hooks to chromium's DRT so that clicks on desktop notifications
        can be simulated during a layout test.  Requires storing a list of active
        notifications so that they can be referred to later for clicking.
        https://bugs.webkit.org/show_bug.cgi?id=44800

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::simulateDesktopNotificationClick):
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/chromium/NotificationPresenter.cpp:
        (NotificationPresenter::simulateClick):
        (NotificationPresenter::show):
        (NotificationPresenter::cancel):
        (NotificationPresenter::objectDestroyed):
        * DumpRenderTree/chromium/NotificationPresenter.h:

2010-08-30  Alice Liu  <alice.liu@apple.com>

        Reviewed by Darin Adler.

        Add missing parts of didFinishDocumentLoadForFrame
        https://bugs.webkit.org/show_bug.cgi?id=44913

        * MiniBrowser/mac/BrowserWindowController.m:
        (didFinishDocumentLoadForFrame): Added
        (-[BrowserWindowController awakeFromNib]): Updated struct
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::InjectedBundlePage): Rearranged function ptr
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize): Updated struct

2010-08-30  Vangelis Kokkevis  <vangelis@chromium.org>

        Unreviewed: Add myself to the list of Committers.

        * Scripts/webkitpy/common/config/committers.py:

2010-08-30  Kent Tamura  <tkent@chromium.org>

        Reviewed by Adam Barth.

        Fix fast/notifications/notifications-display-close-events.html failure
        https://bugs.webkit.org/show_bug.cgi?id=44585

        Apply http://crrev.com/48893. We should dispatch display events
        asynchronously.

        * DumpRenderTree/chromium/NotificationPresenter.cpp:
        (deferredDisplayDispatch):
        (NotificationPresenter::show):

2010-08-30  Robert Hogan  <robert@webkit.org>

        Reviewed by Simon Hausmann.

        allow ports with windowed plugins to support windowless plugin tests

        https://bugs.webkit.org/show_bug.cgi?id=40730

        Ports that implement plugins windowed by default need to have a way of
        supporting plugin tests that assume the plugin is windowless. Add this
        feature to the tests and support it in the webkit test plugin. Also
        add mouse and keyboard event logging to the webkit-test plugin on Unix.

        Unskip the following tests on Qt:

        plugins/mouse-events.html
        plugins/keyboard-events.html
        plugins/mouse-events-fixedpos.html

        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp:
        (pluginSetProperty):
        * DumpRenderTree/TestNetscapePlugIn.subproj/main.cpp:
        (NPP_New):
        * DumpRenderTree/unix/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_handle_event):

2010-08-30  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix after addition of fileapi directory in WebCore.

        * wx/build/settings.py:

2010-08-30  Alejandro G. Castro  <alex@igalia.com>

        Reviewed by Xan Lopez.

        Fixed compilation error, now that we have included the
        GtkVersioning.h we have to remove some version dependent code from
        EventSender.

        * DumpRenderTree/gtk/EventSender.cpp:

2010-08-30  Alejandro G. Castro  <alex@igalia.com>

        Reviewed by Martin Robinson.

        [Gtk] gdk_display_get_core_pointer and gdk_device_get_core_pointer
        are deprecated
        https://bugs.webkit.org/show_bug.cgi?id=44787

        We have replaced GtkVersioning.cpp with GtkVersioning.c and
        created a function (getDefaultGDKPointerDevice) to get the pointer
        of the window with the new APIs. We added that function to DRT and
        copyandpaste unit test.

        * DumpRenderTree/gtk/EventSender.cpp:
        (prepareMouseButtonEvent):
        (mouseMoveToCallback):
        (keyDownCallback):
        * GNUmakefile.am:

2010-08-30  Zoltan Horvath  <zoltan@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Add new window menu to MiniBrowser

        Implement newWindow function and add a menu item for opening new window in MiniBrowser.

        * MiniBrowser/qt/BrowserWindow.cpp:
        (BrowserWindow::BrowserWindow):
        (BrowserWindow::newWindow):
        * MiniBrowser/qt/BrowserWindow.h:
        * MiniBrowser/qt/main.cpp:
        (main):

2010-08-29  James Robinson  <jamesr@chromium.org>

        Reviewed by David Levin.

        Make failing the download step fail the build
        https://bugs.webkit.org/show_bug.cgi?id=44298

        If the download step fails on a test bot, this ensures that
        the build goes red instead of only the download step going red
        and the overall build staying green.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:

2010-08-29  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Remove dependency to base/keyboard_codes.h
        https://bugs.webkit.org/show_bug.cgi?id=44847

        * DumpRenderTree/chromium/EventSender.cpp:
         Use webkit_support::VKEY_* instead of base::VKEY_*.

2010-08-29  Darin Adler  <darin@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=40589

        * Scripts/prepare-ChangeLog: Only prepend namespaces to non-empty
        function names.

2010-08-26  Holger Hans Peter Freyther  <holger@moiji-mobile.com>

        Reviewed by Darin Adler.

        [iExploder] Add new CSS Properties and HTML Attributes
        https://bugs.webkit.org/show_bug.cgi?id=44746

        Updated the files with the update-iexploder-cssproperties script
        and manually readded the -webkit-binding CSS Property to the list.

        * iExploder/htdocs/cssproperties.in:
        * iExploder/htdocs/htmlattrs.in:
        * iExploder/htdocs/htmltags.in:

2010-08-26  Holger Hans Peter Freyther  <holger@moiji-mobile.com>

        Reviewed by Darin Adler.

        Fix Coverage build after the addition of ANGLE
        https://bugs.webkit.org/show_bug.cgi?id=44744

        ANGLE is using libtool to build a static library and the version of
        libtool on Leopard refuses to handle the -fprofile-arcs and -ftest-coverage
        parameters. The easiest way to handle this is to not build ANGLE with
        coverage information.

        This is achieved by applying the XCode options for each project
        separately and exclude ANGLE.

        * Scripts/build-webkit: Remove -framework AppKit due link errors.
        * Scripts/webkitdirs.pm: Do not apply the XCode options for ANGLE.

2010-08-28  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix after directory addition.

        * wx/build/settings.py:

2010-08-28  Chris Guillory   <chris.guillory@google.com>

        Reviewed by Chris Fleizach.

        Add AX notification for childrenChanged
        https://bugs.webkit.org/show_bug.cgi?id=44472

        * DumpRenderTree/chromium/AccessibilityController.cpp:
        (AccessibilityController::AccessibilityController):
        (AccessibilityController::reset):
        (AccessibilityController::getRootElement):
        (AccessibilityController::dumpAccessibilityNotifications):
        * DumpRenderTree/chromium/AccessibilityController.h:
        (AccessibilityController::shouldDumpAccessibilityNotifications):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::didChangeAccessibilityObjectChildren):
        * DumpRenderTree/chromium/WebViewHost.h:

2010-08-28  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Update commit-queue failure message
        https://bugs.webkit.org/show_bug.cgi?id=44798

        The commit-queue auto-restarts itself and has for a very long time.
        No need for people to email me to request a restart anymore.

        * Scripts/webkitpy/common/net/bugzilla.py:
        * Scripts/webkitpy/common/net/bugzilla_unittest.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:

2010-07-27  Jer Noble  <jer.noble@apple.com>

        Reviewed by Eric Carlson.

        Add JavaScript API to allow a page to go fullscreen.
        rdar://problem/6867795
        
        Added basic full screen support to DumpRenderTree: when a webView requests
        that DumpRenderTree go "full screen", just call the provided callback listener object's
        will/did Enter/Exit full screen methods.  Also, register a new user default which 
        enables full screen support.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/mac/UIDelegate.mm:
        (-[UIDelegate webView:supportsFullscreenForElement:]):
        (-[UIDelegate webView:enterFullscreenForElement:listener:]):
        (-[UIDelegate webView:exitFullscreenForElement:listener:]):

2010-08-27  Benjamin Poulain  <benjamin.poulain@nokia.com>

        Unreviewed. Add myself to the committers list.

        * Scripts/webkitpy/common/config/committers.py:

2010-08-27  Kent Tamura  <tkent@chromium.org>

        Reviewed by Pavel Feldman.

        [DRT/Chromium] Fix inspector test failures
        https://bugs.webkit.org/show_bug.cgi?id=44748

        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        (DRTDevToolsAgent::createClientMessageLoop):
          Returns a valid WebKitClientMessageLoop instance
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:

2010-08-26  Jon Honeycutt  <jhoneycutt@apple.com>

        Add Windows WebKit2 Tester to buildbot
        <rdar://problem/7887703>

        Reviewed by Dan Bernstein.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2010-08-26  Philippe Normand  <pnormand@igalia.com>

        Reviewed by Martin Robinson.

        [GTK] Needs DRT queueLoadHTMLString and setDeferMainResourceLoad-implementations
        https://bugs.webkit.org/show_bug.cgi?id=42152

        * DumpRenderTree/gtk/WorkQueueItemGtk.cpp:
        (LoadHTMLStringItem::invoke): Implementation using
        webkit_web_frame_load_string().

2010-08-25  Jon Honeycutt  <jhoneycutt@apple.com>

        <rdar://problem/8334338> run-webkit-tests sometimes hangs when using
        WebKitTestRunner (44331)

        Reviewed by Darin Adler.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):
        The hang occurs when WebKitTestRunner begins launching the WebKit2
        web process then exits before it finishes launching. Work around this by
        looking for the --print-supported-features argument and exiting without
        creating the web process.

2010-08-26  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Tony Chang.

        new-run-webkit-tests: add rebaselining tests for test_expectations
        
        This patch adds more unit tests for the rebaselining code in the
        test_expectations module. It doesn't add any tests for
        rebaseline_chromium_webkit_tests itself; that will come some other
        time.

        https://bugs.webkit.org/show_bug.cgi?id=44648

        * Scripts/webkitpy/layout_tests/layout_package/test_expectations.py:
        * Scripts/webkitpy/layout_tests/layout_package/test_expectations_unittest.py:

2010-08-26  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Martin Robinson.

        [GTK] Add HTTP caching support
        https://bugs.webkit.org/show_bug.cgi?id=44261

        Ignore new soup API that we decided to merge into the soup backend
        while it is being cooked. It follows the libsoup style, and will
        be removed from WebKit as soon as it is merged into libsoup.

        * Scripts/webkitpy/style/checker.py:

2010-08-26  Mahesh Kulkarni  <mahesh.kulkarni@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] DumpRenderTree runs only one test from command mode
        https://bugs.webkit.org/show_bug.cgi?id=44012

        Enables support to run multiple test files and single
        folder containing html files in stand alone mode

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):
        (WebCore::DumpRenderTree::processArgsLine):
        (WebCore::DumpRenderTree::loadNextTestInStandAloneMode):
        (WebCore::DumpRenderTree::processLine):
        (WebCore::DumpRenderTree::dump):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        (WebCore::DumpRenderTree::setStandAloneMode):
        (WebCore::DumpRenderTree::isStandAloneMode):
        * DumpRenderTree/qt/main.cpp:
        (main):

2010-08-25  Martin Robinson  <mrobinson@igalia.com>

        Updating webkitpy test expectations.

        * Scripts/webkitpy/tool/steps/steps_unittest.py:

2010-08-25  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Eric Seidel.

        fix the always squash git config
        https://bugs.webkit.org/show_bug.cgi?id=44651

        Fix help text and apparently underscores are not allowed
        in git config keys.

        * Scripts/webkitpy/common/checkout/scm.py:
        * Scripts/webkitpy/tool/steps/commit.py:

2010-08-25  Darin Adler  <darin@apple.com>

        Reviewed by John Sullivan.

        * Scripts/commit-log-editor: Fix perl warning for people who have no
        value for SVN_LOG_EDITOR or CVS_LOG_EDITOR.

2010-08-25  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Eric Seidel.

        stop blocking commits when the bots are red
        https://bugs.webkit.org/show_bug.cgi?id=44644

        This check currently is just annoying. It doesn't actually
        help keep the tree green. We can always add it back later
        if we decide the tree is generally more green.

        * Scripts/webkitpy/tool/commands/download_unittest.py:
        * Scripts/webkitpy/tool/mocktool.py:
        * Scripts/webkitpy/tool/steps/ensurebuildersaregreen.py:

2010-08-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Simon Fraser.

        REGRESSION: media/video-loop.html is timing out on the commit-queue Leopard Bot
        https://bugs.webkit.org/show_bug.cgi?id=38912

        I know of nothing else to do but skip all media tests for the cq.

        * Scripts/webkitpy/tool/steps/runtests.py:

2010-08-25  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Ojan Vafai.

        new-run-webkit-tests: add more unit tests for test_expectations
        This adds unit tests to cover (almost?) all of the non-rebaselining
        functionality.

        https://bugs.webkit.org/show_bug.cgi?id=44579

        * Scripts/webkitpy/layout_tests/layout_package/test_expectations.py:
        * Scripts/webkitpy/layout_tests/layout_package/test_expectations_unittest.py:

2010-08-25  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Ojan Vafai.

        new-run-webkit-tests: add more unit tests

        This change adds more unit tests for the image_diff, test_failures,
        and test_files modules, bringing them to 100% coverage (and adds a
        couple tests to run_webkit_tests while we're at it).

        This test also turns on the "dryrun" port for testing when run on
        the mac, increasing coverage in a few other places.

        https://bugs.webkit.org/show_bug.cgi?id=44578

        * Scripts/webkitpy/layout_tests/data/failures/expected/checksum-expected.checksum: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/checksum-expected.png: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/checksum-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/checksum.html: Copied from WebKitTools/Scripts/webkitpy/layout_tests/data/failures/expected/image_checksum.html.
        * Scripts/webkitpy/layout_tests/data/failures/expected/missing_check-expected.png: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/missing_check-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/missing_check.html: Copied from WebKitTools/Scripts/webkitpy/layout_tests/data/failures/expected/missing_image.html.
        * Scripts/webkitpy/layout_tests/data/failures/expected/timeout.html: Added.
        * Scripts/webkitpy/layout_tests/data/platform/test/test_expectations.txt:
        * Scripts/webkitpy/layout_tests/data/resources/README.txt: Added.
        * Scripts/webkitpy/layout_tests/layout_package/test_failures_unittest.py:
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_unittest.py:

2010-08-25  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Ojan Vafai.

        new-run-webkit-tests: add more unit tests for layout_package/printing.py

        This change adds more unit tests to get the test coverage to 100%
        for the printing module. This code is actually pretty crufty and
        has some layering violations that need to be cleaned up but I'll
        save that for another CL after we get all the unit tests written and
        we fix the multithreading issues. At least now we'll be able to tell
        if we break things.

        https://bugs.webkit.org/show_bug.cgi?id=44576

        * Scripts/webkitpy/layout_tests/layout_package/printing.py:
        * Scripts/webkitpy/layout_tests/layout_package/printing_unittest.py:

2010-08-25  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Adam Barth.

        new-run-webkit-tests should respect set-webkit-configuration
        https://bugs.webkit.org/show_bug.cgi?id=44633

        Moves the getting of the configuration into the base Port so that
        chromium ports use it as well. In the downstream chromium port,
        this should still just return Release.

        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/layout_tests/port/webkit.py:

2010-08-25  Tony Chang  <tony@chromium.org>

        Not reviewed, changing svn props for a script.

        * Scripts/deduplicate-tests: Added properties svn:executable and svn:eol-style.

2010-08-25  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Remove WebKit2 from core builders
        https://bugs.webkit.org/show_bug.cgi?id=44625

        This builder was added to the core builders by accident.  It doesn't
        appear to be green enough to be a core builder yet.

        * Scripts/webkitpy/common/net/buildbot.py:
        * Scripts/webkitpy/common/net/buildbot_unittest.py:

2010-08-19  Adam Roben  <aroben@apple.com>

        Test that NP_Initialize and NP_GetEntryPoints are called in the
        correct order

        The order differs between Mac and Windows (see r38858).

        Fixes <http://webkit.org/b/44270> <rdar://problem/8330393> Crash in
        NP_Initialize when loading QuickTime when running
        plugins/embed-attributes-setting.html in WebKit2 on Windows

        Reviewed by John Sullivan.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp: Added a CRASH macro and
        a boolean to record whether NP_GetEntryPoints has been called.
        (NP_Initialize): Crash on Windows if NP_GetEntryPoints hasn't been
        called yet. This matches Flash and QuickTime's behavior.
        (NP_GetEntryPoints): Crash on Mac if NP_Initialize hasn't been called
        yet. This matches Silverlight's behavior.

2010-08-25  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Gustavo Noronha Silva.

        Cairo and EFL port shouldn't depend on glib.
        https://bugs.webkit.org/show_bug.cgi?id=44354

        Replace occurrences of GRefPtr and adoptGRef with PlatformRefPtr and
        adoptPlatformRef.

        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::isSelected):

2010-08-25  Ojan Vafai  <ojan@chromium.org>

        Fix order of Timothy's email address. The script, and
        other tools all assume that the first email is the bugzilla address.

        * Scripts/webkitpy/common/config/committers.py:

2010-08-24  Kent Tamura  <tkent@chromium.org>

        Reviewed by Pavel Feldman.

        [DRT/Chromium] Fix 26 inspector test crashes
        https://bugs.webkit.org/show_bug.cgi?id=44580

        - DRTDevToolsAgent has a reference to the main WebView. So we
          should not clear it in closeDevTools() and should clear it in
          ~TestShell().
        - DRTDevToolsClient has a reference to a DevTools WebView and no
          way to update it. So we should delete DRTDevToolsClient instances
          in closeDevTools().

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::~TestShell):
        (TestShell::closeDevTools):

2010-08-24  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        unicode(Exception(\u"0x1234")) is busted in python 2.5, disable tests which hit this
        https://bugs.webkit.org/show_bug.cgi?id=44584

        * Scripts/webkitpy/tool/commands/queues_unittest.py:

2010-08-24  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue and EWS bots should report all failures
        https://bugs.webkit.org/show_bug.cgi?id=41820

        Right now commit-queue/EWS only report failures when the
        patch under testing fails.  We should report all failures
        to the status server so that we can diagnose when the bots
        are wedged w/o needing to log into the machines.

        I also reduced the amount of data we upload since we've seen
        timeouts during status upload.

        * Scripts/webkitpy/common/system/executive.py:
        * Scripts/webkitpy/tool/commands/earlywarningsystem.py:
        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:

2010-08-24  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Remove HTML5 parser testing infrastructure now that we don't need it
        https://bugs.webkit.org/show_bug.cgi?id=44581

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        (initializeGlobalsFromCommandLineOptions):
        * Scripts/old-run-webkit-tests:
        * Scripts/test-html5-parser: Removed.

2010-08-24  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Fix 28 inspector test crashes
        https://bugs.webkit.org/show_bug.cgi?id=44574

        Reset DevToolsClient and DevToolsAgent before closing a DevTools
        WebView in order to avoid accessing to a deleted WebView instance.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::closeDevTools):

2010-08-24  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Ojan Vafai.

        new-run-webkit-tests: clean up code for test_types, test_failures

        Add a bunch of unit tests for webkitpy.layout_tests.test_types and
        webkitpy.layout_tests.layout_package.test_failures, and remove
        some dead code and otherwise clean up things.

        https://bugs.webkit.org/show_bug.cgi?id=44559

        * Scripts/webkitpy/layout_tests/layout_package/test_failures.py:
        * Scripts/webkitpy/layout_tests/layout_package/test_failures_unittest.py: Added.
        * Scripts/webkitpy/layout_tests/rebaseline_chromium_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/test_types/image_diff.py:
        * Scripts/webkitpy/layout_tests/test_types/test_type_base.py:
        * Scripts/webkitpy/layout_tests/test_types/test_type_base_unittest.py: Added.
        * Scripts/webkitpy/layout_tests/test_types/text_diff.py:

2010-08-24  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Eric Seidel.

        new-run-webkit-tests: revise unit testing strategy for test failures
    
        This change revamps the way we store test data for new-run-webkit-tests.
        Previously we had a few copies of test files from the main test tree.
        Now we have a bunch of completely fake test data and use the test
        data to generate different kinds of test failures, getting
        much better coverage.

        https://bugs.webkit.org/show_bug.cgi?id=44556

        * Scripts/webkitpy/layout_tests/data/failures/expected/crash.html: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/image-expected.checksum: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/image-expected.png: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/image-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/image.html: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/image_checksum-expected.checksum: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/image_checksum-expected.png: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/image_checksum-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/image_checksum.html: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/missing_image.html: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/missing_text.html: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/text-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/failures/expected/text.html: Added.
        * Scripts/webkitpy/layout_tests/data/failures/unexpected/text-image-checksum-expected.checksum: Added.
        * Scripts/webkitpy/layout_tests/data/failures/unexpected/text-image-checksum-expected.png: Added.
        * Scripts/webkitpy/layout_tests/data/failures/unexpected/text-image-checksum-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/failures/unexpected/text-image-checksum.html: Added.
        * Scripts/webkitpy/layout_tests/data/image/canvas-bg.html: Removed.
        * Scripts/webkitpy/layout_tests/data/image/canvas-zoom-expected.checksum: Removed.
        * Scripts/webkitpy/layout_tests/data/image/canvas-zoom-expected.png: Removed.
        * Scripts/webkitpy/layout_tests/data/image/canvas-zoom-expected.txt: Removed.
        * Scripts/webkitpy/layout_tests/data/image/canvas-zoom.html: Removed.
        * Scripts/webkitpy/layout_tests/data/misc/crash-expected.txt: Removed.
        * Scripts/webkitpy/layout_tests/data/misc/crash.html: Removed.
        * Scripts/webkitpy/layout_tests/data/misc/missing-expectation.html: Removed.
        * Scripts/webkitpy/layout_tests/data/misc/passing-expected.txt: Removed.
        * Scripts/webkitpy/layout_tests/data/misc/passing.html: Removed.
        * Scripts/webkitpy/layout_tests/data/passes/image-expected.checksum: Added.
        * Scripts/webkitpy/layout_tests/data/passes/image-expected.png: Added.
        * Scripts/webkitpy/layout_tests/data/passes/image-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/passes/image.html: Added.
        * Scripts/webkitpy/layout_tests/data/passes/platform_image-expected.checksum: Added.
        * Scripts/webkitpy/layout_tests/data/passes/platform_image-expected.png: Added.
        * Scripts/webkitpy/layout_tests/data/passes/platform_image-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/passes/platform_image.html: Added.
        * Scripts/webkitpy/layout_tests/data/passes/text-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/passes/text.html: Added.
        * Scripts/webkitpy/layout_tests/data/platform/test/image/canvas-bg-expected.checksum: Removed.
        * Scripts/webkitpy/layout_tests/data/platform/test/image/canvas-bg-expected.png: Removed.
        * Scripts/webkitpy/layout_tests/data/platform/test/image/canvas-bg-expected.txt: Removed.
        * Scripts/webkitpy/layout_tests/data/platform/test/passes/platform_image-expected.checksum: Added.
        * Scripts/webkitpy/layout_tests/data/platform/test/passes/platform_image-expected.png: Added.
        * Scripts/webkitpy/layout_tests/data/platform/test/passes/platform_image-expected.txt: Added.
        * Scripts/webkitpy/layout_tests/data/platform/test/test_expectations.txt:
        * Scripts/webkitpy/layout_tests/data/text/article-element-expected.txt: Removed.
        * Scripts/webkitpy/layout_tests/data/text/article-element.html: Removed.
        * Scripts/webkitpy/layout_tests/layout_package/test_expectations_unittest.py:
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_unittest.py:
        * Scripts/webkitpy/style/checkers/test_expectations_unittest.py:

2010-08-24  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Eric Seidel.

        speed up new-run-webkit-tests unit tests

        Add a --no-record-results flag that turns off generating the JSON
        results file on every test run. Generating the file requires us to
        fetch the old results down from the bots, which can be slow. This
        flag is off by default.
    
        Reduce the sleep time in wait_for_threads_to_finish from 0.1s to 0.01s.
    
        These changes together shorten the test cycle from ~4.5s to ~1.5s
        - a 3x speedup.

        https://bugs.webkit.org/show_bug.cgi?id=44553

        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_unittest.py:

2010-08-24  Tony Chang  <tony@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] fix the platform result fallback order on mac/win
        https://bugs.webkit.org/show_bug.cgi?id=44483

        * Scripts/webkitpy/layout_tests/port/google_chrome.py:

2010-08-24  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Martin Robinson.

        Set a device to the event struct when building with GTK+ 3.x, it's
        mandatory.

        * DumpRenderTree/gtk/EventSender.cpp:
        (keyDownCallback):

2010-08-24  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] GTK3: EventSender and API tests should use gdk_event_new when synthesizing events
        https://bugs.webkit.org/show_bug.cgi?id=44534

        Fix two double-frees introduced in my previous commit.

        * DumpRenderTree/gtk/EventSender.cpp:
        (contextClickCallback): Copy the event before using it again.
        (keyDownCallback): Ditto.

2010-08-24  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] GTK3: EventSender and API tests should use gdk_event_new when synthesizing events
        https://bugs.webkit.org/show_bug.cgi?id=44534

        * DumpRenderTree/gtk/EventSender.cpp:
        (prepareMouseButtonEvent): Use gdk_event_new and reference the reference the GdkWindow
        when setting it on the event. It is dereferenced by gdk_event_free(...).
        (contextClickCallback): Ditto.
        (mouseDownCallback): Ditto.
        (mouseUpCallback): Ditto.
        (mouseMoveToCallback): Ditto.
        (mouseWheelToCallback): Ditto.
        (sendOrQueueEvent): Take a GdkEvent* instead of a GdkEvent.
        (dispatchEvent): Ditto. Also free the event when we are done with it.
        (keyDownCallback): Use gdk_event_new and reference the GdkWindow.

2010-08-24  Andras Becsi  <abecsi@webkit.org>

        [Qt] WebKit2 build fix.

        * Scripts/enumerate-included-framework-headers:
        Remove stray global option form sed.

2010-08-24  Kent Tamura  <tkent@chromium.org>

        Reviewed by Jeremy Orlow.

        [DRT/Chromium] Support for IndexedDB tests
        https://bugs.webkit.org/show_bug.cgi?id=44490

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell): Enable IndexedDB.

2010-08-23  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Gustavo Noronha Silva.

        [GTK] The 64-bit Release bot is showing crashes on tests that use mouse buttons
        https://bugs.webkit.org/show_bug.cgi?id=44465

        Initialize the axes field of mouse button and motion events to null.
        This is the value that should be used for events originating from the
        mouse device.

        * DumpRenderTree/gtk/EventSender.cpp:
        (prepareMouseButtonEvent): Initalize button event axes field to null.
        (mouseMoveToCallback): Initialize motion event axes field to null.

2010-08-23  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r65703.
        http://trac.webkit.org/changeset/65703
        https://bugs.webkit.org/show_bug.cgi?id=44460

        "Causing lots of crashes on Snow Leopard when running the
        layout tests" (Requested by eseidel2 on #webkit).

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NP_Initialize):
        (NP_GetEntryPoints):

2010-08-23  Jon Honeycutt  <jhoneycutt@apple.com>

        Layout tests do not run when using WebKitTestRunner in a Debug build.
        https://bugs.webkit.org/show_bug.cgi?id=44409

        Reviewed by Dan Bernstein.

        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::initializeInjectedBundlePath):
        Use InjectedBundle_debug.dll when building Debug.

2010-08-23  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Martin Robinson.

        [GTK] run-launcher fails if WebKitGTK+ compiled with GTK+-3.0 support
        https://bugs.webkit.org/show_bug.cgi?id=42026

        If a GTK+ 3.x build is present return that as the library to use,
        otherwise fallback to the GTK+ 2.x build.

        * Scripts/webkitdirs.pm:

2010-08-23  Balazs Kelemen  <kb@inf.u-szeged.hu>

        Reviewed by Ariya Hidayat.

        [Qt] Find needed forwarding headers for WebKit2 automatically
        https://bugs.webkit.org/show_bug.cgi?id=44336

        * MiniBrowser/qt/BrowserWindow.cpp: Use normal (not framework style) includes here.
        The new script does not satisfy the needs of this file however using normal includes
        is generally better here.
        * MiniBrowser/qt/MiniBrowser.pro: Added include paths.
        * Scripts/enumerate-included-framework-headers: Enumerates headers included from the 
        given frameworks by files in the current directory (and subdirectories).
        In the future this needs to be rewritten in perl for being able to use on Windows.

2010-08-22  No'am Rosenthal  <noam.rosenthal@nokia.com>

        Reviewed by Ariya Hidayat.

        [Qt] Qt test browser: enable a QGLWidget viewport with a command line argument
        https://bugs.webkit.org/show_bug.cgi?id=43010

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::applyPrefs):
        * QtTestBrowser/main.cpp:
        (LauncherApplication::handleUserOptions):

2010-08-21  Sam Weinig  <sam@webkit.org>

        Reviewed by Dan Bernstein.

        Remove specialized retain/release functions in favor of a single one for WKTypeRefs
        https://bugs.webkit.org/show_bug.cgi?id=44386

        * MiniBrowser/mac/AppDelegate.m:
        (didRecieveMessageFromInjectedBundle):
        (didNavigateWithNavigationData):
        (-[BrowserAppDelegate init]):
        (-[BrowserAppDelegate applicationWillTerminate:]):
        * MiniBrowser/mac/BrowserStatisticsWindowController.m:
        (-[BrowserStatisticsWindowController initWithThreadedWKContextRef:processWKContextRef:]):
        (-[BrowserStatisticsWindowController dealloc]):
        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController initWithPageNamespace:]):
        (-[BrowserWindowController fetch:]):
        (-[BrowserWindowController windowWillClose:]):
        (-[BrowserWindowController applicationTerminating]):
        (closePage):
        (runJavaScriptAlert):
        (runJavaScriptConfirm):
        (runJavaScriptPrompt):
        (-[BrowserWindowController updateProvisionalURLForFrame:]):
        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (didClearWindowObjectForFrame):
        * MiniBrowser/win/BrowserView.cpp:
        (BrowserView::goToURL):
        * WebKitTestRunner/win/PlatformWebViewWin.cpp:
        (WTR::PlatformWebView::~PlatformWebView):

2010-08-20  Benjamin Poulain  <benjamin.poulain@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        WebKit does not build with Python 2.3
        https://bugs.webkit.org/show_bug.cgi?id=44373

        Replaced the function sorted() by a call to sort()
        on the entry list.
        The function sorted() has been added to Python 2.4.
        The function method sort() of List works with older
        versions of Python.

        * Scripts/create-html-entity-table:

2010-08-20  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Pavel Feldman.

        Web Inspector: Inspector tests were disabled for GTK.
        https://bugs.webkit.org/show_bug.cgi?id=43977

        * Scripts/old-run-webkit-tests: Set the WEBKIT_INSPECTOR_PATH to the appropriate
        path before running tests.

2010-08-20  Daniel Bates  <dbates@rim.com>

        Reviewed by Eric Seidel.

        svn-apply doesn't detect empty line with Windows line endings
        after property value
        https://bugs.webkit.org/show_bug.cgi?id=43981

        Part 2 of 2

        Add unit tests that were not landed in the first commit.

        * Scripts/webkitperl/VCSUtils_unittest/parseDiff.pl:
          - Added the following test cases:
            "SVN: binary file (isBinary true) using Windows line endings"
            "SVN: property diff, followed by file change diff using Windows line endings"
            "SVN: two consecutive property diffs using Windows line endings"
            "SVN: binary file with executable bit change usng Windows line endings"
            "SVN: binary file followed by property change on different file using Windows line endings"
            "SVN: binary file followed by file change on different file using Windows line endings"
            "SVN: file change diff with property change, followed by property change diff using Windows line endings"
            "SVN: file change diff with property change, followed by file change diff using Windows line endings"
        * Scripts/webkitperl/VCSUtils_unittest/parseSvnProperty.pl:
          - Added the following test cases:
            "add svn:executable, followed by empty line and start of next diff using Windows line endings"
            "add svn:executable, followed by empty line and start of next property diff using Windows line endings"
            "multi-line '+' change, followed by empty line and start of next diff using Windows line endings"
            "multi-line '+' change, followed by empty line and start of next property diff using Windows line endings"
            "add svn:executable, followed by empty line and start of binary patch using Windows line endings"
            "multi-line '+' change, followed by empty line and start of binary patch using Windows line endings"
            "multi-line '-' change, followed by multi-line '+' change, empty line, and start of binary patch using Windows line endings"
            "single-line '+' with trailing new line using Windows line endings"
            "single-line '+' with trailing new line, followed by empty line and start of binary patch using Windows line endings"
            "single-line '-' change with trailing new line, and single-line '+' change using Windows line endings"
            "multi-line '-' change with trailing new line, and multi-line '+' change using Windows line endings"
        * Scripts/webkitperl/VCSUtils_unittest/parseSvnPropertyValue.pl:
          - Added the following test cases:
            "single-line '-' change followed by empty line with Windows line endings"
            "multi-line '+' change and start of binary patch with Windows line endings"

2010-08-20  Daniel Bates  <dbates@rim.com>

        Reviewed by Eric Seidel.

        svn-apply doesn't detect empty line with Windows line endings
        after property value
        https://bugs.webkit.org/show_bug.cgi?id=43981

        Fixes an issue where an empty line following the property value
        in an SVN property change diff would not be detected if it had
        Windows line endings (i.e. ended in CRLF). Hence it was consumed
        as if it was part of a multi-line property value. 

        * Scripts/VCSUtils.pm:
          - Modified parseSvnPropertyValue() to detect empty line
            with Windows line endings.
          - Added toWindowsLineEndings().
        * Scripts/webkitperl/VCSUtils_unittest/parseDiff.pl:
          - Added the following test cases:
            "SVN: binary file (isBinary true) using Windows line endings"
            "SVN: property diff, followed by file change diff using Windows line endings"
            "SVN: two consecutive property diffs using Windows line endings"
            "SVN: binary file with executable bit change usng Windows line endings"
            "SVN: binary file followed by property change on different file using Windows line endings"
            "SVN: binary file followed by file change on different file using Windows line endings"
            "SVN: file change diff with property change, followed by property change diff using Windows line endings"
            "SVN: file change diff with property change, followed by file change diff using Windows line endings"
        * Scripts/webkitperl/VCSUtils_unittest/parseSvnProperty.pl:
          - Added the following test cases:
            "add svn:executable, followed by empty line and start of next diff using Windows line endings"
            "add svn:executable, followed by empty line and start of next property diff using Windows line endings"
            "multi-line '+' change, followed by empty line and start of next diff using Windows line endings"
            "multi-line '+' change, followed by empty line and start of next property diff using Windows line endings"
            "add svn:executable, followed by empty line and start of binary patch using Windows line endings"
            "multi-line '+' change, followed by empty line and start of binary patch using Windows line endings"
            "multi-line '-' change, followed by multi-line '+' change, empty line, and start of binary patch using Windows line endings"
            "single-line '+' with trailing new line using Windows line endings"
            "single-line '+' with trailing new line, followed by empty line and start of binary patch using Windows line endings"
            "single-line '-' change with trailing new line, and single-line '+' change using Windows line endings"
            "multi-line '-' change with trailing new line, and multi-line '+' change using Windows line endings"
        * Scripts/webkitperl/VCSUtils_unittest/parseSvnPropertyValue.pl:
          - Added the following test cases:
            "single-line '-' change followed by empty line with Windows line endings"
            "multi-line '+' change and start of binary patch with Windows line endings"

2010-08-19  David Kilzer  <ddkilzer@apple.com>

        BUILD FIX: Fix Mac build after Windows WebKit2 changes for Netscape Plug-ins

        * MiniBrowser/mac/BrowserWindowController.m:
        (decidePolicyForNavigationAction): Updated method signature.
        (decidePolicyForNewWindowAction): Updated method signature.

2010-08-19  Adam Roben  <aroben@apple.com>

        Test that NP_Initialize and NP_GetEntryPoints are called in the
        correct order

        The order differs between Mac and Windows (see r38858).

        Fixes <http://webkit.org/b/44270> <rdar://problem/8330393> Crash in
        NP_Initialize when loading QuickTime when running
        plugins/embed-attributes-setting.html in WebKit2 on Windows

        Reviewed by Sam Weinig.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp: Added a CRASH macro and
        a boolean to record whether NP_GetEntryPoints has been called.
        (NP_Initialize): Crash on Windows if NP_GetEntryPoints hasn't been
        called yet. This matches Flash and QuickTime's behavior. Crash on Mac
        if NP_GetEntryPoints has been called already. This matches
        Silverlight's behavior.

2010-08-19  Adam Roben  <aroben@apple.com>

        Make build-webkittestrunner build TestNetscapePlugIn on Windows

        Fixes <http://webkit.org/b/44268> <rdar://problem/8330388>

        Reviewed by Sam Weinig.

        * WebKitTestRunner/WebKitTestRunner.sln: Added TestNetscapePlugIn.
        Threaded it in between ImageDiff and InjectedBundleGenerated.

2010-08-19  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Adam Barth.

        install rietveld's upload script from a versioned url
        https://bugs.webkit.org/show_bug.cgi?id=44291

        autoinstall expects the file at a given URL to never change.
        In order to be able to update the file, we need to be able to
        change the path.

        * Scripts/webkitpy/thirdparty/__init__.py:

2010-08-19  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Adam Barth.

        add --webkit_patch_id to reitveld uploads
        https://bugs.webkit.org/show_bug.cgi?id=44289

        This is the first step in having rietveld store which
        patches have been uploaded and getting rid of the
        in-rietveld flag.

        * Scripts/webkitpy/common/net/rietveld.py:
        * Scripts/webkitpy/tool/mocktool.py:
        * Scripts/webkitpy/tool/steps/postcodereview.py:

2010-08-19  Kenneth Russell  <kbr@google.com>

        Reviewed by David Levin.

        Adjust my status from committer to reviewer
        https://bugs.webkit.org/show_bug.cgi?id=44277

        * Scripts/webkitpy/common/config/committers.py:

2010-08-19  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        Chromium DevTools: remove injected script fetcher from test harness.
        https://bugs.webkit.org/show_bug.cgi?id=44266

        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:

2010-08-19  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        Chromium DevTools: There is no need in resource-based InjectedScript.js source.
        Now that we populate front-end after its onload handler, we don't need
        to install injected script early. Exposing injected script source on the WebCore
        level here.
        https://bugs.webkit.org/show_bug.cgi?id=44029

        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        (DRTDevToolsAgent::runtimePropertyChanged):
        (DRTDevToolsAgent::delayedFrontendLoaded):
        (DRTDevToolsAgent::frontendLoaded):
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:

2010-08-19  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Kenneth Rohde Christiansen.

        [Gtk] Enable view mode media feature layout test
        https://bugs.webkit.org/show_bug.cgi?id=43278

        Add view mode media feature testing infrastructure, and add
        placeholder methods for the other platforms'
        LayoutTestControllers.

        * DumpRenderTree/LayoutTestController.cpp:
        (setViewModeMediaFeatureCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setViewModeMediaFeature):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setViewModeMediaFeature):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setViewModeMediaFeature):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setViewModeMediaFeature):

2010-08-18  Mark Rowe  <mrowe@apple.com>

        Reviewed by Sam Weinig.

        Make it so the WebKit2 test slave runs the WebKit2 tests

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:

2010-08-18  Sam Weinig  <sam@webkit.org>

        Reviewed by Mark Rowe.

        Make run-webkit-tests --webkit-test-runner build DumpRenderTree
        in addition to WebKitTestRunner to get the DumpRenderTreeSupport
        module and the TestNetscapePlugin.

        * Scripts/old-run-webkit-tests:

2010-08-18  Adam Roben  <aroben@apple.com>

        Fix hang when saving crash logs on Windows

        * Scripts/old-run-webkit-tests:
        (setUpWindowsCrashLogSaving):
        (END):
        Pass -s to regtool so it will write the Auto value as a string instead
        of as a number. This was causing a "do you want to debug?" dialog to
        appear.

2010-08-17  Victor Wang  <victorw@chromium.org>

        Unreviewed. Fixed chromium incremental test json upload.
        Quote builder name and test results server in url.

        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:

2010-08-17  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Ariya Hidayat.

        [Qt] [Symbian] Consistently use Q_OS_SYMBIAN to guard all Symbian platform dependencies
        https://bugs.webkit.org/show_bug.cgi?id=44124

        Q_WS_S60 is not defined for Symbian^4 devices as Q_WS_S60 used to guard 
        Avkon UI framework dependencies. Use Q_OS_SYMBIAN everywhere to mark
        Symbian dependencies.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::open):
        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::init):
        (LauncherWindow::toggleFullScreenMode):
        (LauncherWindow::showFPS):
        (LauncherWindow::updateFPS):
        * QtTestBrowser/launcherwindow.h:
        (WindowOptions::WindowOptions):
        * QtTestBrowser/mainwindow.cpp:
        (MainWindow::buildUI):

2010-08-17  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by David Levin.

        new-run-webkit-tests: remove --show-sources option

        --show-sources is pretty much obsolete with --trace everything, so
        I'm removing it.

        Also rename a couple of methods in the TestTextDiff class to make their
        intended visibility (private) more obvious.

        https://bugs.webkit.org/show_bug.cgi?id=44143

        * Scripts/webkitpy/layout_tests/layout_package/printing.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/test_types/image_diff.py:
        * Scripts/webkitpy/layout_tests/test_types/test_type_base.py:
        * Scripts/webkitpy/layout_tests/test_types/text_diff.py:

2010-08-17  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by David Levin.

        remove --fuzzy-image-diff in new-run-webkit-tests (it doesn't work)

        This code bit-rotted at some point more than a year ago, and nobody seems
        to miss it. old-run-webkit-tests has a --tolerance flag that new-run-webkit-tests
        should support instead, making this flag unnecessary anyway.

        https://bugs.webkit.org/show_bug.cgi?id=44141

        * Scripts/webkitpy/layout_tests/layout_package/test_failures.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/test_types/fuzzy_image_diff.py: Removed.

2010-08-17  Victor Wang  <victorw@chromium.org>

        Reviewed by Ojan Vafai.

        Update json results generator to have incremental json including
        results for tests that pass in current run but failed before.

        https://bugs.webkit.org/show_bug.cgi?id=44119

        * Scripts/webkitpy/layout_tests/layout_package/json_layout_results_generator.py:
        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:

2010-08-17  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Eric Seidel.

        fix test-webkitpy, add easy way to find a checkout root

        test-webkitpy currently doesn't work right if run from someplace other
        than the checkout root, and it spews a bunch of debug logging because
        the deduplicate_tests tests contaminates the test environment.

        This patch cleans up the deduplicate_tests unit tests, and creates
        two new methods in scm.py: find_checkout_root() and default_scm(),
        both of which use a single algorithm for guessing what checkout root
        to use if you aren't explicitly told one from a path.

        https://bugs.webkit.org/show_bug.cgi?id=44001

        * Scripts/deduplicate-tests:
        * Scripts/webkitpy/common/checkout/scm.py:
        * Scripts/webkitpy/common/checkout/scm_unittest.py:
        * Scripts/webkitpy/layout_tests/deduplicate_tests.py:
        * Scripts/webkitpy/layout_tests/deduplicate_tests_unittest.py:
        * Scripts/webkitpy/layout_tests/port/test.py:
        * Scripts/webkitpy/layout_tests/rebaseline_chromium_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/rebaseline_chromium_webkit_tests_unittest.py:
        * Scripts/webkitpy/tool/main.py:

2010-08-17  Victor Wang  <victorw@chromium.org>

        Reviewed by Ojan Vafai.

        Add support to the test results server for downloading json that
        contains test list only.

        This is for json results generator to generate incremental json
        results so that it includes results not only for tests failed in
        current run, but also tests failed before.

        Also set the results type to "N" (no data) instead of "P" (pass)
        if test results cannot be found in incremental json file.

        https://bugs.webkit.org/show_bug.cgi?id=44117

        * TestResultServer/handlers/testfilehandler.py:
        * TestResultServer/model/jsonresults.py:
        * TestResultServer/model/jsonresults_unittest.py:

2010-08-17  Adam Roben  <aroben@apple.com>

        Use the right path style

        * Scripts/old-run-webkit-tests:

2010-08-17  Adam Roben  <aroben@apple.com>

        Fix typo

        * Scripts/old-run-webkit-tests:

2010-08-17  Adam Roben  <aroben@apple.com>

        Don't hang when running run-webkit-tests as a non-Administrator on
        Vista/7

        * Scripts/old-run-webkit-tests:
        (setUpWindowsCrashLogSaving): Use regtool to set NTSD as the
        post-mortem debugger, rather than using NTSD itself. The latter waits
        for user input when it fails to set the registry values; the former
        does not.

2010-08-17  Adam Roben  <aroben@apple.com>

        Teach run-webkit-tests, DumpRenderTree, and WebKitTestRunner how to
        save crash logs on Windows

        The crash logs are saved to /tmp/layout-test-results and have names
        like CrashLog_02bc_2010-08-17_14-36-20-108.txt.

        Unfortunately, crashes in the WebKit2 web process are recorded as
        time-outs by run-webkit-tests. Fixing this is covered by
        <http://webkit.org/b/44121>.

        Fixes <http://webkit.org/b/37859> <rdar://problem/7883560>
        DumpRenderTree should save a stack trace and/or dump file when it
        crashes

        Reviewed by Sam Weinig.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (exceptionFilter):
        (main):
        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::exceptionFilter):
        (WTR::TestController::platformInitialize):
        These changes set up an exception filter that prints #CRASHED to
        stderr, then lets the exception propagate normally. This allows
        run-webkit-tests to detect when we've crashed even when a post-mortem
        debugger attaches to the process.

        * Scripts/old-run-webkit-tests:
        (top level): Declared some variables used by the crash-log-saving
        code.
        (openDumpTool): Copy _NT_SYMBOL_PATH into the clean environment so
        that the post-mortem debugger has access to it.
        (toCygwinPath): Added. This is the opposite of toWindowsPath.
        (readFromDumpToolWithTimer): If the dump tool prints #CRASHED to
        stderr, consider it a crash.
        (setUpWindowsCrashLogSaving): Added. Saves the current post-mortem
        debugger, then sets ntsd as the post-mortem debugger. ntsd is
        configured to save a crash log and then quit automatically.
        (END): Added. Restores the previous post-mortem debugger when the
        script exits.

2010-08-17  Victor Wang  <victorw@chromium.org>

        Reviewed by ojan@chromium.org.

        Update test results server:
        1. Normalize test results and times after merging (prune tests where
           all runs pass or do not have data, truncate all test items to max
           number of builds)
        2. times should be int not string.
        3. when inserting a new test item, should keep old data regardless
           whether or not they have same item type with new one.

        https://bugs.webkit.org/show_bug.cgi?id=43861

        * TestResultServer/model/jsonresults.py:
        * TestResultServer/model/jsonresults_unittest.py:

2010-08-16  Sam Weinig  <sam@webkit.org>

        Reviewed by Mark Rowe.

        Add WebKit2 Mac tester to buildbot.

        * BuildSlaveSupport/build.webkit.org-config/config.json:
        * BuildSlaveSupport/build.webkit.org-config/master.cfg:

2010-08-16  Paul Sawaya  <psawaya@apple.com>

        Reviewed by Chris Marrin.

        Added shader validation via ANGLE
        https://bugs.webkit.org/show_bug.cgi?id=42405

        Added ANGLE to webkit build

        * Scripts/build-webkit:

2010-08-16  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix, do not build WebCore as a convenience library as this leads to
        errors in the Win build w/export symbols and causes problems with DOM bindings
        debugging in gdb.

        * DumpRenderTree/wscript:
        * Scripts/build-webkit:
        * wx/browser/wscript:
        * wx/build/settings.py:
        * wx/build/waf_extensions.py:

2010-08-16  Dan Bernstein  <mitz@apple.com>

        Build fix.

        * WebKitTestRunner/TestController.cpp:
        (WTR::createOtherPage): Initialize the contentsSizeChanged member.
        (WTR::TestController::initialize): Ditto.

2010-08-16  Balazs Kelemen  <kb@inf.u-szeged.hu>

        Reviewed by Kenneth Rohde Christiansen.

        Handle content size change in WebKit2
        Re-landing after fix.

        https://bugs.webkit.org/show_bug.cgi?id=43198

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController awakeFromNib]): Initialize WKPageUICallback::contetsSizeChanged to 0.
        * MiniBrowser/win/BrowserView.cpp:
        (BrowserView::create): Initialize WKPageUICallback::contetsSizeChanged to 0.

2010-08-16  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r65419.
        http://trac.webkit.org/changeset/65419
        https://bugs.webkit.org/show_bug.cgi?id=44053

        Broke the Windows build (Requested by bbandix on #webkit).

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController awakeFromNib]):
        * MiniBrowser/win/BrowserView.cpp:
        (BrowserView::create):

2010-08-16  Balazs Kelemen  <kb@inf.u-szeged.hu>

        Reviewed by Kenneth Rohde Christiansen.

        Handle content size change in WebKit2

        https://bugs.webkit.org/show_bug.cgi?id=43198

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController awakeFromNib]): Initialize WKPageUICallback::contetsSizeChanged to 0.
        * MiniBrowser/win/BrowserView.cpp:
        (BrowserView::create): Initialize WKPageUICallback::contetsSizeChanged to 0.

2010-08-16  Ariya Hidayat  <ariya@sencha.com>

        Add my new email address to committers.py.

        * Scripts/webkitpy/common/config/committers.py:

2010-08-16  Zoltan Horvath  <zoltan@webkit.org>

        Add my old e-mail addresses to committers.py.

        * Scripts/webkitpy/common/config/committers.py:

2010-08-15  Jon Honeycutt  <jhoneycutt@apple.com>

        WebEditorClient::didBeginEditing is never called in WebKit2
        https://bugs.webkit.org/show_bug.cgi?id=42939

        Reviewed by Sam Weinig.

        * WebKitTestRunner/PlatformWebView.h:
        Declare focus().

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::resetStateToConsistentValues):
        Focus the PlatformWebView.

        * WebKitTestRunner/mac/PlatformWebViewMac.mm:
        (WTR::PlatformWebView::focus):
        Stubbed.

        * WebKitTestRunner/win/PlatformWebViewWin.cpp:
        (WTR::PlatformWebView::focus):
        Focus the view.

2010-08-15  Jon Honeycutt  <jhoneycutt@apple.com>

        run-webkit-tests should not strip editing callbacks when using
        WebKitTestRunner on Windows
        https://bugs.webkit.org/show_bug.cgi?id=44000

        Reviewed by Mark Rowe.

        * Scripts/old-run-webkit-tests:
        Leave $stripEditingCallbacks undefined until we look for command-line
        arguments. If using WebKit2, set it to 0 if not explicity set on the
        command line. Later, set it to isCygwin() to match old behavior if it is
        not yet defined.

2010-08-15  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix, remove define always set to the correct value by wtf/Platform.h.

        * wx/build/settings.py:

2010-08-14  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [GTK] autogen.sh not executed if build-webkit options change
        https://bugs.webkit.org/show_bug.cgi?id=42266

        Rerun autogen.sh in situations where the arguments to build-webkit have
        changed since the previous build. This will fix some issues on the bots
        where the build does not notice changes to default build-webkit arguments.

        * Scripts/webkitdirs.pm: Add special logic for detecting changes to build-webkit arguments.

2010-08-14  Eric Seidel  <eric@webkit.org>

        Unreviewed.  Another fix to support python 2.3.

        Add support for MathML entities
        https://bugs.webkit.org/show_bug.cgi?id=43949

        * Scripts/webkitpy/thirdparty/simplejson/decoder.py:
         - It looks like our simplejson is version 1.7.3 which
           should be python 2.3 compatible.  But someone modified
           our copy slightly from the original source.
           I've removed the relative import in hopes this fixes
           the problem.

2010-08-13  Eric Seidel  <eric@webkit.org>

        Unreviewed.  Build fix only.

        Add support for MathML entities
        https://bugs.webkit.org/show_bug.cgi?id=43949

        * Scripts/create-html-entity-table:
         - Hack sys.path to avoid executing 2.5 dependent python
           on systems (like chromium-win and Tiger) which do not have 2.5 python.

2010-08-13  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Rename some concepts in HTML entity search to be more self-documenting
        https://bugs.webkit.org/show_bug.cgi?id=44004

        Reflect name change in generator script.

        * Scripts/create-html-entity-table:

2010-08-12  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Add support for MathML entities
        https://bugs.webkit.org/show_bug.cgi?id=43949

        A script for generating the C++ state data structure describing all the
        entities from a JSON description.

        * Scripts/create-html-entity-table: Added.

2010-08-13  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Eric Seidel.

        Rewrite new-run-webkit-test's wait_for_threads_to_finish loop to
        check for exceptions on all threads, not just the first thread.
        
        This change also changes the logging behavior for wedged threads
        to only dump the stacks of threads that are actually wedged.

        Refactor the thread classes in the dump_render_tree_thread module
        to make the contract between TestRunner and TestShellThread clearer.

        Added a bunch of unit tests.
        https://bugs.webkit.org/show_bug.cgi?id=38561

        * Scripts/webkitpy/layout_tests/layout_package/dump_render_tree_thread.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests_unittest.py:

2010-08-13  Kenichi Ishibashi  <bashi@google.com>

        Reviewed by Shinichiro Hamaji.

        Add test_expectations.txt syntax checker to check-webkit-style.
        https://bugs.webkit.org/show_bug.cgi?id=43899

        Just utilizing layout_tests/layout_package/test_expectations.py for checking
        the syntax of test_expectations.txt.
        This change also moves tab checking class from style/checkers/text.py to
        style/checkers/common.py for sharing code.

        * Scripts/webkitpy/layout_tests/layout_package/test_expectations.py:
        * Scripts/webkitpy/style/checker.py:
        * Scripts/webkitpy/style/checkers/common.py:
        * Scripts/webkitpy/style/checkers/common_unittest.py:
        * Scripts/webkitpy/style/checkers/test_expectations.py: Added.
        * Scripts/webkitpy/style/checkers/test_expectations_unittest.py: Added.
        * Scripts/webkitpy/style/checkers/text.py:
        * Scripts/webkitpy/style_references.py:

2010-08-12  Jon Honeycutt  <jhoneycutt@apple.com>

        WebKitTestRunner does not correctly resize WebView for W3C SVG tests
        https://bugs.webkit.org/show_bug.cgi?id=43945

        Reviewed by Sam Weinig.

        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::sizeWebViewForCurrentTest):
        Allow for a Windows-style path.

        * WebKitTestRunner/win/PlatformWebViewWin.cpp:
        (WTR::PlatformWebView::resizeTo):
        Call SetWindowPos to resize the view window.

2010-08-12  David Levin  <levin@chromium.org>

        Build break fix.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::resetStateToConsistentValues): Removed usage
        of a variable that doesn't exist in the class.

2010-08-12  Jon Honeycutt  <jhoneycutt@apple.com>

        WebKitTestRunner needs to run tests without using native controls
        https://bugs.webkit.org/show_bug.cgi?id=43772

        Reviewed by Sam Weinig.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):
        Call platformInitializeContext().

        * WebKitTestRunner/TestController.h:
        Declare platformInitializeContext().

        * WebKitTestRunner/mac/TestControllerMac.mm:
        (WTR::TestController::platformInitializeContext):
        Stubbed.

        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::platformInitializeContext):
        Call WKContextSetShouldPaintNativeControls() to disable native control
        drawing.

2010-08-12  Sam Weinig  <sam@webkit.org>

        Reviewed by Alexey Proskuryakov.

        WebKitTestRunner should be more aggressive about ensuring consistent state between tests
        https://bugs.webkit.org/show_bug.cgi?id=43653

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::InjectedBundle):
        (WTR::InjectedBundle::didReceiveMessage):
        (WTR::InjectedBundle::beginTesting):
        (WTR::InjectedBundle::done):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (WTR::InjectedBundle::isTestRunning):
        (WTR::InjectedBundle::):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::stopLoading):
        (WTR::InjectedBundlePage::didStartProvisionalLoadForFrame):
        (WTR::InjectedBundlePage::dump):
        (WTR::InjectedBundlePage::didFinishLoadForFrame):
        (WTR::InjectedBundlePage::didFailLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::didReceiveTitleForFrame):
        (WTR::InjectedBundlePage::didClearWindowForFrame):
        (WTR::InjectedBundlePage::didFinishDocumentLoadForFrame):
        (WTR::InjectedBundlePage::willAddMessageToConsole):
        (WTR::InjectedBundlePage::willSetStatusbarText):
        (WTR::InjectedBundlePage::willRunJavaScriptAlert):
        (WTR::InjectedBundlePage::willRunJavaScriptConfirm):
        (WTR::InjectedBundlePage::shouldBeginEditing):
        (WTR::InjectedBundlePage::shouldEndEditing):
        (WTR::InjectedBundlePage::shouldInsertNode):
        (WTR::InjectedBundlePage::shouldInsertText):
        (WTR::InjectedBundlePage::shouldDeleteRange):
        (WTR::InjectedBundlePage::shouldChangeSelectedRange):
        (WTR::InjectedBundlePage::shouldApplyStyle):
        (WTR::InjectedBundlePage::didBeginEditing):
        (WTR::InjectedBundlePage::didEndEditing):
        (WTR::InjectedBundlePage::didChange):
        (WTR::InjectedBundlePage::didChangeSelection):
        Don't do any work if we are not currently running a test.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:
        * WebKitTestRunner/StringFunctions.h:
        (WTR::toCF):
        Add conversion function for WKURLRef -> CFURLRef

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::TestController):
        (WTR::TestController::initialize):
        (WTR::TestController::resetStateToConsistentValues):
        (WTR::TestController::runTest):
        (WTR::TestController::didFinishLoadForFrame):
        * WebKitTestRunner/TestController.h:
        (WTR::TestController::):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::invoke):
        * WebKitTestRunner/TestInvocation.h:
        Move resetting code to TestController.

        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:
        * WebKitTestRunner/mac/TestControllerMac.mm:
        (WTR::TestController::runUntil):
        * WebKitTestRunner/mac/TestInvocationMac.mm: Removed.
        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::runUntil):
        * WebKitTestRunner/win/TestInvocationWin.cpp: Removed.
        * WebKitTestRunner/win/WebKitTestRunner.vcproj:
        Move runUntil to TestController.

2010-08-12  Lucas De Marchi  <lucas.demarchi@profusion.mobi>

        Unreviewed.

        Adding myself to the committers list.

        * Scripts/webkitpy/common/config/committers.py:

2010-08-12  Hayato Ito  <hayato@chromium.org>

        Reviewed by Tony Chang.

        Merge pretty printers for gdb.
        https://bugs.webkit.org/show_bug.cgi?id=43850

        We need to update webcore.py because basic string classes have moved to WTF from WebCore.
        It is good timing to merge webcore.py and wtf.py and name it 'webkit.py'.
        webcore.py is left for backward compatibility.

        * gdb/webcore.py:
        * gdb/webkit.py: Added.
        * gdb/wtf.py: Removed.

2010-08-11  Tony Chang  <tony@chromium.org>

        Reviewed by David Levin.

        [chromium] add google-chrome layout test result directories
        https://bugs.webkit.org/show_bug.cgi?id=43889

        * Scripts/webkitpy/layout_tests/port/chromium_win.py:
        * Scripts/webkitpy/layout_tests/port/factory.py:
        * Scripts/webkitpy/layout_tests/port/google_chrome.py: Added.
        * Scripts/webkitpy/layout_tests/test_types/image_diff.py:

2010-08-11  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Disable accelerated compositing
        https://bugs.webkit.org/show_bug.cgi?id=43894

        Disable accelerated compositing because DRT is not ready for
        it. This change fixes hundreds of test crashes on Windows and
        Linux.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::resetWebSettings):

2010-08-11  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Unreviewed. Adding my Collabora personality to the list.

        * Scripts/webkitpy/common/config/committers.py:

2010-08-11  Martin Robinson  <mrobinson@igalia.com>

        Adding myself as a reviewer.

        * Scripts/webkitpy/common/config/committers.py:

2010-08-11  Daniel Bates  <dbates@rim.com>

        Reviewed by Darin Adler.

        Perl warnings when running commit-log-editor
        https://bugs.webkit.org/show_bug.cgi?id=43856

        Fixes Perl warnings introduced by the patch for Bug #40548.

        Perl doesn't have symbolic names for True/False. Instead, we
        should use boolean values. Moreover, the variable installedEditorApplication
        is not be used and should be renamed builtEditorApplication so that it
        uses the existing machinery to set the commit log editor application.

        * Scripts/commit-log-editor:

2010-08-11  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Trying waiting for httpd lock in the EWS
        https://bugs.webkit.org/show_bug.cgi?id=43833

        If this works, we can probably run the tests on the mac-ews, which
        would be very exciting.  :)

        * Scripts/webkitpy/tool/steps/runtests.py:

2010-08-11  Marcus Bulach  <bulach@chromium.org>

        Reviewed by Eric Seidel.

        Check in a script to list redundant test outputs.
        https://bugs.webkit.org/show_bug.cgi?id=37630

        If e.g. platform/mac-leopard is missing an expected test output, we
        fall back on platform/mac.  This means it's possible to grow redundant
        test outputs, where we have the same expected data in both a platform
        directory and another platform it falls back on.
        (original patch by Evan Marting <evan@chromium.org> https://bugs.webkit.org/attachment.cgi?id=53398)

        * Scripts/deduplicate-tests: Added.
        * Scripts/webkitpy/layout_tests/deduplicate_tests.py: Added.
        * Scripts/webkitpy/layout_tests/deduplicate_tests_unittest.py: Added.

2010-08-11  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Ariya Hidayat.

        [Qt] QtTestBrowser: after switching between QWebView and QGraphicsWebView, rotation actions get broken
        https://bugs.webkit.org/show_bug.cgi?id=43853

        LauncherWindow::createChrome is connecting menu itens to WebViewGraphicsBased's slots directly.
        It behaviors badly when user launches the QtTestBrowser in QWebView mode, since then switching to
        QGraphicsWebView mode, createChrome is not called again, and menu items end up not getting connected
        to slots at all.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::createChrome):
        (LauncherWindow::animatedFlip):
        (LauncherWindow::animatedYFlip):
        * QtTestBrowser/launcherwindow.h:

2010-08-11  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Simon Hausmann.

        [Qt] QtTestBrowser: switching between QWebView and QGraphicsWebView modes is broken
        https://bugs.webkit.org/show_bug.cgi?id=43851

        All window options data (including the bool holding if the view is either QWebView or
        QGraphicsWebView based) is stored in m_windowOptions, a class member of LauncherWindow.
        When toggle the view from QWebView to QGraphicsWebView based (and vice-versa), we were
        not updating LauncherWindow::WindowOptions::m_useGraphicsView bit, and then things were
        getting broken.

        Patch addresses this issue.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::createChrome):
        (LauncherWindow::toggleWebView):
        (LauncherWindow::toggleAcceleratedCompositing):

2010-08-10  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Ariya Hidayat.

        [Qt] QtTestBrowser: lazy instantiate "YRotation" state machine and related objects
        https://bugs.webkit.org/show_bug.cgi?id=43831

        Only instantiate QStateMachine and friends associated to the YRotation action on demand.

        * QtTestBrowser/webview.cpp:
        (WebViewGraphicsBased::WebViewGraphicsBased):
        (WebViewGraphicsBased::animatedYFlip):

2010-08-11  Darin Adler  <darin@apple.com>

        Reviewed by John Sullivan.

        Improved editor options for prepare-ChangeLog and commit-log-editor
        https://bugs.webkit.org/show_bug.cgi?id=40548

        * Scripts/commit-log-editor: Split editor strings on spaces so EDITOR
        values like "xed --launch --wait" work properly.

        * Scripts/prepare-ChangeLog: Added a new CHANGE_LOG_EDITOR so we can
        use a command line tool with the $openChangeLogs feature.

2010-08-11  Yury Semikhatsky  <yurys@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: remove InjectDispatch.js
        https://bugs.webkit.org/show_bug.cgi?id=43835

        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:

2010-08-10  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Eric Seidel.

        webkit-patch should refuse to run under Win32 Python
        https://bugs.webkit.org/show_bug.cgi?id=40962

        Given that there are lots of places in webkit-patch's code that
        assume unix-style filenames (forward slashes), webkit-patch fails
        with weird file-not-found errors when run under a native windows
        Python. It would be nice if we just trapped this and errored out
        at the beginning, rather than producing unpredictable errors.

        * Scripts/webkit-patch:

2010-08-10  Kent Tamura  <tkent@chromium.org>

        Unreviewed, build fix.
        
        Chromium build fix for r65107.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::suspendAnimations):
        (LayoutTestController::resumeAnimations):

2010-08-10  Sergio Villar Senin  <svillar@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] http/tests/media/video-cookie.html fails
        https://bugs.webkit.org/show_bug.cgi?id=42240

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setAlwaysAcceptCookies): create the
        SoupCookieJar if it does not exist. Otherwise the accept policy
        won't be set.

2010-08-10  Chris Marrin  <cmarrin@apple.com>

        Reviewed by Oliver Hunt.

        Add suspendAnimations/resumeAnimation API to DRT
        https://bugs.webkit.org/show_bug.cgi?id=43733
        
        Adds suspendAnimations() and resumeAnimations() to LayoutTestController.
        Calls functions with the same names on AnimationController for the 
        mainFrame.

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        * DumpRenderTree/LayoutTestController.cpp:
        (suspendAnimationsCallback):
        (resumeAnimationsCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::suspendAnimations):
        (LayoutTestController::resumeAnimations):
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::suspendAnimations):
        (LayoutTestController::resumeAnimations):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::suspendAnimations):
        (LayoutTestController::resumeAnimations):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::suspendAnimations):
        (LayoutTestController::resumeAnimations):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::suspendAnimations):
        (LayoutTestController::resumeAnimations):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::suspendAnimations):
        (LayoutTestController::resumeAnimations):

2010-08-10  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Ojan Vafai.

        [Chromium/DRT] Enable saving layout test results.
        https://bugs.webkit.org/show_bug.cgi?id=43796

        * BuildSlaveSupport/build.webkit.org-config/master.cfg: Added more
            parameters to the new-run-webkit-tests, including the name
            of the test results server.

2010-08-10  Jian Li  <jianli@chromium.org>

        More chromium build fix.

        * DumpRenderTree/chromium/MockSpellCheck.cpp:
        (MockSpellCheck::spellCheckWord):
        (MockSpellCheck::initializeIfNeeded):
        * DumpRenderTree/chromium/NotificationPresenter.cpp:
        (NotificationPresenter::grantPermission):
        (NotificationPresenter::show):
        (NotificationPresenter::checkPermission):

2010-08-10  Jian Li  <jianli@chromium.org>

        Chromium build fix.

        * DumpRenderTree/chromium/MockSpellCheck.cpp:
        * DumpRenderTree/chromium/NotificationPresenter.cpp:

2010-08-10  Victor Wang  <victorw@chromium.org>

        Reviewed by Ojan Vafai.

        Update test results server merge logic so the aggregated
        results and times are updated for tests that are
        in aggragated json but not in incremental json.

        Also update unittest to test this case.

        https://bugs.webkit.org/show_bug.cgi?id=43769

        * TestResultServer/model/jsonresults.py:
        * TestResultServer/model/jsonresults_unittest.py:

2010-08-09  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Ariya Hidayat.

        [Qt] QtTestBrowser: proper set scene rect

        When resizesToContents is ON scene's rect is set to the boundary of
        the mainFrame. However, navigating to other web page should keep resizing
        scene's rect according to the new document loaded. Patch addresses this issue.

        Now resizesToContents and scrolling properly work on QtTestBrowser.

        * QtTestBrowser/webview.cpp:
        (WebViewGraphicsBased::setPage):
        (WebViewGraphicsBased::contentsSizeChanged):
        (WebViewGraphicsBased::setResizesToContents):
        (WebViewGraphicsBased::resizeEvent):
        * QtTestBrowser/webview.h:

2010-08-09  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Ariya Hidayat.

        [Qt] QtTestBrowser: Clean up LauncherWindow code.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::LauncherWindow): Moves applyPrefs methods call from the constructor to init().
        (LauncherWindow::init): Fixed comments.
        (LauncherWindow::applyPrefs): Move the method around.
        (LauncherWindow::createChrome): Move more code of this method around, for grouping, and fixing up comments.

2010-08-09  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Ariya Hidayat.

        [Qt] QtTestBrowser: make reset-zooming to animate when tiled backing store is on.

        It gets control+0 the same visual effect as control++ or control-.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::toggleZoomTextOnly):

2010-08-09  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Ariya Hidayat.

        [Qt] QtTestBrowser:: make m_zoomLevels a static member.

        Not all instances of LauncherWindow need its own m_zoomLevel.

        * QtTestBrowser/launcherwindow.cpp:
        * QtTestBrowser/launcherwindow.h:

2010-08-09  Sam Weinig  <sam@webkit.org>

        Reviewed by Geoffrey Garen.

        Add zoom support for injected bundle
        https://bugs.webkit.org/show_bug.cgi?id=43759

        Use zoom factor SPI to implement zoom related eventSender functions.

        * WebKitTestRunner/InjectedBundle/Bindings/EventSendingController.idl:
        * WebKitTestRunner/InjectedBundle/EventSendingController.cpp:
        (WTR::EventSendingController::textZoomIn):
        (WTR::EventSendingController::textZoomOut):
        (WTR::EventSendingController::zoomPageIn):
        (WTR::EventSendingController::zoomPageOut):
        * WebKitTestRunner/InjectedBundle/EventSendingController.h:
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::reset): Reset zoom mode and level for each test.

2010-08-09  Gavin Barraclough  <barraclough@apple.com>

        Speculative chromium build fix III.

        * DumpRenderTree/chromium/MockSpellCheck.h:
        * DumpRenderTree/chromium/NotificationPresenter.h:
        * DumpRenderTree/chromium/WebViewHost.h:
        (WebViewHost::addClearHeader):
        (WebViewHost::clearHeaders):

2010-08-09  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Tony Chang.

        increase the number of test results that we save
        https://bugs.webkit.org/show_bug.cgi?id=43763

        Now that we do incremental uploads, we can increase the number of
        results that we save for http://test-results.appspot.com/dashboards/flakiness_dashboard.html.

        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:

2010-08-09  Evan Martin  <evan@chromium.org>

        Reviewed by Tony Chang.

        [chromium] DRT error print statement incorrectly tries to print a FILE*
        https://bugs.webkit.org/show_bug.cgi?id=43747

        * DumpRenderTree/chromium/ImageDiff.cpp:
        (writeFile): pass the correct pointer.

2010-08-09  Victor Wang  <victorw@chromium.org>

        Reviewed by Ojan Vafai.

        Upload incremental test results json to server by default.

        https://bugs.webkit.org/show_bug.cgi?id=43743

        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:

2010-08-09  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        EWS bots wait 2 minutes between patches
        https://bugs.webkit.org/show_bug.cgi?id=43731

        * Scripts/webkitpy/tool/bot/queueengine.py:
         - Don't sleep after failures.  This was a hold-over from
           an earlier design.
        * Scripts/webkitpy/tool/commands/earlywarningsystem.py:
         - EWS bots were not properly reporting true/false from process_work_item.
           They were always returning None, thus false, thus always logging
           as a failure and sleeping 2 minutes after each patch.

2010-08-09  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Stub out EventSender for WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=43703

        * WebKitTestRunner/DerivedSources.make:
        * WebKitTestRunner/InjectedBundle/Bindings/CodeGeneratorTestRunner.pm:
        Add ability to pass javascript arguments to the wrapped object.

        * WebKitTestRunner/InjectedBundle/Bindings/EventSendingController.idl: Added.
        * WebKitTestRunner/InjectedBundle/EventSendingController.cpp: Added.
        (WTR::EventSendingController::create):
        (WTR::EventSendingController::EventSendingController):
        (WTR::EventSendingController::~EventSendingController):
        (WTR::EventSendingController::wrapperClass):
        (WTR::setExceptionForString):
        (WTR::EventSendingController::mouseDown):
        (WTR::EventSendingController::mouseUp):
        (WTR::EventSendingController::mouseMoveTo):
        (WTR::EventSendingController::keyDown):
        (WTR::EventSendingController::contextClick):
        (WTR::EventSendingController::leapForward):
        (WTR::EventSendingController::textZoomIn):
        (WTR::EventSendingController::textZoomOut):
        (WTR::EventSendingController::zoomPageIn):
        (WTR::EventSendingController::zoomPageOut):
        (WTR::EventSendingController::makeWindowObject):
        * WebKitTestRunner/InjectedBundle/EventSendingController.h: Added.
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::reset):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (WTR::InjectedBundle::eventSendingController):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::didClearWindowForFrame):
        Add stubbed out EventSenderController.

        * WebKitTestRunner/InjectedBundle/GCController.h:
        Remove incorrect comment.

        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:
        * WebKitTestRunner/win/InjectedBundle.vcproj:
        Add new files.

2010-08-08  Kent Tamura  <tkent@chromium.org>

        Unreviewed, trivial fix.

        Fix "WindowsError: [Error 32] The process cannot access the file
        because it is being used by another process" introduced by r64959.

        * BuildSlaveSupport/test-result-archive:

2010-08-08  Kent Tamura  <tkent@chromium.org>

        Reviewed by Tony Chang.

        Chromium buildbot: Avoid "zip" command dependency
        https://bugs.webkit.org/show_bug.cgi?id=43470

        * BuildSlaveSupport/test-result-archive:
         For Chromium port, creates a zip archive with zipfile package of Python
         instead of external "zip" command. We'd like to avoid additional
         command installation.

2010-08-08  Jon Honeycutt  <jhoneycutt@apple.com>

        WebKitTestRunner should add the QuickTime dir to the PATH environment
        variable
        https://bugs.webkit.org/show_bug.cgi?id=43686

        Reviewed by Dan Bernstein.

        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::addQTDirToPATH):
        Copied from DRT.
        (WTR::TestController::platformInitialize):
        Call addQTDirToPath().
        * WebKitTestRunner/win/WebKitTestRunner.vcproj:
        Link to shlwapi.lib for SHGetValue.

2010-08-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Maciej Stachowiak.

        WebKitTestRunner needs layoutTestController.dumpTitleChanges
        <rdar://problem/8213861>
        https://bugs.webkit.org/show_bug.cgi?id=42683

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::didReceiveTitleForFrame):
        (WTR::InjectedBundlePage::didFinishDocumentLoadForFrame):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::LayoutTestController):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (WTR::LayoutTestController::dumpTitleChanges):
        (WTR::LayoutTestController::shouldDumpTitleChanges):

2010-08-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        WebKitTestRunner needs to print onunload handler information
        <rdar://problem/8213831>
        https://bugs.webkit.org/show_bug.cgi?id=42703

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::operator<<):
        (WTR::InjectedBundlePage::didFinishDocumentLoadForFrame):

2010-08-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Add additional loader client functions need to complete WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=43684

        Remove unnecessary and jarring underscores as well.

        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (didClearWindowObjectForFrame):
        (didCreatePage):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::InjectedBundlePage):
        (WTR::InjectedBundlePage::didStartProvisionalLoadForFrame):
        (WTR::InjectedBundlePage::didReceiveServerRedirectForProvisionalLoadForFrame):
        (WTR::InjectedBundlePage::didFailProvisionalLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::didCommitLoadForFrame):
        (WTR::InjectedBundlePage::didFinishLoadForFrame):
        (WTR::InjectedBundlePage::didFailLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::didReceiveTitleForFrame):
        (WTR::InjectedBundlePage::didClearWindowForFrame):
        (WTR::InjectedBundlePage::didCancelClientRedirectForFrame):
        (WTR::InjectedBundlePage::willPerformClientRedirectForFrame):
        (WTR::InjectedBundlePage::didChangeLocationWithinPageForFrame):
        (WTR::InjectedBundlePage::didFinishDocumentLoadForFrame):
        (WTR::InjectedBundlePage::didHandleOnloadEventsForFrame):
        (WTR::InjectedBundlePage::didDisplayInsecureContentForFrame):
        (WTR::InjectedBundlePage::didRunInsecureContentForFrame):
        (WTR::InjectedBundlePage::willAddMessageToConsole):
        (WTR::InjectedBundlePage::willSetStatusbarText):
        (WTR::InjectedBundlePage::willRunJavaScriptAlert):
        (WTR::InjectedBundlePage::willRunJavaScriptConfirm):
        (WTR::InjectedBundlePage::willRunJavaScriptPrompt):
        (WTR::InjectedBundlePage::shouldBeginEditing):
        (WTR::InjectedBundlePage::shouldEndEditing):
        (WTR::InjectedBundlePage::shouldInsertNode):
        (WTR::InjectedBundlePage::shouldInsertText):
        (WTR::InjectedBundlePage::shouldDeleteRange):
        (WTR::InjectedBundlePage::shouldChangeSelectedRange):
        (WTR::InjectedBundlePage::shouldApplyStyle):
        (WTR::InjectedBundlePage::didBeginEditing):
        (WTR::InjectedBundlePage::didEndEditing):
        (WTR::InjectedBundlePage::didChange):
        (WTR::InjectedBundlePage::didChangeSelection):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:

2010-08-07  Dan Bernstein  <mitz@apple.com>

        Build fix.

        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj: Made the references
        to JSGCController.{cpp,h} relative to the build root.

2010-08-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        WebKitTestRunner needs GCController
        <rdar://problem/8213834>
        https://bugs.webkit.org/show_bug.cgi?id=42701

        * WebKitTestRunner/DerivedSources.make:
        * WebKitTestRunner/InjectedBundle/Bindings/GCController.idl: Added.
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrapper.h:
        (WTR::setProperty):
        * WebKitTestRunner/InjectedBundle/GCController.cpp: Added.
        (WTR::GCController::create):
        (WTR::GCController::GCController):
        (WTR::GCController::~GCController):
        (WTR::GCController::wrapperClass):
        (WTR::GCController::collect):
        (WTR::GCController::collectOnAlternateThread):
        (WTR::GCController::getJSObjectCount):
        (WTR::GCController::makeWindowObject):
        * WebKitTestRunner/InjectedBundle/GCController.h: Added.
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::reset):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (WTR::InjectedBundle::bundle):
        (WTR::InjectedBundle::gcController):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::didClearWindowForFrame):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::keepWebHistory):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:
        * WebKitTestRunner/win/InjectedBundle.vcproj:

2010-08-05  Jon Honeycutt  <jhoneycutt@apple.com>

        WebKitTestRunner needs to be able to set the font smoothing type
        https://bugs.webkit.org/show_bug.cgi?id=43406

        Reviewed by Adam Roben.

        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::resetPreferencesToConsistentValues):
        Set the font smoothing level to
        kWKFontSmoothingLevelNoSubpixelAntiAliasing to match DRT.

2010-08-06  Jon Honeycutt  <jhoneycutt@apple.com>

        Fix a missed variable rename.

        Unreviewed.

        * Scripts/old-run-webkit-tests:

2010-08-06  Jon Honeycutt  <jhoneycutt@apple.com>

        mac-wk2/Skipped should be used on Windows when running regression tests
        https://bugs.webkit.org/show_bug.cgi?id=43494

        Reviewed by Adam Roben.

        * Scripts/old-run-webkit-tests:
        If the platform is win-wk2, also read the mac-wk2 skipped list.

2010-08-06  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Should revoke scheduled tasks
        https://bugs.webkit.org/show_bug.cgi?id=43560

        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        (DRTDevToolsAgent::reset): Calls RevokeAll().
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:
        * DumpRenderTree/chromium/DRTDevToolsClient.cpp:
        (DRTDevToolsClient::reset): Calls RevokeAll().
        * DumpRenderTree/chromium/DRTDevToolsClient.h:
        * DumpRenderTree/chromium/EventSender.cpp:
        (EventSender::reset): Calls RevokeAll().
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::reset): Calls RevokeAll().
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::resetTestController): Calls DRTDevToolsAgent::reset() and DRTDevToolsClient::reset().

2010-08-06  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Antonio Gomes.

        [Qt] Fix the DRT build on Mac OS X

        * DumpRenderTree/qt/DumpRenderTree.pro:

2010-08-06  Jochen Eisinger  <jochen@chromium.org>

        Reviewed by Pavel Feldman.

        Rietvield's upload.py moved to a different location.
        https://bugs.webkit.org/show_bug.cgi?id=43613

        * Scripts/webkitpy/thirdparty/__init__.py:

2010-05-23  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        QueueStatusServer needs better queue-status pages
        https://bugs.webkit.org/show_bug.cgi?id=39562

        The primary goal of this patch is to display queue
        positions somewhere on the site so that it's easier
        for commit-queue users to know when their pach will
        be landed.  I also tried to improve the root page
        to be more useful than the previous wall of status text.

        * QueueStatusServer/handlers/recentstatus.py:
        * QueueStatusServer/main.py:
        * QueueStatusServer/model/queues.py:
        * QueueStatusServer/templates/recentstatus.html:

2010-08-05  Victor Wang  <victorw@chromium.org>

        Reviewed by Ojan Vafai.

        Add option to generate/upload incremental json results to test result server.
        Also refactor the json results generator unittest code to test
        incremental and aggregated json results.

        https://bugs.webkit.org/show_bug.cgi?id=43519

        * Scripts/webkitpy/layout_tests/layout_package/json_layout_results_generator.py:
        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:
        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator_unittest.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:

2010-08-05  Jian Li  <jianli@chromium.org>

        Reviewed by David Levin.

        Unify blob related feature defines to ENABLE(BLOB).
        https://bugs.webkit.org/show_bug.cgi?id=43081

        * Scripts/build-webkit:

2010-08-05  Satish Sampath  <satish@chromium.org>

        Reviewed by Jeremy Orlow.

        Add speech input controller mock in WebKit and a layout test.
        https://bugs.webkit.org/show_bug.cgi?id=43477

        Added LayoutTestController::setMockSpeechInputResultCallback method.

        * DumpRenderTree/LayoutTestController.cpp:
        (setMockSpeechInputResultCallback): Wrapper invoking the member function.
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::setMockSpeechInputResult): Sets the mock result.
        (LayoutTestController::speechInputController): Creates the mock controller.
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::speechInputController): Creates the mock controller.
        * DumpRenderTree/chromium/WebViewHost.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setMockSpeechInputResult): dummy method.
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setMockSpeechInputResult): dummy method.
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setMockSpeechInputResult): dummy method.
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp: dummy method.
        (LayoutTestController::setMockSpeechInputResult):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp: dummy method.
        (LayoutTestController::setMockSpeechInputResult):

2010-08-04  Adam Roben  <aroben@apple.com>

        Fix the path to TestNetscapePlugin's directory on Windows

        Fixes <http://webkit.org/b/43513> WebKitTestRunner on Windows fails to
        load TestNetscapePlugin

        Reviewed by Jon Honeycutt.

        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::initializeTestPluginDirectory):
        TestNetscapePlugin is in a TestNetscapePlugin[_Debug] directory that's
        next to WebKitTestRunner.exe. Previously we were passing the directory
        that contains WebKitTestRunner.exe. Also fixed some leaks.

2010-08-05  Kenichi Ishibashi  <bashi@google.com>

        Reviewed by Shinichiro Hamaji.

        check-webkit-style returns non-zero when patch is entirely minus lines.
        https://bugs.webkit.org/show_bug.cgi?id=38169

        * Scripts/check-webkit-style:
        Check whether a patch contains modified files that are entirely minus lines.
        * Scripts/webkitpy/style/filereader.py:
        Add a variable that holds number of files that contain only deleted lines.
        * Scripts/webkitpy/style/patchreader.py:
        Count up modified files that contain only deleted lines.

2010-08-05  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        DevTools: get rid of delayed command dispatching on front-end side.

        https://bugs.webkit.org/show_bug.cgi?id=43479

        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        (DRTDevToolsAgent::detach):
        (DRTDevToolsAgent::frontendLoaded):
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:
        * DumpRenderTree/chromium/DRTDevToolsClient.cpp:
        (DRTDevToolsClient::~DRTDevToolsClient):
        (DRTDevToolsClient::sendFrontendLoaded):
        * DumpRenderTree/chromium/DRTDevToolsClient.h:

2010-08-04  Kenichi Ishibashi  <bashi@google.com>

        Reviewed by Shinichiro Hamaji.

        Fixes check-webkit-style false positive on "new uint32_t."
        https://bugs.webkit.org/show_bug.cgi?id=43077

        * Scripts/webkitpy/style/checkers/cpp.py:
        * Scripts/webkitpy/style/checkers/cpp_unittest.py:

2010-08-04  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Remove base/linked_ptr.h dependency
        https://bugs.webkit.org/show_bug.cgi?id=43472

        Replace linked_ptr<TestNavigationEntry> with RefPtr<TestNavigationEntry>.
        We need to use RefPtr<> because m_pendingEntry points an object in
        m_entries or not in m_entries.

        * DumpRenderTree/chromium/TestNavigationController.cpp:
        (TestNavigationEntry::create): Added.
        (TestNavigationController::activeEntry):
        (TestNavigationController::didNavigateToEntry):
        (TestNavigationController::discardPendingEntry):
        (TestNavigationController::insertEntry):
        (TestNavigationController::navigateToPendingEntry):
        * DumpRenderTree/chromium/TestNavigationController.h:
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::loadURLForFrame):
         Use TestNavigationEntry::create().
        (WebViewHost::updateURL):
         Use RefPtr<>.
        (WebViewHost::updateSessionHistory):
         Remove unnecessary static_cast<>.

2010-08-04  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        Fix a problem that "archived test results" step doesn't work on Chromium buildbots
        https://bugs.webkit.org/show_bug.cgi?id=43333

        * BuildSlaveSupport/test-result-archive:
          - Make layoutTestResultsDir local and pass it to archiveTestResults()
          - Adjust layoutTestResultsDir for Chromium

2010-08-04  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        NRWT: websocket_server startup detection failure
        https://bugs.webkit.org/show_bug.cgi?id=43466

        * Scripts/webkitpy/layout_tests/port/websocket_server.py:
         Increase timeout value: 5 second -> 10 second

2010-08-04  Victor Wang  <victorw@chromium.org>

        Reviewed by Ojan Vafai.

        -. Add result.json incremental merging functionality to test results app engine.
        -. blobstore is not suitable for AE data merging and there is no API to
           programatically edit existing blob or write a new one yet, so replace blobstore
           with datastore. If file is oversize (>1000*1000 bytes), store file data in
           multiple datastore entries.
        -. Fix styles.

        Test: jsonresults_unittest to test merging logics.

        https://bugs.webkit.org/show_bug.cgi?id=38599

        * TestResultServer/handlers/dashboardhandler.py:
        * TestResultServer/handlers/menu.py:
        * TestResultServer/handlers/testfilehandler.py:
        * TestResultServer/main.py:
        * TestResultServer/model/dashboardfile.py:
        * TestResultServer/model/datastorefile.py: Added.
        * TestResultServer/model/jsonresults.py: Added.
        * TestResultServer/model/jsonresults_unittest.py: Added.
        * TestResultServer/model/testfile.py:
        * TestResultServer/templates/uploadform.html:

2010-08-04  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Kenneth Christiansen.

        [Qt] [QtTestBrowser] Remove unneeded QAction class members
        https://bugs.webkit.org/show_bug.cgi?id=43518

        LauncherWindow class has two totally unneeded class members: m_flopAnimated and
        m_flipYAnimated. Also, in initializeView method there are some dead code block
        trying to connect them at the wrong time, when they have not been instanciated.

        This patch:

        - removes the two cited class members in favor of local variables in createChrome method;
        - removes the dead code block.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::LauncherWindow):
        (LauncherWindow::initializeView):
        (LauncherWindow::createChrome):
        * QtTestBrowser/launcherwindow.h:

2010-08-04  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Simon Hausmann and Kenneth Christiansen.

        [Qt] [QtTestBrowser] Clean up static and global menu state controls
        https://bugs.webkit.org/show_bug.cgi?id=43448

        After LauncherWindow class was refactored out of from main.cpp, all global variables that
        were hanging in main.cpp became temporarily public static class members of newly added
        LauncherWindow class. This design was not properly handling the initial purpose of the
        global variables: newly created launcher windows should inherit the settings of the originating
        one.

        In order to properly fix the problem, this patch introduces a WindowOptions class, as a POD. It
        comprises all data needed to handling the goal described above.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::LauncherWindow): The class now receives an optional WindowOptions pointer object
                                          holding all user settings configured in the menus and command line.
                                          It also receices an optional QGraphicsScene points in case we are doing
                                          a "Clone Window".
        (LauncherWindow::init): Removed the usesGraphics parameter because the class member m_userData holds its
                                value.
        (LauncherWindow::initializeView): Ditto.
        (LauncherWindow::createChrome): Changed all references to gXXX to m_userData.XXX
        (LauncherWindow::applyPrefs): Removed the "LauncherWindow* source" parameter. All data needed to properly
                                      apply the preferences is provided by m_userData.
        (LauncherWindow::toggleAcceleratedCompositing): Change gXXX by m_userData.XXX
        (LauncherWindow::toggleResizesToContents): Ditto.
        (LauncherWindow::toggleWebGL): Ditto.
        (LauncherWindow::toggleFrameFlattening): Ditto.
        (LauncherWindow::toggleQGLWidgetViewport): Ditto.
        (LauncherWindow::changeViewportUpdateMode): Ditto.
        (LauncherWindow::showFPS): Ditto.
        (LauncherWindow::newWindow): Changed to pass the userData.
        (LauncherWindow::cloneWindow): Ditto.
        * QtTestBrowser/launcherwindow.h:
        (WindowOptions::WindowOptions):
        * QtTestBrowser/main.cpp:
        (requiresGraphicsView):
        (LauncherApplication::handleUserOptions):
        (main):

2010-08-04  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix for gcc not importing all symbols from convenience libraries.
        Works on 10.6 only for Mac until the build system is reworked. 

        * wx/build/settings.py:

2010-08-04  Markus Goetz  <Markus.Goetz@nokia.com>

        Reviewed by Simon Hausmann.

        [Qt] Change wording in QtTestBrowser
        https://bugs.webkit.org/show_bug.cgi?id=43241

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::createChrome):

2010-08-04  Aaron Boodman  <aa@chromium.org>

        Reviewed by Eric Seidel.

        prepare-ChangeLog fails mysteriously if curl doesn't support ssl
        https://bugs.webkit.org/show_bug.cgi?id=43460

        * Scripts/prepare-ChangeLog:

2010-08-03  MORITA Hajime  <morrita@google.com>

        Reviewed by Tony Chang.

        [DRT] Assertion failed when drag and move a draggable element.
        https://bugs.webkit.org/show_bug.cgi?id=41695

        mouseMoveToX() did call [WebHTMLView mouseDragged] even if dragging started.
        But Cocoa doesn't call mouseDragged() until dragging is done.
        Other part of DumpRenderTree also assumes Cocoa behavior and an assertion
        on UIDelegate failed when mouseDragged() is called during dragging.
        This change eliminated the mouseDragged() call when dragging begins,
        which is implicated by draggingInfo instance.
        
        * DumpRenderTree/mac/EventSendingController.mm:
        (-[EventSendingController mouseMoveToX:Y:]):

        Test: fast/events/dragging-mouse-moves.html
        
2010-08-02  Steve Block  <steveblock@google.com>

        Reviewed by Alexey Proskuryakov.

        Adds Geolocation LayoutTests for the case where permission is not granted or denied immediately
        https://bugs.webkit.org/show_bug.cgi?id=40002

        The code in LayoutTestController::setGeolocationPermission() was moved to
        setGeolocationPermissionCommon() to allow each port to provide its own
        implementation of setGeolocationPermission().

        For the Mac port, setGeolocationPermission() notifies the UIDelegate of the
        new permission, so it can call back to WebCore if permission requests are in
        progress and are waiting for a response. A minor fix to the Mac
        MockGeolocationProvider was also required to make sure that the mock provider
        calls back to WebCore when it is first started.

        For other ports, LayoutTestController::setGeolocationPermission() is not
        implemented.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::setGeolocationPermissionCommon):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setGeolocationPermission):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setGeolocationPermission):
        * DumpRenderTree/mac/MockGeolocationProvider.mm:
        (-[MockGeolocationProvider registerWebView:]):
        * DumpRenderTree/mac/UIDelegate.h:
        * DumpRenderTree/mac/UIDelegate.mm:
        (-[UIDelegate webView:decidePolicyForGeolocationRequestFromOrigin:frame:listener:]):
        (-[UIDelegate setGeolocationPermission:]):
        (-[UIDelegate dealloc]):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setGeolocationPermission):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setGeolocationPermission):

2010-08-03  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Implement --testshell-startup-dialog
        https://bugs.webkit.org/show_bug.cgi?id=40616

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (main): Check --testshell-startup-dialog, and call openStartUpDialog()
        if it is specfied.
        * DumpRenderTree/chromium/TestShell.h:
          Declare openStartUpDialog().
        * DumpRenderTree/chromium/TestShellGtk.cpp:
        (openStartupDialog):
        * DumpRenderTree/chromium/TestShellMac.mm:
        (openStartupDialog):
        * DumpRenderTree/chromium/TestShellWin.cpp:
        (openStartupDialog):

2010-08-03  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Remove dependency of base/md5.h
        https://bugs.webkit.org/show_bug.cgi?id=43403

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dumpImage): Use wtf/MD5.h

2010-08-03  Joseph Pecoraro  <joepeck@webkit.org>

        Reviewed by David Kilzer.

        Limit ApplicationCache Total and Per-Origin Storage Capacity (Quotas)
        https://bugs.webkit.org/show_bug.cgi?id=40627

        Part 6 - LayoutTest and Cleanup

          Allow tests to delete application caches and set application cache
          origin quotas, so they can be tested.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (dumpApplicationCacheDelegateCallbacksCallback): JavaScript callback, delegates to the controller.
        (clearAllApplicationCachesCallback): should delete all application caches.
        (setApplicationCacheOriginQuotaCallback): should set the origin quota for the localhost tests.
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::dumpApplicationCacheDelegateCallbacks): accessor to see if application cache callbacks should be output.
        (LayoutTestController::setDumpApplicationCacheDelegateCallbacks): enable or disable debug output when the application cache quota is reached.

          Mac implementation.

        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::clearAllApplicationCaches): delete application caches.
        (LayoutTestController::setApplicationCacheOriginQuota): set the quota for localhost.
        * DumpRenderTree/mac/UIDelegate.mm:
        (-[UIDelegate webView:frame:exceededDatabaseQuotaForSecurityOrigin:database:]): style fix.
        (-[UIDelegate webView:exceededApplicationCacheOriginQuotaForSecurityOrigin:]): reset the quota.

          Stub implementations for other platforms.

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::clearAllApplicationCaches):
        (LayoutTestController::setApplicationCacheOriginQuota):
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::clearAllApplicationCaches):
        (LayoutTestController::setApplicationCacheOriginQuota):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::clearAllApplicationCaches):
        (LayoutTestController::setApplicationCacheOriginQuota):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::clearAllApplicationCaches):
        (LayoutTestController::setApplicationCacheOriginQuota):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::clearAllApplicationCaches):
        (LayoutTestController::setApplicationCacheOriginQuota):

2010-08-03  Joseph Pecoraro  <joepeck@webkit.org>

        Reviewed by David Kilzer.

        Limit ApplicationCache Total and Per-Origin Storage Capacity (Quotas)
        https://bugs.webkit.org/show_bug.cgi?id=40627

        Part 5 - Refactor Quota Management in WebSecurityOrigin into Managers

          Change old style calls to make use of the managers.

        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setDatabaseQuota):
        * DumpRenderTree/mac/UIDelegate.mm:
        (-[UIDelegate webView:frame:exceededDatabaseQuotaForSecurityOrigin:database:]):

2010-08-03  Mark Rowe  <mrowe@apple.com>

        Add a new Leopard build slave to run the release tests.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2010-08-03  Jon Honeycutt  <jhoneycutt@apple.com>

        WebKitTestRunner needs to activate the Mac font ascent hack
        https://bugs.webkit.org/show_bug.cgi?id=43404

        Reviewed by Darin Adler.

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::initialize):
        Call WKBundleActivateMacFontAscentHack().

2010-08-03  Alex Milowski  <alex@milowski.com>

        Reviewed by Beth Dakin.

        Changed the default for MathML support so that is is enabled by default.

        * Scripts/build-webkit:

2010-08-03  Sam Weinig  <sam@webkit.org>

        Roll r64566 back in this time with all the overloads in place..

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::shouldInsertNode):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        * WebKitTestRunner/StringFunctions.h:
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::resetPreferencesToConsistentValues):
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2010-08-03  Sam Weinig  <sam@webkit.org>

        Rollout r64566. It broke all the WebKit2 tests.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::operator<<):
        (WTR::InjectedBundlePage::shouldInsertNode):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        * WebKitTestRunner/StringFunctions.h: Removed.
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::createWKURL):
        (WTR::WKStringToUTF8):
        (WTR::TestInvocation::resetPreferencesToConsistentValues):
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2010-08-03  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        WTR: Move all the utility functions for working with strings to a shared header.
        https://bugs.webkit.org/show_bug.cgi?id=43386

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::shouldInsertNode):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        * WebKitTestRunner/StringFunctions.h: Added.
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::resetPreferencesToConsistentValues):
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2010-08-02  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Kenneth Christiansen.

        [Qt] QtTestBrowser not setting preferredContentsSize for resizesToContents
        https://bugs.webkit.org/show_bug.cgi?id=43168

        QGraphicsWebView resizesToContents property has to work together with QWebPage's
        setPreferredContentsSize as stated by the docs. Patch addresses that for QtTestBrowser.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::applyPrefs):
        * QtTestBrowser/webview.cpp:
        (WebViewGraphicsBased::setResizesToContents): Properly handle scene, webview and viewport sizes
                                                      needed when toggle resizesToContents on/off.
        (WebViewGraphicsBased::resizeEvent):
        * QtTestBrowser/webview.h:
        (WebViewGraphicsBased::setCustomLayoutSize): Setter helper.
        (WebViewGraphicsBased::customLayoutSize): Getter helper.

2010-08-03  Jochen Eisinger  <jochen@chromium.org>

        Unreviewed. Adding myself as committer.

        * Scripts/webkitpy/common/config/committers.py:

2010-08-02  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        Chromium DevTools: Get rid of DevTools RPC.

        https://bugs.webkit.org/show_bug.cgi?id=43335

        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp:
        (DRTDevToolsAgent::sendMessageToInspectorFrontend):
        (DRTDevToolsAgent::call):
        * DumpRenderTree/chromium/DRTDevToolsAgent.h:
        * DumpRenderTree/chromium/DRTDevToolsCallArgs.h:
        (DRTDevToolsCallArgs::DRTDevToolsCallArgs):
        * DumpRenderTree/chromium/DRTDevToolsClient.cpp:
        (DRTDevToolsClient::sendMessageToBackend):
        (DRTDevToolsClient::call):
        * DumpRenderTree/chromium/DRTDevToolsClient.h:

2010-08-02  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Remove dependencies to some Chromium headers
        https://bugs.webkit.org/show_bug.cgi?id=43396

        * DumpRenderTree/chromium/CppVariant.h:
         Remove base/basictypes.h because webkit_support.h contains it.
        * DumpRenderTree/chromium/EventSender.cpp:
        (getCurrentEventTimeSec): Use new wrapper function.
        * DumpRenderTree/chromium/TestNavigationController.h:
         Remove base/basictypes.h because webkit_support.h contains it.
        * DumpRenderTree/chromium/TestShell.cpp:
        (dumpHistoryItem): Use new wrapper function.
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::cancelledError): Use new wrapper function.
        (WebViewHost::didFailResourceLoad): Use new wrapper function.

2010-08-02  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] DRT implement execCommand()
        https://bugs.webkit.org/show_bug.cgi?id=35351

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::execCommand): Implement using webkit_web_view_execute_core_command_by_name.
        (LayoutTestController::isCommandEnabled): Implement using webkit_web_view_is_command_enabled.
        (LayoutTestController::setCacheModel): Move below LayoutTestController::isCommandEnabled.

2010-08-02  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Add alias for run-webkit-tests --webkit-test-runner (run-webkit-tests -2).

        * Scripts/old-run-webkit-tests:

2010-08-02  Jon Honeycutt  <jhoneycutt@apple.com>

        WebKitTestRunner needs to support loading custom fonts (via the
        WEBKIT_TESTFONTS environment variable)
        https://bugs.webkit.org/show_bug.cgi?id=42782

        Reviewed by Adam Roben.

        * WebKitTestRunner/InjectedBundle/win/ActivateFonts.cpp:
        (WTR::fontsPath):
        Copied from DRT code. Removed the fallback to DumpRenderTree.resources/,
        as this directory doesn't appear to be created anymore.
        (WTR::activateFonts):
        Loop through the fonts, and call AddFontResourceExW() for each.

2010-08-02  Jon Honeycutt  <jhoneycutt@apple.com>

        Restore the WebKitTestRunner.sln that was removed, and remove the
        correct one.

        Rubber-stamped by Sam Weinig.

        * WebKitTestRunner/WebKitTestRunner.sln: Added.
        * WebKitTestRunner/win/WebKitTestRunner.sln: Removed.

2010-08-02  Jon Honeycutt  <jhoneycutt@apple.com>

        Move InjectedBundle.vcproj to where the other WebKitTestRunner vcprojs live.

        Remove the unused WebKitTestRunner.sln.

        Reviewed by Sam Weinig.

        * WebKitTestRunner/Configurations/InjectedBundleCommon.vsprops:
        * WebKitTestRunner/InjectedBundle/win/InjectedBundle.vcproj: Removed.
        * WebKitTestRunner/WebKitTestRunner.sln: Removed.
        * WebKitTestRunner/win/InjectedBundle.vcproj: Added.
        * WebKitTestRunner/win/WebKitTestRunner.sln:

2010-08-02  Sam Weinig  <sam@webkit.org>

        Fix the windows build.

        * WebKitTestRunner/win/main.cpp:

2010-07-29  Jon Honeycutt  <jhoneycutt@apple.com>

        Add a Skipped list on Windows, and have run-webkit-tests respect it.

        Part of <rdar://problem/8233237> Fill WebKit2 Windows skipped list so
        there are zero tests failing
        https://bugs.webkit.org/show_bug.cgi?id=43374

        Reviewed by Adam Roben.

        * Scripts/old-run-webkit-tests:
        If using WebKitTestRunner and Apple Windows WebKit, set the platform to
        win-wk2. When building the result hierarchy, if the platform is win-wk2,
        add it first to the list of platforms.

2010-08-02  Darin Adler  <darin@apple.com>

        Reviewed by Sam Weinig.

        WebKitTestRunner needs layoutTestController.setCanOpenWindows
        https://bugs.webkit.org/show_bug.cgi?id=42321

        WebKitTestRunner needs layoutTestController.setCloseRemainingWindowsWhenComplete
        https://bugs.webkit.org/show_bug.cgi?id=42779

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl: Added
        setCanOpenWindows, setCloseRemainingWindowsWhenComplete, and windowCount

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::InjectedBundle): Initialize m_mainPage to 0 instead of
        waiting for the first call to didCreatePage.
        (WTR::InjectedBundle::didCreatePage): Set m_mainPage only when the first page
        is created. Put other pages into a map.
        (WTR::InjectedBundle::willDestroyPage): Added code to handle the destruction
        of the main page.
        (WTR::InjectedBundle::closeOtherPages): Added. Closes all the pages other than
        the main page.
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h: Added pageCount and
        closeOtherPages functions.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::didFinishLoadForFrame): Don't let pages other than
        the main page affect dumping.
        (WTR::InjectedBundlePage::didFailLoadWithErrorForFrame): Ditto.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::LayoutTestController): Initialize the new
        m_shouldCloseExtraWindows member.
        (WTR::LayoutTestController::setCanOpenWindows): Added. Empty for now.
        (WTR::LayoutTestController::windowCount): Added.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        Added setCanOpenWindows, setCloseRemainingWindowsWhenComplete,
        windowCount, shouldCloseExtraWindowsAfterRunningTest, and
        m_shouldCloseExtraWindows.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::shared): Return a pointer to the shared copy, but
        don't allocate and leak it. This seemed cleaner than adding an explicit
        finalize call to go along with the explicit initialize call.
        (WTR::TestController::TestController): Added calls to the initialize and
        run function, which are now done automatically.
        (WTR::TestController::~TestController): Added, since it's called now.
        (WTR::closeOtherPage): Added. Used to close pages other than the main page.
        (WTR::createOtherPage): Added. Used to create pages other than the main page.
        (WTR::TestController::initialize): Added code to set up createOtherPage.
        (WTR::TestController::run): Removed unused return value.
        * WebKitTestRunner/TestController.h: Made constructor and destructor public,
        and initialize and run private. Changed m_mainWebView to be an OwnPtr.

        * WebKitTestRunner/mac/PlatformWebViewMac.mm:
        (WTR::PlatformWebView::PlatformWebView): Added a call to setReleasedWhenClosed
        to avoid releasing the window twice. Another way to handle it would be to
        remove the release, but this approach is slightly more robust because it works
        even if some other code calls the close method an extra time.

        * WebKitTestRunner/mac/main.mm:
        (main): Use a stack-allocated TestController object instead of calling
        initalize and run on a globally allocated one.

2010-08-02  Tony Chang  <tony@chromium.org>

        Reviewed by David Levin.

        add myself to the reviewers list
        https://bugs.webkit.org/show_bug.cgi?id=43366

        * Scripts/webkitpy/common/config/committers.py:

2010-08-02  Anders Carlsson  <andersca@apple.com>

        Reviewed by Sam Weinig.

        Cache JSNPObjects and fix bugs in the object map
        https://bugs.webkit.org/show_bug.cgi?id=43368

        Test that we correctly throw exceptions when trying to do things to a JSObject that used to
        wrap an NPObject that came from a plug-in that is now destroyed.

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        * DumpRenderTree/TestNetscapePlugIn/PluginTest.h:
        (PluginTest::Object::getProperty):
        (PluginTest::Object::NP_GetProperty):
        (PluginTest::Object::npClass):
        * DumpRenderTree/TestNetscapePlugIn/Tests/NPRuntimeObjectFromDestroyedPlugin.cpp: Added.
        (NPRuntimeObjectFromDestroyedPlugin::NPRuntimeObjectFromDestroyedPlugin):
        (NPRuntimeObjectFromDestroyedPlugin::ScriptableObject::hasProperty):
        (NPRuntimeObjectFromDestroyedPlugin::ScriptableObject::getProperty):
        (NPRuntimeObjectFromDestroyedPlugin::NPP_GetValue):
        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.vcproj:
        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:
        * GNUmakefile.am:

2010-08-02  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [Gtk] DOM listeners get wrong keycodes for some keys
        https://bugs.webkit.org/show_bug.cgi?id=35170

        Add support to all event senders for simulating keypad insert
        and print screen keys.

        * DumpRenderTree/chromium/EventSender.cpp:
        (EventSender::keyDown): Add support for generating keypad insert and print screen.
        * DumpRenderTree/gtk/EventSender.cpp:
        (keyDownCallback): Ditto.
        * DumpRenderTree/mac/EventSendingController.mm:
        (-[EventSendingController keyDown:withModifiers:withLocation:]): Ditto.
        * DumpRenderTree/qt/EventSenderQt.cpp:
        (EventSender::keyDown): Ditto.
        * DumpRenderTree/win/EventSender.cpp:
        (keyDownCallback): Ditto.

2010-08-02  Martin Robinson  <mrobinson@igalia.com>

        Build fix for building against development versions of GTK+. GTK 2.22
        has not yet been released, so these function definitions must be conditionalized
        on the development version.

        * DumpRenderTree/gtk/EventSender.cpp: Fix GTK+ 2.21 build.

2010-08-02  Tony Chang  <tony@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] use ChromiumDriver on Linux when running webkit tests
        https://bugs.webkit.org/show_bug.cgi?id=43273

        * Scripts/webkitpy/layout_tests/port/chromium.py:

2010-08-02  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Always initialize GTK
        https://bugs.webkit.org/show_bug.cgi?id=43327

        Call gtk_init() in order to fix plugin test crash.

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (main): Pass argc/argv to platformInit().
        * DumpRenderTree/chromium/TestShell.h:
        * DumpRenderTree/chromium/TestShellGtk.cpp:
        (platformInit): Update parameters, call gtk_init().
        * DumpRenderTree/chromium/TestShellMac.mm:
        (platformInit): Update parameters.
        * DumpRenderTree/chromium/TestShellWin.cpp:
        (platformInit): Update parameters.

2010-08-02  Balazs Kelemen  <kb@inf.u-szeged.hu>

        Reviewed by Simon Hausmann.

        [Qt] Generate forwarding headers for WebKit2

        https://bugs.webkit.org/show_bug.cgi?id=43336

        * Scripts/webkitdirs.pm: Call make on WebKit2/Makefile.DerivedSources.

2010-08-02  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by Kent Tamura.

        WebSocket server should start with SO_REUSEADDR
        https://bugs.webkit.org/show_bug.cgi?id=43329

        Pulls in pywebsocket-0.5.2.
        pywebsocket-0.5.2 includes a small fix to start server with SO_REUSE_ADDR.
        http://code.google.com/p/pywebsocket/source/detail?r=273

        * Scripts/webkitpy/thirdparty/__init__.py: Bump pywebsocket version

2010-08-01  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Remove string_util.h dependency
        https://bugs.webkit.org/show_bug.cgi?id=43312

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::pathToLocalResource):
         Use string::find() instead of StartsWithASCII().
        (LayoutTestController::cppVariantToInt32):
         Use strtol() instead of StringToNumber().

2010-08-01  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Add ability to reset frame names for WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=43316

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::reset):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::reset):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:

2010-08-01  Anders Carlsson  <andersca@apple.com>

        Reviewed by Sam Weinig.

        Implement NPN_RemoveProperty
        https://bugs.webkit.org/show_bug.cgi?id=43315

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        Add NPRuntimeRemoveProperty.cpp
        
        * DumpRenderTree/TestNetscapePlugIn/PluginTest.cpp:
        (PluginTest::NPN_GetStringIdentifier):
        (PluginTest::NPN_GetIntIdentifier):
        (PluginTest::NPN_RemoveProperty):
        Add NPN_ helpers.

        * DumpRenderTree/TestNetscapePlugIn/PluginTest.h:
        Support more NPClass functions.

        * DumpRenderTree/TestNetscapePlugIn/Tests/NPRuntimeRemoveProperty.cpp: Added.
        (NPRuntimeRemoveProperty::NPRuntimeRemoveProperty):
        Test for NPN_RemoveProperty.

        (NPRuntimeRemoveProperty::TestObject::hasMethod):        
        (NPRuntimeRemoveProperty::TestObject::invoke):
        Add a testRemoveProperty method.

        (NPRuntimeRemoveProperty::NPP_GetValue):
        Return the test object.

        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.vcproj:
        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:
        * GNUmakefile.am:
        Add NPRuntimeRemoveProperty.cpp

2010-07-30  Anders Carlsson  <andersca@apple.com>

        Reviewed by Sam Weinig.

        Add an NPObject class template helper to TestNetscapePlugin
        https://bugs.webkit.org/show_bug.cgi?id=43288

        * DumpRenderTree/TestNetscapePlugIn/PluginTest.h:
        Add some template magic to be able to figure out if a class has a member function of a given type.

        (PluginTest::Object::create):
        Create an object.

        (PluginTest::Object::invokeDefault):
        Add dummy function, this should never be called.

        (PluginTest::Object::Object):
        Initialize m_pluginTest to 0.

        (PluginTest::Object::~Object):
        Add virtual destructor.

        (PluginTest::Object::NP_Allocate):
        Create a new object.

        (PluginTest::Object::NP_Deallocate):
        Delete the object.

        (PluginTest::Object::NP_InvokeDefault):
        Call invokeDefault.

        (PluginTest::Object::npClass):
        Initialize the NPClass struct.

        * DumpRenderTree/TestNetscapePlugIn/Tests/DocumentOpenInDestroyStream.cpp:
        (DocumentOpenInDestroyStream::NPP_DestroyStream):
        Move this inline.

        * DumpRenderTree/TestNetscapePlugIn/Tests/PluginScriptableNPObjectInvokeDefault.cpp:
        (PluginScriptableNPObjectInvokeDefault::NPObjectWithInvokeDefault::invokeDefault):
        (PluginScriptableNPObjectInvokeDefault::NPP_GetValue):
        Use the PluginTest::Object class template.

2010-07-31  Sam Weinig  <sam@webkit.org>

        Reviewed by Dan Bernstein.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=43305
        Add back WKBundleFrameCopyInnerText to fix ~50 test failures
        due to SVGElements not having the innerText function.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::dumpFrameText):

2010-07-30  Sam Weinig  <sam@webkit.org>

        Reviewed by Maciej Stachowiak.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=43290
        Add structured message passing from the injected bundle to UIProcess

        * MiniBrowser/mac/AppDelegate.m:
        (didRecieveMessageFromInjectedBundle):
        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (didClearWindowForFrame):
        (didRecieveMessage):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::done):
        (WTR::InjectedBundle::didReceiveMessage):
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):
        (WTR::TestController::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/TestController.h:
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle):
        * WebKitTestRunner/TestInvocation.h:
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2010-07-30  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=43275
        Make WKArrayRef more usable.

        Remove now unnecessary const_casts.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::dumpDescendantFrameScrollPositions):
        (WTR::dumpDescendantFramesText):

2010-07-30  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=43274
        Add first pass of structured message passing.

        Update Minibrowser and WebKitTestRunner to work with the new post message
        function.

        * MiniBrowser/mac/AppDelegate.m:
        (didRecieveMessageFromInjectedBundle):
        (-[BrowserAppDelegate init]):
        * MiniBrowser/mac/MiniBrowser_Prefix.pch:
        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (didStartProvisionalLoadForFrame):
        (didReceiveServerRedirectForProvisionalLoadForFrame):
        (didFailProvisionalLoadWithErrorForFrame):
        (didCommitLoadForFrame):
        (didFinishLoadForFrame):
        (didFailLoadWithErrorForFrame):
        (didReceiveTitleForFrame):
        (didClearWindowForFrame):
        (didCreatePage):
        (willDestroyPage):
        (didRecieveMessage):
        (WKBundleInitialize):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::_didReceiveMessage):
        (WTR::InjectedBundle::didReceiveMessage):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::invoke):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2010-07-30  Anders Carlsson  <andersca@apple.com>

        Try to fix the layout test failures.

        * DumpRenderTree/unix/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_get_value):

2010-07-29  Anders Carlsson  <andersca@apple.com>

        Reviewed by Adam Roben.

        Replace plugins/npruntime/bindings-test.html with a more sophisticated test
        https://bugs.webkit.org/show_bug.cgi?id=43232

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        Add PluginScriptableNPObjectInvokeDefault.cpp.

        * DumpRenderTree/TestNetscapePlugIn/PluginObject.cpp:
        Remove invokeDefault callback function.

        * DumpRenderTree/TestNetscapePlugIn/PluginTest.cpp:
        (PluginTest::create):
        Move this to the top of the file.

        (PluginTest::NPP_GetValue):
        Add default implementation.

        (PluginTest::NPN_CreateObject):
        Add NPN_ wrapper.

        * DumpRenderTree/TestNetscapePlugIn/PluginTest.h:
        (PluginTest::identifier):
        Add identifier getter.

        * DumpRenderTree/TestNetscapePlugIn/Tests/DocumentOpenInDestroyStream.cpp:
        (DocumentOpenInDestroyStream::DocumentOpenInDestroyStream):
        Add "using namespace std".

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_GetValue):
        Give PluginTest a chance to return a value.

        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.vcproj:
        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:
        * GNUmakefile.am:
        Add PluginScriptableNPObjectInvokeDefault.cpp.
        
        * DumpRenderTree/unix/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_get_value):
        Give PluginTest a chance to return a value.

2010-07-30  Steve Block  <steveblock@google.com>

        Reviewed by Steve Block.

        Add LayoutTestController methods to test DeviceOrientation
        https://bugs.webkit.org/show_bug.cgi?id=39589

        * DumpRenderTree/LayoutTestController.cpp:
        (setMockDeviceOrientationCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::setMockDeviceOrientation):
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setMockDeviceOrientation):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setMockDeviceOrientation):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setMockDeviceOrientation):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setMockDeviceOrientation):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setMockDeviceOrientation):
        * Scripts/build-webkit:

2010-07-29  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Kenneth Christiansen.

        [Qt] QtTestBrowser: -resizes-to-contents command line parameter is broken
        https://bugs.webkit.org/show_bug.cgi?id=43209

        When -resizes-to-content was being passed as a command line parameter it was simply
        not being set (although the corresponding menu item was marked as ON).
        User had to toggle the menu OFF and then ON again for it to take place.

        Reason: LauncherWindow::applyPrefs method sets many user options passed in from
        the command line, but not resizesToContents. Patch addresses that.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::createChrome):
        (LauncherWindow::applyPrefs):
        (LauncherWindow::toggleResizesToContents):
        * QtTestBrowser/webview.h:
        (WebViewGraphicsBased::resizesToContents):

2010-07-29  Antonio Gomes  <tonikitoo@webkit.org>

        Rubber-stamped by Simon Fraser.

        [Qt] QtTestBrowser: more method grouping and clean ups.

        Moving blocks of code around. Basically grouping related methods close to each.

        * QtTestBrowser/launcherwindow.cpp:
        (LauncherWindow::initializeView):
        (LauncherWindow::createChrome):
        (LauncherWindow::changeViewportUpdateMode):
        (LauncherWindow::showFPS):
        (LauncherWindow::newWindow):
        (LauncherWindow::cloneWindow):
        * QtTestBrowser/launcherwindow.h:

2010-07-30  Mahesh Kulkarni  <mahesh.kulkarni@nokia.com>

        Reviewed by Tor Arne Vestbø.

        [QT][Symbian] QtTestBrowser missing location capabilities
        https://bugs.webkit.org/show_bug.cgi?id=43235

        QtTestBrowser missing capabilities to use QtMobility::QLocation. 

        * QtTestBrowser/QtTestBrowser.pro:

2010-07-29  Anders Carlsson  <andersca@apple.com>

        Add PluginTest.cpp

        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:

2010-07-29  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Eric Seidel.

        Update download URLs for python irclib package; the old URLs 
        pointed at a specific mirror host and not the general sourceforge
        URLs.

        https://bugs.webkit.org/show_bug.cgi?id=43228

        * Scripts/webkitpy/thirdparty/__init__.py:

2010-07-29  Anders Carlsson  <andersca@apple.com>

        Fix typo.

        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:

2010-07-29  Anders Carlsson  <andersca@apple.com>

        Another attempt at fixing the Qt and GTK+ build.

        * DumpRenderTree/unix/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_new_instance):
        (webkit_test_plugin_destroy_stream):

2010-07-29  Anders Carlsson  <andersca@apple.com>

        Another build fix attempt.

        * DumpRenderTree/TestNetscapePlugIn/PluginTest.cpp:
        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:
        * DumpRenderTree/unix/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_new_instance):
        * GNUmakefile.am:

2010-07-29  Anders Carlsson  <andersca@apple.com>

        Try to fix Windows and Unix builds.

        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.vcproj:
        * DumpRenderTree/unix/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_new_instance):
        (webkit_test_plugin_destroy_stream):

2010-07-29  Anders Carlsson  <andersca@apple.com>

        Reviewed by Sam Weinig.

        Refactor TestNetscapePlugin so tests can be split in separate files
        https://bugs.webkit.org/show_bug.cgi?id=43220

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        Add PluginTest.cpp, PluginTest.h and Tests/DocumentOpenInDestroyStream.cpp.

        * DumpRenderTree/TestNetscapePlugIn/PluginObject.cpp:
        (pluginAllocate):
        Initialize pluginTest to 0. Remove testDocumentOpenInDestroyStream.

        * DumpRenderTree/TestNetscapePlugIn/PluginObject.h:
        * DumpRenderTree/TestNetscapePlugIn/PluginTest.cpp: Added.
        (PluginTest::PluginTest):
        Initialize m_npp and the test identifier.
        
        (PluginTest::createTestFunctions):
        Return the map from identifiers to createTest functions.

        (PluginTest::registerCreateTestFunction):
        Insert the identifier and create function pair in the map.

        (PluginTest::create):
        Look for a createTest function. If one is found, call it. Otherwise create a vanilla PluginTest object.

        * DumpRenderTree/TestNetscapePlugIn/PluginTest.h: Added.
        (PluginTest::Register::Register):
        Helper class template for registering plug-in tests.
        
        (PluginTest::Register::create):
        Create a new test of the given type.

        * DumpRenderTree/TestNetscapePlugIn/Tests/DocumentOpenInDestroyStream.cpp: Added.
        (DocumentOpenInDestroyStream::DocumentOpenInDestroyStream):
        Add a test that calls testDocumentOpen from its NPP_DestroyStream callback.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_New):
        Create a PluginTest given the identifier. Remove the check for "testdocumentopenindestroystream".

        (NPP_DestroyStream):
        Call the plug-in test NPP_DestroyStream member function.

        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.vcproj:
        Add PluginTest.cpp, PluginTest.h and Tests/DocumentOpenInDestroyStream.cpp.

2010-07-29  Martin Robinson  <mrobinson@igalia.com>

        Unreviewed build fix.

        Add missing second argument to assert_lint in new style checker tests.

        * Scripts/webkitpy/style/checkers/cpp_unittest.py:

2010-07-29  Anders Carlsson  <andersca@apple.com>

        Reviewed by Adam Roben.

        check-webkit-style shouldn't complain about NPAPI functions
        https://bugs.webkit.org/show_bug.cgi?id=43211

        Allow underscores in functions that start with NPN_, NPP_ or NP_.

        * Scripts/webkitpy/style/checkers/cpp.py:
        * Scripts/webkitpy/style/checkers/cpp_unittest.py:

2010-07-29  Victor Wang  <victorw@chromium.org>

        Unreviewed, rolling out r64270.
        http://trac.webkit.org/changeset/64270
        https://bugs.webkit.org/show_bug.cgi?id=39589

        The patch breaks chromium webkit unittest

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        * Scripts/build-webkit:

2010-07-29  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Kenneth Christiansen.

        [Qt] QtTestBrowser: Move WebPage class methods definitions from main.cpp to webpage.cpp
        https://bugs.webkit.org/show_bug.cgi?id=43199

        There is no sense in keeping WebPage method definitions in main.cpp once
        webpage.cpp already exists.

        No behavior change.

        * QtTestBrowser/main.cpp:
        * QtTestBrowser/webpage.cpp:
        (WebPage::createWindow):
        (WebPage::createPlugin):

2010-07-29  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Kenneth Christiansen.

        [Qt] Factor out LauncherWindow class out of main.cpp (QtTestBrowser)
        https://bugs.webkit.org/show_bug.cgi?id=43170

        Moving LauncherWindow class out of main.cpp to its own .cpp and .h files:
        launcherwindow.{cpp|h}

        No behavior change.

        Also changed all global static variables (named "gXXX") from main.cpp to
        static public variables of the LauncherWindow class.

        * QtTestBrowser/QtTestBrowser.pro:
        * QtTestBrowser/launcherwindow.cpp: Added.
        * QtTestBrowser/launcherwindow.h: Added.
        * QtTestBrowser/main.cpp:
        (LauncherApplication::handleUserOptions):
        (main):

2010-07-29  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        Build fix for building against GTK+ 3.x. GSEAL requires that we
        access internals of the GdkDragContext via methods. For older versions
        of GTK+, define those methods.

        * DumpRenderTree/gtk/EventSender.cpp:
        (gdk_drag_context_get_selected_action): Added.
        (gdk_drag_context_get_actions): Added.
        (dispatchEvent): Use the two new accessor methods.

2010-07-29  Adam Roben  <aroben@apple.com>

        Always say "plugins directory" when referring to a directory
        containing one or more plugins

        Fixes <http://webkit.org/b/43197> WebKit2 often says "plugin
        directory" when it means "plugins directory"

        Reviewed by John Sullivan.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize): Updated for rename.

2010-07-29  Adam Roben  <aroben@apple.com>

        Always say "directory" when referring to a plugin directory

        Fixes <http://webkit.org/b/43195> WebKit2 often says "plugin path"
        when it means "plugin directory"

        Reviewed by John Sullivan.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize): Updated for renames.

        * WebKitTestRunner/TestController.h: Renamed m_testPluginPath to
        m_testPluginDirectory.
        (WTR::TestController::testPluginDirectory): Renamed from
        testPluginPath.

        * WebKitTestRunner/mac/TestControllerMac.mm:
        (WTR::TestController::initializeTestPluginDirectory):
        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::initializeTestPluginDirectory):
        Renamed from initializeTestPluginPath and updated for rename.

2010-07-29  Csaba Osztrogonác  <ossy@webkit.org>

         Reviewed by Antonio Gomes.

         Initialize all members of NPClass struct.
         https://bugs.webkit.org/show_bug.cgi?id=43193

         * DumpRenderTree/TestNetscapePlugIn/PluginObject.cpp:

2010-07-29  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Antonio Gomes.

        Warning fix on platforms where XP_MACOSX is undefined.
        https://bugs.webkit.org/show_bug.cgi?id=43192

        * DumpRenderTree/TestNetscapePlugIn/PluginObject.h:
        Use #if defined(XP_MACOSX) instead of #if XP_MACOSX .

2010-07-29  Adam Roben  <aroben@apple.com>

        Give find-included-framework-headers our standard license

        * Scripts/find-included-framework-headers: Used the license from
        WebCore/LICENSE-APPLE.

2010-07-29  Adam Roben  <aroben@apple.com>

        Speed up find-included-framework-headers

        We only do one invocation of find now, no longer pipe to grep, and
        replace uniq with sort -u.

        Also added a license header.

        * Scripts/find-included-framework-headers:

2010-07-29  Steve Block  <steveblock@google.com>

        Reviewed by Jeremy Orlow.

        Add LayoutTestController methods to test DeviceOrientation
        https://bugs.webkit.org/show_bug.cgi?id=39589

        * DumpRenderTree/LayoutTestController.cpp:
        (setMockDeviceOrientationCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setMockDeviceOrientation):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setMockDeviceOrientation):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setMockDeviceOrientation):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setMockDeviceOrientation):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setMockDeviceOrientation):
        * Scripts/build-webkit:

2010-07-28  Kenichi Ishibashi  <bashi@google.com>

        Reviewed by Shinichiro Hamaji.

        Fixed <https://bugs.webkit.org/show_bug.cgi?id=33814>
        check-webkit-style gives false positives in single-line functions.

        * Scripts/webkitpy/style/checkers/cpp.py:
        * Scripts/webkitpy/style/checkers/cpp_unittest.py:

2010-07-28  Darin Adler  <darin@apple.com>

        Reviewed by Sam Weinig.

        WebKitTestRunner needs to support layoutTestController.execCommand
        <https://bugs.webkit.org/show_bug.cgi?id=42538>

        WebKitTestRunner needs layoutTestController.isCommandEnabled
        <https://bugs.webkit.org/show_bug.cgi?id=42671>

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        Added execCommand and isCommandEnabled.
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::execCommand): Added.
        (WTR::LayoutTestController::isCommandEnabled): Added.
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h: Ditto.

2010-07-28  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Introduce drt_expectations.txt for NRWT
        https://bugs.webkit.org/show_bug.cgi?id=43123

        Introduce LayoutTests/platform/chromium/drt_expectations.txt,
        which overrides test expectations only for DumpRenderTree, in
        order to manage what problems are investigated.
        This change will be reverted when we switch to DRT completely.

        * Scripts/webkitpy/layout_tests/port/chromium.py:
         Add drt_expectations.txt content to the result of
         test_expectations_overrides() if --use-drt is specified.

2010-07-28  Brady Eidson  <beidson@apple.com>

        Reviewed by Darin Adler.

        First pass at visited link support for WK2
        https://bugs.webkit.org/show_bug.cgi?id=43157

        * MiniBrowser/mac/AppDelegate.m:
        (didNavigateWithNavigationData):
        (didPerformClientRedirect):
        (didPerformServerRedirect):
        (didUpdateHistoryTitle):
        (populateVisitedLinks): Added for the new version of the HistoryClient.
        (-[BrowserAppDelegate init]): Set the HistoryClient right after creating the context(s)
        
        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController awakeFromNib]):

2010-07-28  Robin Dunn  <robin@alldunn.com>

        Reviewed by Kevin Ollivier.

        Add DOM bindings support for wx port.

        * DumpRenderTree/wscript:
        * wx/browser/wscript:
        * wx/build/settings.py:

2010-07-28  Tony Chang  <tony@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] cleanup temp files left by Linux DRT
        https://bugs.webkit.org/show_bug.cgi?id=43062

        * BuildSlaveSupport/build.webkit.org-config/config.json: Rename the chromium bots to include the OS
        * BuildSlaveSupport/build.webkit.org-config/master.cfg: add a step on chromium-linux to delete temp files left
            by crashed DRTs

2010-07-28  Antonio Gomes  <tonikitoo@webkit.org>

        Rubber-stamped by Kenneth Christiansen.

        More Developer menu items reordering.

        Grouping related menu items together, visually and logically (in the code).

        No behavior change.

        * QtTestBrowser/main.cpp:
        (LauncherWindow::createChrome):

2010-07-27  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by Ojan Vafai.

        Add FILE_SYSTEM build flag for FileSystem API
        https://bugs.webkit.org/show_bug.cgi?id=42915

        * Scripts/build-webkit:

2010-07-27  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by David Levin.

        Stylebot should not complain about NULL usage in calls to gdk_pixbuf_save_to
        https://bugs.webkit.org/show_bug.cgi?id=43090

        * Scripts/webkitpy/style/checkers/cpp.py: Add exemption for some GdkPixbuf methods.
        * Scripts/webkitpy/style/checkers/cpp_unittest.py: Added some tests for this behavior.

2010-07-27  Kent Tamura  <tkent@chromium.org>

        Unreviewed, trivial typo fix.

        * Scripts/webkitpy/layout_tests/port/chromium.py:
          Fix a wrong method name committed by r64109.

2010-07-27  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=43087
        Clean up handling of strings at the WebKit2 API layer.

        * MiniBrowser/mac/BrowserWindowController.m:
        (runJavaScriptAlert):
        (runJavaScriptConfirm):
        (runJavaScriptPrompt):
        (didNavigateWithNavigationData):
        (-[BrowserWindowController updateProvisionalURLForFrame:]):
        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (_didClearWindowForFrame):

2010-07-27  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Eric Seidel.

        webkit-patch post-commits is broken: AttributeError: Values instance has no attribute 'no_squash'
        https://bugs.webkit.org/show_bug.cgi?id=42984

        squash and no_squash have been intentionally erroring for a couple weeks now.
        But post-commits was just broken. Just remove squash/no_squash.

        * Scripts/webkitpy/tool/steps/abstractstep.py:
        * Scripts/webkitpy/tool/steps/options.py:

2010-07-27  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix after introduction of EXECUTABLE_ALLOCATOR_DEMAND.

        * wx/build/settings.py:

2010-07-27  Adam Roben  <aroben@apple.com>

        Mac build fix

        * MiniBrowser/mac/BrowserWindowController.m:
        (processDidExit):
        (-[BrowserWindowController awakeFromNib]):
        Added processDidExit support.

2010-07-26  Antonio Gomes  <tonikitoo@webkit.org>

        Rubber-stamped by Simon Hausmann.

        [Qt] Reorder some items in Developers' menu so QGraphicsView one is easier accessible.

        Move some less useful menu items on Developers menu from the top to the bottom, so
        QGraphicsView menu goes to the top, and becomes more quickly accessible.

        * QtTestBrowser/main.cpp:
        (LauncherWindow::createChrome):

2010-07-26  Adam Roben  <aroben@apple.com>

        Fix the path to InjectedBundle.dll in Debug_Internal builds

        Fixes <http://webkit.org/b/42994> WebKitTestRunner fails to load
        InjectedBundle.dll in the Debug_Internal configuration

        Reviewed by Anders Carlsson.

        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::initializeInjectedBundlePath): Add the _debug
        suffix only in Debug_All builds.

2010-07-25  Mahesh Kulkarni  <mahesh.kulkarni@nokia.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=42947
        Check for WEBKIT_TESTFONTS for qt, gtk and windows port and throw 
        error. Without which dumpRenderTree crashes.

        * Scripts/old-run-webkit-tests:

2010-07-27  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        https://bugs.webkit.org/show_bug.cgi?id=42956
        [DRT/Chromium] Fix "out of sync" assertion error

        Fix an assertion error on Windows like the following:
        100721 20:16:46 chromium.py:386  CRITICAL Test got out of sync:
        |file:///c:/WebKitBuildSlave2/chromium-win-release-tests/build/LayoutTests/http/tests/local/blob/send-data-blob.html|
        |file:///C:/WebKitBuildSlave2/chromium-win-release-tests/build/LayoutTests/http/tests/local/blob/send-data-blob.html|

        * Scripts/webkitpy/layout_tests/port/chromium.py:
        If the url matches with "file:///[a-z]:", does case-ignore comparison.
        GURL capitalize the driver letter of a file: URL.

2010-07-26  Darin Adler  <darin@apple.com>

        Reviewed by Sam Weinig.

        WebKitTestRunner needs to support layoutTestController.counterValueForElementById
        https://bugs.webkit.org/show_bug.cgi?id=42537

        WebKitTestRunner needs layoutTestController.markerTextForListItem
        https://bugs.webkit.org/show_bug.cgi?id=42549

        * WebKitTestRunner/InjectedBundle/Bindings/CodeGeneratorTestRunner.pm:
        Fixed _paramterExpression typo. Improved support for string type as a
        return value, so we don't try to include DOMString.h and we can convert
        the string to a JSValue by calling JSValueMakeStringOrNull.

        * WebKitTestRunner/InjectedBundle/Bindings/JSWrappable.h:
        Added JSValueMakeStringOrNull, used by the code generator.

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        Added counterValueForElementById and markerTextForListItem.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        Moved constant to the top of the file.
        (WTR::toCF): Added. Converts strings to CFStringRef.
        (WTR::toWK): Added. Converts strings to WKStringRef.
        (WTR::toJS): Added. Converts strings to JSStringRef.
        (WTR::setProperty): Moved this function to the top of the file
        rather than having it down where it's used inside the class. Also
        renamed it so it's a separate function rather than an overload of
        JSObjectSetProperty.
        (WTR::propertyValue): Copied this here from InjectedBundlePage.cpp.
        Should move it somewhere we can share it.
        (WTR::propertyObject): Ditto.
        (WTR::getElementById): Added. Calls getElementById through the magic
        of JavaScript.
        (WTR::LayoutTestController::pauseAnimationAtTimeOnElementWithId):
        Chagned to use toWK instead of four local variables.
        (WTR::LayoutTestController::counterValueForElementById): Added.
        Calls WKBundleFrameCopyCounterValue.
        (WTR::LayoutTestController::markerTextForListItem): Added.
        Calls WKBundleFrameCopyMarkerText.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        Added counterValueForElementById and markerTextForListItem.

2010-07-26  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Gustavo Noronha Silva.

        [GTK] The EventSender should support simulating drop events
        https://bugs.webkit.org/show_bug.cgi?id=39844

        Add initial dropping support to the GTK+ EventSender.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (createWebView): Listen for some new drag-and-drop signals.
        * DumpRenderTree/gtk/EventSender.cpp: Add currentDragSourceContext.
        (dispatchEvent):
        Detect situations where a drag is either starting or ending and massage
        GTK+ into sending the appropriate signals to the WebView.
        (replaySavedEvents): Remove comment.
        (makeEventSender): Clear the currentDragSourceContext when creating a new EventSender.
        (dragBeginCallback): Capture the new currentDragSourceContext when a drag begins.
        (dragEndCallback): Clear the currentDragSourceContext when a drag ends.
        (dragFailedCallback): Disable the GTK+ drag failed animation.
        * DumpRenderTree/gtk/EventSender.h: Add declarations for new signal callbacks.

2010-07-26  Daniel Bates  <dbates@rim.com>

        Reviewed by Darin Adler.

        svn-unapply warns of uninitialized variable when unapplying
        a patch that describes an svn move operation
        https://bugs.webkit.org/show_bug.cgi?id=42036

        Fixes Perl uninitialized variable warnings when un-applying
        a patch that moves a file.

        * Scripts/svn-unapply:
          - Modified patch() so that it initializes $patch to the empty
            string when we don't have svnConvertedText (such as when
            reversing a diff that represents a svn copy/move operation).

2010-07-26  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Move some non-APIish functions into private headers.

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:

2010-07-26  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Fix for https://bugs.webkit.org/show_bug.cgi?id=42986
        Add prompt and confirm client functions to WebKit2

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController awakeFromNib]):

2010-07-26  Adam Roben  <aroben@apple.com>

        Windows build fix

        * MiniBrowser/MiniBrowser.vcproj:
        * WebKitTestRunner/InjectedBundle/win/InjectedBundle.vcproj:
        Removed empty attributes so the values will be picked up from the
        vsprops files. (Also removed a couple of attributes that accidentally
        duplicated values from the vsprops files.)

2010-07-26  Brian Weinstein  <bweinstein@apple.com>

        Rubber-stamped by Adam Roben.
        
        Touch MiniBrowser's stdafx to fix the build.

        * MiniBrowser/win/stdafx.h:

2010-07-26  Hayato Ito  <hayato@chromium.org>

        Reviewed by Shinichiro Hamaji.

        Add pretty printer of WTF::Vector for GDB 7.

        https://bugs.webkit.org/show_bug.cgi?id=40909

        * gdb/wtf.py: Added.

2010-07-26  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Simon Hausmann.

        [Qt] Fix feature detection regexp

        We were missing the last feature

        * Scripts/webkitdirs.pm:

2010-07-25  Darin Adler  <darin@apple.com>

        Reviewed by Dan Bernstein.

        WebKitTestRunner needs to support layoutTestController.dumpSelectionRect
        https://bugs.webkit.org/show_bug.cgi?id=42326

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        Added dumpSelectionRect.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (WTR::LayoutTestController::dumpSelectionRect): Added. For now, this
        does nothing because its purpose is to change pixel test output and
        we do not have pixel tests implemented yet.

2010-07-25  Darin Adler  <darin@apple.com>

        Reviewed by Maciej Stachowiak.

        WebKitTestRunner needs to support layoutTestController.keepWebHistory
        https://bugs.webkit.org/show_bug.cgi?id=42323

        Added keepWebHistory and computedStyleIncludingVisitedInfo.

        Also fixed misspellings of the word "receive".

        Also tweaked the names of some of the LayoutTestController members.

        * WebKitTestRunner/InjectedBundle/Bindings/CodeGeneratorTestRunner.pm:
        Added support for a type named "object" that is passed and returns as
        a JSValueRef.

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        Added keepWebHistory and computedStyleIncludingVisitedInfo. Also
        put setAcceptsEditing up nearer the top.

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::_didReceiveMessage): Fixed mispellings of receive.
        (WTR::InjectedBundle::initialize): Ditto.
        (WTR::InjectedBundle::didReceiveMessage): Ditto.
        (WTR::InjectedBundle::reset): Reset the state of visited links between
        tests. Also eliminated the unused argument to the LayoutTestController
        create function.
        (WTR::InjectedBundle::setShouldTrackVisitedLinks): Added.
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h: Ditto.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::shouldBeginEditing): Call shouldAllowEditing
        instead of acceptsEditing.
        (WTR::InjectedBundlePage::shouldEndEditing): Ditto.
        (WTR::InjectedBundlePage::shouldInsertNode): Ditto.
        (WTR::InjectedBundlePage::shouldInsertText): Ditto.
        (WTR::InjectedBundlePage::shouldDeleteRange): Ditto.
        (WTR::InjectedBundlePage::shouldChangeSelectedRange): Ditto.
        (WTR::InjectedBundlePage::shouldApplyStyle): Ditto.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::create): Removed uneeded argument.
        (WTR::LayoutTestController::LayoutTestController): Removed unneeded
        argument. Updated for rename of m_acceptsEditing to m_shouldAllowEditing.
        (WTR::LayoutTestController::numberOfActiveAnimations): Added some FIXMEs
        about the fact that this works on the main frame.
        (WTR::LayoutTestController::pauseAnimationAtTimeOnElementWithId): Ditto.
        (WTR::LayoutTestController::keepWebHistory): Added.
        (WTR::LayoutTestController::computedStyleIncludingVisitedInfo): Added.
        (WTR::JSObjectSetProperty): Added. Helper to make the function below
        cleaner.
        (WTR::LayoutTestController::makeWindowObject): Changed to use the
        overload of JSObjectSetProperty above.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.h: Changes to
        match above.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize): Fixed mispellings of receive.
        (WTR::TestController::_didReceiveMessageFromInjectedBundle): Ditto.
        (WTR::TestController::didReceiveMessageFromInjectedBundle): Ditto.
        * WebKitTestRunner/TestController.h: Ditto.
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::didReceiveMessageFromInjectedBundle): Ditto.
        * WebKitTestRunner/TestInvocation.h: Ditto.

2010-07-25  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=42193
        Support layoutTestController.dumpEditingDelegates in WebKitTestRunner

        Step 2 - add the rest of editing delegates.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::operator<<): Fixed to not crash when range is null.
        (WTR::InjectedBundlePage::InjectedBundlePage):
        (WTR::InjectedBundlePage::_shouldEndEditing):
        (WTR::InjectedBundlePage::_shouldInsertNode):
        (WTR::InjectedBundlePage::_shouldInsertText):
        (WTR::InjectedBundlePage::_shouldDeleteRange):
        (WTR::InjectedBundlePage::_shouldChangeSelectedRange):
        (WTR::InjectedBundlePage::_shouldApplyStyle):
        (WTR::InjectedBundlePage::_didBeginEditing):
        (WTR::InjectedBundlePage::_didEndEditing):
        (WTR::InjectedBundlePage::_didChange):
        (WTR::InjectedBundlePage::_didChangeSelection):
        (WTR::InjectedBundlePage::shouldEndEditing):
        (WTR::InjectedBundlePage::shouldInsertNode):
        (WTR::InjectedBundlePage::shouldInsertText):
        (WTR::InjectedBundlePage::shouldDeleteRange):
        (WTR::InjectedBundlePage::shouldChangeSelectedRange):
        (WTR::InjectedBundlePage::shouldApplyStyle):
        (WTR::InjectedBundlePage::didBeginEditing):
        (WTR::InjectedBundlePage::didEndEditing):
        (WTR::InjectedBundlePage::didChange):
        (WTR::InjectedBundlePage::didChangeSelection):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:

2010-07-24  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by David Kilzer.

        AX: need a layout test testing misspelled words in attributed strings
        https://bugs.webkit.org/show_bug.cgi?id=42899

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (attributedStringForRangeCallback):
        (attributedStringRangeIsMisspelledCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::attributedStringForRange):
        (AccessibilityUIElement::attributedStringRangeIsMisspelled):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::attributedStringForRange):
        (AccessibilityUIElement::attributedStringRangeIsMisspelled):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::attributedStringForRange):
        (AccessibilityUIElement::attributedStringRangeIsMisspelled):

2010-07-23  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/42911> Update ruby tools to work with shallow framework bundles

        Reviewed by Mark Rowe.

        * Scripts/check-for-inappropriate-files-in-framework: Added
        check for the SHALLOW_BUNDLE environment variable so that the
        script will work with iOS WebKit builds.
        * Scripts/check-for-webkit-framework-include-consistency: Ditto.

2010-07-22  Darin Adler  <darin@apple.com>

        Reviewed by Sam Weinig.

        Eliminate unneeded WKBundleFrameCopyInnerText function from WebKit2
        https://bugs.webkit.org/show_bug.cgi?id=42847

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::operator<<): Replaced the WKStringToUTF8 function with
        a set of overloaded stream operators.
        (WTR::dumpPath): Changed to use ostringstream and return a string.
        (WTR::propertyValue): Added.
        (WTR::propertyObject): Added.
        (WTR::propertyString): Added.
        (WTR::numericWindowPropertyValue): Changed to call propertyValue.
        (WTR::dumpFrameScrollPosition): Removed now unneeded WKStringToUTF8 sequence
        since we now have suitable streaming functions.
        (WTR::dumpFrameText): Use propertyObject and propertyString instead of
        WKBundleFrameCopyInnerText.
        (WTR::dumpDescendantFramesText): Removed now unneeded WKStringToUTF8 sequence
        since we now have suitable streaming functions.
        (WTR::InjectedBundlePage::dump): Ditto.
        (WTR::InjectedBundlePage::willAddMessageToConsole): Ditto.
        (WTR::InjectedBundlePage::willSetStatusbarText): Ditto.
        (WTR::InjectedBundlePage::willRunJavaScriptAlert): Ditto.
        (WTR::InjectedBundlePage::willRunJavaScriptConfirm): Ditto.
        (WTR::InjectedBundlePage::willRunJavaScriptPrompt): Ditto.

2010-07-22  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Sam Weinig and Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=42193
        Support layoutTestController.dumpEditingDelegates in WebKitTestRunner

        Step 1: Add the method, and implement one actual delegate call as proof of concept. No tests
        fixed, but this makes difference one line smaller on many editing tests.

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        Added dumpEditingCallbacks() and setAcceptsEditing().

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::dumpPath): Dump path to a node in a format that's compatible with DumpRenderTree.
        (WTR::operator<<): Print a range.
        (WTR::InjectedBundlePage::InjectedBundlePage): Set editor client in addition to existing
        clients.
        (WTR::InjectedBundlePage::_shouldBeginEditing): The only client method implemented so far.
        (WTR::InjectedBundlePage::shouldBeginEditing): Ditto.
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h: Added a section for editor client
        calls.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::LayoutTestController):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (WTR::LayoutTestController::dumpEditingCallbacks):
        (WTR::LayoutTestController::setAcceptsEditing):
        (WTR::LayoutTestController::acceptsEditing):
        (WTR::LayoutTestController::shouldDumpEditingCallbacks):
        Store m_acceptsEditing and m_dumpEditingCallbacks.

2010-07-22  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] QtWebKit needs public API for Notifications.
        https://bugs.webkit.org/show_bug.cgi?id=41413

        Update DumpRenderTree and QtTestBrowser to use the new API.
        Add new DRT API to flag that notifications permission requests should be ignored.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::WebPage::WebPage):
        (WebCore::WebPage::requestPermission):
        (WebCore::WebPage::checkPermission):
        (WebCore::WebPage::cancelRequestsForPermission):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::ignoreDesktopNotificationPermissionRequests):
        (LayoutTestController::checkDesktopNotificationPermission):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController::ignoreReqestForPermission):
        * QtTestBrowser/main.cpp:
        (LauncherWindow::LauncherWindow):
        * QtTestBrowser/webpage.cpp:
        (WebPage::WebPage):
        (WebPage::requestPermission):
        (WebPage::checkPermission):
        (WebPage::cancelRequestsForPermission):
        * QtTestBrowser/webpage.h:

2010-07-22  Darin Adler  <darin@apple.com>

        Reviewed by Sam Weinig.

        WebKitTestRunner needs to support layoutTestController.dumpChildFramesAsText
        https://bugs.webkit.org/show_bug.cgi?id=42325

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        Added dumpChildFramesAsText.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::dumpFrameText): Added.
        (WTR::dumpDescendantFramesText): Added.
        (WTR::InjectedBundlePage::dumpAllFramesText): Added.
        (WTR::InjectedBundlePage::dump): Changed to use the new whatToDump function
        instead of the shouldDumpAsText function, and added a case for AllFramesText.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h: Added dumpAllFramesText.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::LayoutTestController): Replaced m_dumpAsText with
        m_whatToDump.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.h: Added
        dumpChildFramesAsText. Removed shouldDumpAsText, shouldDumpDOMAsWebArchive,
        and shouldDumpSourceAsWebArchive. Added whatToDump.

2010-07-22  Adam Roben  <aroben@apple.com>

        Windows build fix

        Inspired by r63881.

        * MiniBrowser/MiniBrowser.vcproj:
        * WebKitTestRunner/InjectedBundle/win/InjectedBundle.vcproj:
        Removed pre- and post-build events so they will be inherited from the
        vsprops files.

2010-07-21  Darin Adler  <darin@apple.com>

        Reviewed by Sam Weinig.

        WebKitTestRunner needs layoutTestController.dumpChildFrameScrollPositions
        https://bugs.webkit.org/show_bug.cgi?id=42548

        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl:
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::numericWindowPropertyValue): Renamed this and moved it up higher in the file.
        (WTR::dumpFrameScrollPosition): Added argument telling whether to dump the frame name.
        Changed to a file-internal function instead of a member function.
        (WTR::dumpDescendantFrameScrollPositions): Added.
        (WTR::InjectedBundlePage::dumpAllFrameScrollPositions): Added.
        (WTR::InjectedBundlePage::dump): Changed to call dumpAllFrameScrollPositions when
        appropriate. Also streamlined all the WKStringToUTF8 call sites.
        (WTR::InjectedBundlePage::willAddMessageToConsole): Streamlined use of WKStringToUTF8.
        (WTR::InjectedBundlePage::willSetStatusbarText): Ditto.
        (WTR::InjectedBundlePage::willRunJavaScriptAlert): Ditto.
        (WTR::InjectedBundlePage::willRunJavaScriptConfirm): Ditto.
        (WTR::InjectedBundlePage::willRunJavaScriptPrompt): Ditto.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h: Updated for above changes.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::LayoutTestController): Initialize
        m_shouldDumpAllFrameScrollPositions.
        (WTR::LayoutTestController::shouldDumpMainFrameScrollPosition): Renamed from
        shouldDumpFrameScrollPositions.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.h: Reorganized the file a
        bit, added dumpChildFrameScrollPositions and shouldDumpAllFrameScrollPositions,
        and renamed shouldDumpFrameScrollPositions to shouldDumpMainFrameScrollPosition.

2010-07-21  Darin Adler  <darin@apple.com>

        Reviewed by Sam Weinig.

        WebKitTestRunner needs to support dumping of scroll position
        https://bugs.webkit.org/show_bug.cgi?id=42514

        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (_didClearWindowForFrame): Use JSGlobalContextRef instead of JSContextRef.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::_didClearWindowForFrame): Use JSGlobalContextRef
        instead of JSContextRef.
        (WTR::InjectedBundlePage::dump): Call dumpFrameScrollPosition when appropriate.
        (WTR::numericWindowProperty): Added. Helper for dumpFrameScrollPosition.
        (WTR::InjectedBundlePage::dumpFrameScrollPosition): Added.
        (WTR::InjectedBundlePage::didClearWindowForFrame): Use JSGlobalContextRef
        instead of JSContextRef.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h: Removed names from
        arguments that simply repeat the argument type. Added dumpFrameScrollPosition.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::shouldDumpDOMAsWebArchive): Added. Currently
        returns false.
        (WTR::LayoutTestController::shouldDumpSourceAsWebArchive): Added. Currently
        returns false.
        (WTR::LayoutTestController::shouldDumpFrameScrollPositions): Added. Matches
        the logic in DumpRenderTree.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.h: Updated for above changes.

        * WebKitTestRunner/WebKitTestRunner.xcodeproj: Added property svn:ignore.

2010-07-21  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix, adding the WebCore/bindings/generic dir to the list of build dirs.

        * wx/build/settings.py:

2010-07-21  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=42539
        WebKitTestRunner needs to support printing ALERT, PROMPT and CONFIRM messages

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::InjectedBundlePage):
        (WTR::InjectedBundlePage::_willAddMessageToConsole):
        (WTR::InjectedBundlePage::_willSetStatusbarText):
        (WTR::InjectedBundlePage::_willRunJavaScriptAlert):
        (WTR::InjectedBundlePage::_willRunJavaScriptConfirm):
        (WTR::InjectedBundlePage::_willRunJavaScriptPrompt):
        (WTR::InjectedBundlePage::willAddMessageToConsole):
        (WTR::InjectedBundlePage::willSetStatusbarText):
        (WTR::InjectedBundlePage::willRunJavaScriptAlert):
        (WTR::InjectedBundlePage::willRunJavaScriptConfirm):
        (WTR::InjectedBundlePage::willRunJavaScriptPrompt):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:

2010-07-21  Adam Roben  <aroben@apple.com>

        Give InjectedBundle our standard set of configurations (minus the
        *_Cairo variants)

        InjectedBundle's Debug_All configuration was the same as is Debug
        configuration, and it was missing a Debug_Internal configuration.

        Fixes <http://webkit.org/b/42749> InjectedBundle's build
        configurations are screwy

        Reviewed by Darin Adler.

        * WebKitTestRunner/InjectedBundle/win/InjectedBundle.vcproj: Added
        debug_internal.vsprops and debug_all.vsprops to the Debug_All
        configuration. Added a Debug_Internal configuration.

        * WebKitTestRunner/WebKitTestRunner.sln: Build the Debug_Internal
        variant of InjectedBundle when we're using the Debug_Internal solution
        configuration.

2010-07-21  Adam Roben  <aroben@apple.com>

        Move InjectedBundle's settings to a vsprops file

        This will make it easier to change settings for all configurations,
        and to add new configurations.

        Fixes <http://webkit.org/b/42748> InjectedBundle should use vsprops
        files

        Reviewed by Darin Adler.

        * WebKitTestRunner/Configurations/InjectedBundleCommon.vsprops: Added.
        Moved settings here...
        * WebKitTestRunner/InjectedBundle/win/InjectedBundle.vcproj: ...from
        here.

2010-07-21  Adam Roben  <aroben@apple.com>

        Give MiniBrowser our standard set of configurations (minus the *_Cairo
        variants)

        MiniBrowser already had a configuration called "Release", but it was
        using mostly the same settings as Debug. And its Debug configuration
        was using the settings that Debug_Internal should be using.

        Fixes <http://webkit.org/b/42746> MiniBrowser's build configurations
        are screwy

        Reviewed by Darin Adler.

        * MiniBrowser/MiniBrowser.vcproj: Removed debug_internal.vsprops from
        the Debug configuration. Remove debug.vsprops and
        debug_internal.vsprops from the Release configuration and replace them
        with release.vsprops. Added Debug_Internal and Debug_All
        configurations.

2010-07-21  Adam Roben  <aroben@apple.com>

        Move MiniBrowser's settings to a vsprops file

        This will make it easier to change settings for all configurations,
        and to add new configurations.

        MiniBrowser should use vsprops files
        https://bugs.webkit.org/show_bug.cgi?id=42745

        Reviewed by Darin Adler.

        * MiniBrowser/Configurations/MiniBrowserCommon.vsprops: Added. Moved
        settings here...
        * MiniBrowser/MiniBrowser.vcproj: ...from here.

2010-07-21  Adam Roben  <aroben@apple.com>

        Fix compiler warnings when building MiniBrowser

        Also cleaned up the .vcproj a bit.

        Fixes <http://webkit.org/b/42743>.

        Reviewed by Darin Adler.

        * MiniBrowser/MiniBrowser.vcproj: Removed all settings that are
        already defined in .vsprops files. This also fixes a warning about
        /EDITANDCONTINUE being incompatible with /SAFESEH.

        * MiniBrowser/win/MiniBrowser.rc: Replaced afxres.h with winresrc.h so
        that we stop getting warnings about ID_FILE_OPEN and ID_FILE_CLOSE
        being redefined. (I think this will also get us closer to building
        with VC++ Express.)

2010-07-20  Sam Weinig  <sam@webkit.org>

        Reviewed by Jon Honeycutt.

        Fix obvious typo.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::setStatusbarText): Need to call ->data() to actually get the string value.

2010-07-20  Tony Chang  <tony@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] by default, dumpAsText should disable pixel results
        https://bugs.webkit.org/show_bug.cgi?id=42715

        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::dumpAsText): disable pixel results, but allow JS to override

2010-07-20  Adam Roben  <aroben@apple.com>

        Windows build fix

        * MiniBrowser/MiniBrowser.vcproj: Link against the new, shiny
        WebKit.lib instead of the old, dusty WebKit2.lib.

2010-07-20  Adam Roben  <aroben@apple.com>

        Stop linking WebKitTestRunner against getopt

        Use of getopt was removed in r63700.

        Fixes <http://webkit.org/b/42714> WebKitTestRunner links against
        getopt, but doesn't need to

        Reviewed by Sam Weinig.

        * WebKitTestRunner/win/WebKitTestRunner.vcproj: Removed getopt.lib
        from all configurations.

2010-07-20  Adam Roben  <aroben@apple.com>

        Make run-webkit-tests --webkit-test-runner "work" on Windows

        WebKitTestRunner crashes on launch, but at least the scripts build and
        launch it!

        Fixes <http://webkit.org/b/42709> run-webkit-tests
        --webkit-test-runner bails with an error on Windows

        Reviewed by Anders Carlsson.

        * Scripts/build-webkittestrunner: Build WebKitTestRunner.sln on
        Windows.
        * WebKitTestRunner/WebKitTestRunner.sln: Added. Contains the following
        projects (from first-built to last-built): FindSafari, ImageDiff,
        InjectedBundleGenerated, InjectedBundle, WebKitTestRunner.

2010-07-20  Adam Roben  <aroben@apple.com>

        Change build-webkit back to building WebKit.sln on Windows

        WebKit.sln builds all the same projects as WebKit2.sln, and the latter
        is being removed.

        Rubber-stamped in advance by Steve Falkenburg.

        * Scripts/build-webkit:

2010-07-20  Adam Roben  <aroben@apple.com>

        Windows build fix

        * MiniBrowser/win/BrowserWindow.cpp: Added missing #include.

2010-07-20  Joseph Pecoraro  <joepeck@webkit.org>

        Reviewed by Geoffrey Garen.

        WebScriptObject Should Allow Safely Checking For Key Existence
        https://bugs.webkit.org/show_bug.cgi?id=42613

        Normal ObjCController workflow for a WebScriptObject test.

        * DumpRenderTree/mac/ObjCController.m:
        (+[ObjCController isSelectorExcludedFromWebScript:]):
        (+[ObjCController webScriptNameForSelector:]):
        (-[ObjCController testHasWebScriptKey:]):

2010-07-20  Chris Marrin  <cmarrin@apple.com>

        Reviewed by Simon Fraser.

        https://bugs.webkit.org/show_bug.cgi?id=42118
        Disable compositing/webgl tests if WebGL is not enabled

        * Scripts/old-run-webkit-tests:

2010-07-20  Anton Muhin  <antonm@chromium.org>

        Reviewed by Darin Adler.

        Print additional information about exception if failed to connect to apache (in verbose mode).
        https://bugs.webkit.org/show_bug.cgi?id=42627

        * Scripts/webkitpy/layout_tests/port/http_server_base.py:

2010-07-20  Tony Chang  <tony@chromium.org>

        Reviewed by David Levin.

        [chromium] only pass --force to gclient sync if explicitly stated
        https://bugs.webkit.org/show_bug.cgi?id=42581

        * BuildSlaveSupport/build.webkit.org-config/master.cfg: bots should
              always pass --force since it's hard to do manual cleanups
        * Scripts/update-webkit-chromium: only pass --force if --force is
              passed in

2010-07-19  Anders Carlsson  <andersca@apple.com>

        Fix build.

        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:
        Paths of generated files should be relative to the build product.

2010-07-19  Daniel Bates  <dbates@rim.com>

        Reviewed by Adam Roben.

        [Win] Implement LayoutTestController::markerTextForListItem()
        https://bugs.webkit.org/show_bug.cgi?id=37930

        Implements DRT support for markerTextForListItem in the Windows port.

        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::markerTextForListItem): Implemented.

2010-07-19  Jessie Berlin  <jberlin@apple.com>

        Windows build fix. Unreviewed.

        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::initializeTestPluginPath):

2010-07-19  Sam Weinig  <sam@webkit.org>

        Reviewed by Jon Honeycutt.

        Remove dependency on getopt from WebKitTestRunner.

        - Simplify options parsing and eliminate unused options.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::TestController):
        (WTR::TestController::initialize):
        * WebKitTestRunner/TestController.h:
        (WTR::TestController::testPluginPath):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:
        * WebKitTestRunner/mac/TestControllerMac.mm:
        (WTR::TestController::platformInitialize):
        (WTR::TestController::initializeTestPluginPath):
        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::platformInitialize):
        (WTR::TestController::initializeTestPluginPath):

2010-07-19  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt] MiniBrowser: Progress indication at address bar
        https://bugs.webkit.org/show_bug.cgi?id=42565

        Make possible to see load progress at address bar based on
        QtTestBrowser solution

        * MiniBrowser/qt/BrowserWindow.cpp:
        (BrowserWindow::BrowserWindow):
        (BrowserWindow::loadProgress):
        * MiniBrowser/qt/BrowserWindow.h:

2010-07-19  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt] Add MiniBrowser features: urlChanged, titleChanged and from user input load
        https://bugs.webkit.org/show_bug.cgi?id=42564

        * MiniBrowser/qt/BrowserWindow.cpp:
        (BrowserView::load):
        (BrowserWindow::BrowserWindow):
        (BrowserWindow::titleChanged):
        (BrowserWindow::urlChanged):
        * MiniBrowser/qt/BrowserWindow.h:

2010-07-19  Sam Weinig  <weinig@apple.com>

        Reviewed by Adam Roben.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=42532
        Auto-generate the JS bindings for WebKitTestRunner's script objects.

        * WebKitTestRunner/Configurations/Base.xcconfig:
        * WebKitTestRunner/Configurations/DebugRelease.xcconfig:
        * WebKitTestRunner/DerivedSources.make: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/GetPtr.h: Added.
        * WebKitTestRunner/InjectedBundle/Bindings: Added.
        * WebKitTestRunner/InjectedBundle/Bindings/CodeGeneratorTestRunner.pm: Added.
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrappable.h: Added.
        (WTR::JSWrappable::~JSWrappable):
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrapper.cpp: Added.
        (WTR::JSWrapper::wrap):
        (WTR::JSWrapper::unwrap):
        (WTR::unwrapObject):
        (WTR::JSWrapper::initialize):
        (WTR::JSWrapper::finalize):
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrapper.h: Added.
        (WTR::toJS):
        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl: Added.
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::dump):
        (WTR::InjectedBundlePage::setStatusbarText):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::wrapperClass):
        (WTR::LayoutTestController::waitUntilDone):
        (WTR::LayoutTestController::makeWindowObject):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (WTR::LayoutTestController::shouldDumpAsText):
        (WTR::LayoutTestController::dumpAsText):
        (WTR::LayoutTestController::shouldDumpStatusCallbacks):
        (WTR::LayoutTestController::dumpStatusCallbacks):
        (WTR::LayoutTestController::waitToDump):
        (WTR::LayoutTestController::testRepaint):
        (WTR::LayoutTestController::repaintSweepHorizontally):
        * WebKitTestRunner/InjectedBundle/win/InjectedBundle.vcproj:
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:
        * WebKitTestRunner/win/InjectedBundleGenerated.vcproj: Added.
        * WebKitTestRunner/win/build-generated-files.sh: Added.

2010-07-19  Mark Rowe  <mrowe@apple.com>

        Clean up the buildbot configuration a little.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2010-07-19  Chris Marrin  <cmarrin@apple.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=42118
        Disable WebGL on Leopard for now. 

        LayoutTests fail on some graphics hardware on Leopard because one of the features we use,
        GL_ARB_framebuffer_object, is not universally available in Leopard like it is in
        SnowLeopard. This will allow LayoutTests to pass on Leopard until we add logic to use a
        software OpenGL driver on machines without this support.

        * Scripts/build-webkit:

2010-07-19  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Brady Eidson.

        Fix MiniBrowser to update URL as you browse
        https://bugs.webkit.org/show_bug.cgi?id=42591
        
        Hook up various loading notifications to update the URL bar in MiniBrowser.

        * MiniBrowser/mac/BrowserWindowController.m:
        (_didStartProvisionalLoadForFrame):
        (_didReceiveServerRedirectForProvisionalLoadForFrame):
        (_didFailProvisionalLoadWithErrorForFrame):
        (_didCommitLoadForFrame):
        (_didFailLoadWithErrorForFrame):
        (-[BrowserWindowController updateProvisionalURLForFrame:]):
        (-[BrowserWindowController didStartProvisionalLoadForFrame:]):
        (-[BrowserWindowController didReceiveServerRedirectForProvisionalLoadForFrame:]):
        (-[BrowserWindowController didFailProvisionalLoadWithErrorForFrame:]):
        (-[BrowserWindowController didFailLoadWithErrorForFrame:]):
        (-[BrowserWindowController didCommitLoadForFrame:]):

2010-07-19  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=42586
        Log all canceled authentication attempts in DumpRenderTree

        * DumpRenderTree/mac/ResourceLoadDelegate.mm:
        (-[ResourceLoadDelegate webView:resource:didReceiveAuthenticationChallenge:fromDataSource:]):
        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::didReceiveAuthenticationChallenge):
        It's important to know whether an auth sheet appeared. Added logging to "no preset credentials"
        case.

2010-07-19  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r63671.
        http://trac.webkit.org/changeset/63671
        https://bugs.webkit.org/show_bug.cgi?id=42575

        broke windows (Requested by weinig on #webkit).

        * WebKitTestRunner/Configurations/Base.xcconfig:
        * WebKitTestRunner/Configurations/DebugRelease.xcconfig:
        * WebKitTestRunner/DerivedSources.make: Removed.
        * WebKitTestRunner/ForwardingHeaders/wtf/GetPtr.h: Removed.
        * WebKitTestRunner/InjectedBundle/Bindings/CodeGeneratorTestRunner.pm: Removed.
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrappable.h: Removed.
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrapper.cpp: Removed.
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrapper.h: Removed.
        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl: Removed.
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::dump):
        (WTR::InjectedBundlePage::setStatusbarText):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::setWaitToDump):
        (WTR::displayCallback):
        (WTR::dumpAsTextCallback):
        (WTR::dumpStatusCallbacksCallback):
        (WTR::waitUntilDoneCallback):
        (WTR::notifyDoneCallback):
        (WTR::numberOfActiveAnimationsCallback):
        (WTR::pauseAnimationAtTimeOnElementWithIdCallback):
        (WTR::repaintSweepHorizontallyCallback):
        (WTR::testRepaintCallback):
        (WTR::layoutTestControllerObjectFinalize):
        (WTR::LayoutTestController::makeWindowObject):
        (WTR::LayoutTestController::getJSClass):
        (WTR::LayoutTestController::staticFunctions):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (WTR::LayoutTestController::dumpAsText):
        (WTR::LayoutTestController::setDumpAsText):
        (WTR::LayoutTestController::dumpStatusCallbacks):
        (WTR::LayoutTestController::setDumpStatusCallbacks):
        (WTR::LayoutTestController::setTestRepaint):
        (WTR::LayoutTestController::setTestRepaintSweepHorizontally):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2010-07-19  Sam Weinig  <sam@webkit.org>

        Reviewed by Adam Roben.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=42532
        Auto-generate the JS bindings for WebKitTestRunner's script objects.

        * WebKitTestRunner/Configurations/Base.xcconfig:
        * WebKitTestRunner/Configurations/DebugRelease.xcconfig:
        * WebKitTestRunner/DerivedSources.make: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/GetPtr.h: Added.
        * WebKitTestRunner/InjectedBundle/Bindings: Added.
        * WebKitTestRunner/InjectedBundle/Bindings/CodeGeneratorTestRunner.pm: Added.
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrappable.h: Added.
        (WTR::JSWrappable::~JSWrappable):
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrapper.cpp: Added.
        (WTR::JSWrapper::wrap):
        (WTR::JSWrapper::unwrap):
        (WTR::unwrapObject):
        (WTR::JSWrapper::initialize):
        (WTR::JSWrapper::finalize):
        * WebKitTestRunner/InjectedBundle/Bindings/JSWrapper.h: Added.
        (WTR::toJS):
        * WebKitTestRunner/InjectedBundle/Bindings/LayoutTestController.idl: Added.
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::dump):
        (WTR::InjectedBundlePage::setStatusbarText):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::wrapperClass):
        (WTR::LayoutTestController::waitUntilDone):
        (WTR::LayoutTestController::makeWindowObject):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (WTR::LayoutTestController::shouldDumpAsText):
        (WTR::LayoutTestController::dumpAsText):
        (WTR::LayoutTestController::shouldDumpStatusCallbacks):
        (WTR::LayoutTestController::dumpStatusCallbacks):
        (WTR::LayoutTestController::waitToDump):
        (WTR::LayoutTestController::testRepaint):
        (WTR::LayoutTestController::repaintSweepHorizontally):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2010-07-19  Tony Chang  <tony@chromium.org>

        Reviewed by David Levin.

        fix chromium linux compile on ubuntu maverick
        https://bugs.webkit.org/show_bug.cgi?id=42528

        * Scripts/webkitdirs.pm: add a chomp to eat a newline that breaks the make command line

2010-07-19  Adam Roben  <aroben@apple.com>

        When dumping a response's MIME type, print its URL's last path
        component rather than its suitable-for-test-result form

        This matches the Mac behavior.

        Fixes <http://webkit.org/b/42276>
        http/tests/loading/preload-slow-loading.php and
        http/tests/mime/uppercase-mime-type.html fail on Windows

        Reviewed by Anders Carlsson.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (urlSuitableForTestResult): Moved code to actually extract the last
        path component from here...
        (lastPathComponent): ...to here.

        * DumpRenderTree/win/DumpRenderTreeWin.h: Added lastPathComponent.

        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::didReceiveResponse): Use the URL's last path
        component, rather than its suitable-for-test-result form, to match
        Mac.

2010-07-19  Anders carlsson  <andersca@apple.com>

        Reviewed by Adam Roben.

        WebKit2 does not have application cache
        https://bugs.webkit.org/show_bug.cgi?id=42552

        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::resetPreferencesToConsistentValues):
        Set up default preferences. Right now just enables the web application cache.

        (WTR::TestInvocation::invoke):
        Call resetPreferencesToConsistentValues.

        * WebKitTestRunner/TestInvocation.h:

2010-07-19  Kent Tamura  <tkent@chromium.org>

        Reviewed by Adam Roben.

        Fix NewRunWebKitTests to work on Windows.
        https://bugs.webkit.org/show_bug.cgi?id=41180

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
          Specifying python explicitly.

2010-07-18  Anders Carlsson  <andersca@apple.com>

        Reviewed by Dan Bernstein.

        Add dumping of statusbar text to WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=42516

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::InjectedBundlePage):
        (WTR::InjectedBundlePage::_setStatusbarText):
        (WTR::InjectedBundlePage::setStatusbarText):
        Dump the statusbar text.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::LayoutTestController):
        Initialize m_dumpStatusCallbacks to false.

        (WTR::dumpStatusCallbacksCallback):
        Implement JSC callback.

        (WTR::LayoutTestController::staticFunctions):
        Add dumpStatusCallbacks.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (WTR::LayoutTestController::dumpStatusCallbacks):
        (WTR::LayoutTestController::setDumpStatusCallbacks):
        Add setter and getter for m_dumpStatusCallbacks.

2010-07-17  Anders Carlsson  <andersca@apple.com>

        Reviewed by Maciej Stachowiak.

        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):
        Get the test plug-in path and set it on the context.

        * WebKitTestRunner/TestController.h:
        * WebKitTestRunner/mac/TestControllerMac.mm:
        (WTR::TestController::initializeInjectedBundlePath):
        Simplify this code by using NSBundle.

        (WTR::TestController::testPluginPath):
        Return the test plug-in path.

        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::testPluginPath):
        Ditto.

2010-07-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Teach webkitpy about queues.webkit.org
        https://bugs.webkit.org/show_bug.cgi?id=42492

        * Scripts/webkitpy/common/net/statusserver.py:

2010-07-16  Ada Chan  <adachan@apple.com>

        Reviewed by Alice Liu.

        Fix Windows build.

        * WebKitTestRunner/InjectedBundle/win/InjectedBundle.vcproj:

2010-07-16  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Fix for https://bugs.webkit.org/show_bug.cgi?id=42482
        <rdar://problem/8197701>
        Add notification of when the BackForwardList changes
        to aid invalidation of Back/Forward related UI elements.

        * MiniBrowser/mac/BrowserWindowController.m:
        (_didStartProvisionalLoadForFrame):
        (_didCommitLoadForFrame):
        (_didFailLoadWithErrorForFrame):
        (_didChangeBackForwardList):
        (-[BrowserWindowController awakeFromNib]):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2010-07-16  Kent Tamura  <tkent@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] <input type=number> UI implementation for Windows
        https://bugs.webkit.org/show_bug.cgi?id=42259

        * DumpRenderTree/chromium/WebThemeEngineDRT.cpp:
        (WebThemeEngineDRT::paintSpinButton):
         Added. Check state consistency and use existing arrow painting code.
        * DumpRenderTree/chromium/WebThemeEngineDRT.h:

2010-07-16  Alice Liu  <alice.liu@apple.com>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=42430
        Make WebKitTestRunner on Windows actually load and run a test

        * WebKitTestRunner/InjectedBundle/InjectedBundleMain.cpp: Export WKBundleInitialize.
        (WKBundleInitialize):
        * WebKitTestRunner/InjectedBundle/win/InjectedBundle.vcproj: Added.  Output is a dll.
        * WebKitTestRunner/TestInvocation.cpp: Create a Windows-style path on Windows
        (WTR::createWKURL):
        * WebKitTestRunner/WebKitTestRunnerPrefix.h: Change check for Windows platform to match
        other existing checks, and avoid including Platform.h
        * WebKitTestRunner/win/PlatformWebViewWin.cpp:
        (WTR::registerWindowClass): Added.
        (WTR::PlatformWebView::PlatformWebView): Implemented.
        (WTR::PlatformWebView::~PlatformWebView): Implemented.
        (WTR::PlatformWebView::page): Implemented.
        * WebKitTestRunner/win/TestControllerWin.cpp:
        (WTR::TestController::initializeInjectedBundlePath): Implemented. Provide build 
        configuration specific path to InjectedBundle.dll.
        * WebKitTestRunner/win/TestInvocationWin.cpp:
        (WTR::TestInvocation::runUntil): Implemented.
        * WebKitTestRunner/win/WebKitTestRunner.sln: Added InjectedBundle project.
        * WebKitTestRunner/win/WebKitTestRunner.vcproj: Cleaned up unnecessary dependencies.

2010-07-16  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig.

        Make revalidation of back/forward work a little better with page loads
        https://bugs.webkit.org/show_bug.cgi?id=42470

        * MiniBrowser/mac/BrowserWindow.xib:
        * MiniBrowser/mac/BrowserWindowController.h:
        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController validateToolbar]):
        (_didStartProvisionalLoadForFrame):
        (_didCommitLoadForFrame):
        (_didFailLoadWithErrorForFrame):

2010-07-16  Nikolas Zimmermann  <nzimmermann@rim.com>

        Reviewed by Dirk Schulze.

        Add possibility to dumpAsText and generate a pixel test result
        https://bugs.webkit.org/show_bug.cgi?id=42374

        Add optional parameter to setDumpAsText() to allow generating a pixel test result even if dumpAsText mode.
        setDumpAsText(true) will also generate a pixel test result now, when running run-webkit-tests --pixel-tests.

        This is needed for the svg/dynamic-updates tests, which don't want render tree dumps but text dumps + a pixel test result.
        At some point DRT changed to not generate pixel test results when using dumpAsText - which makes sense, but breaks the svg/dynamic-updates test.

        Implemented for all DRT platforms, except Qt, as it's not clear how arguments to functions like "setDumpAsText" are handled.
        (Qt always dumps pixel tests when using --pixel-tests mode, so it does not break anything)

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (dumpAsTextAndPixelsCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::dumpAsTextAndPixels):
        (LayoutTestController::setDumpAsTextAndPixels):
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::dumpAsTextAndPixels):
        (LayoutTestController::reset):
        * DumpRenderTree/chromium/LayoutTestController.h:
        (LayoutTestController::shouldDumpAsTextAndPixels):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::dump):
        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (dump):
        * DumpRenderTree/mac/DumpRenderTree.mm:
        (dump):
        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::dump):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (dump):
        * DumpRenderTree/wx/DumpRenderTreeWx.cpp:
        (dump):

2010-07-16  Kent Hansen  <kent.hansen@nokia.com>

        Unreviewed. Adding myself as committer.

        * Scripts/webkitpy/common/config/committers.py:

2010-07-16  Shinichiro Hamaji  <hamaji@chromium.org>

        Another uneviewed attempt to fix build.

        Printing test results differ between machines, we should use ImageDiff instead
        https://bugs.webkit.org/show_bug.cgi?id=20011

        * DumpRenderTree/mac/PixelDumpSupportMac.mm:
        (createPagedBitmapContext):

2010-07-16  Shinichiro Hamaji  <hamaji@chromium.org>

        Unreviewed tiger build fix.

        Printing test results differ between machines, we should use ImageDiff instead
        https://bugs.webkit.org/show_bug.cgi?id=20011

        * DumpRenderTree/mac/PixelDumpSupportMac.mm:
        (createBitmapContext):
        (createBitmapContextFromWebView):

2010-07-15  Shinichiro Hamaji  <hamaji@chromium.org>

        Unreviewed build fix.

        Printing test results differ between machines, we should use ImageDiff instead
        https://bugs.webkit.org/show_bug.cgi?id=20011

        * DumpRenderTree/PixelDumpSupport.cpp:
        (dumpWebViewAsPixelsAndCompareWithExpected):

2010-07-15  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Darin Adler.

        Printing test results differ between machines, we should use ImageDiff instead
        https://bugs.webkit.org/show_bug.cgi?id=20011

        * DumpRenderTree/PixelDumpSupport.cpp:
        (dumpWebViewAsPixelsAndCompareWithExpected):
        * DumpRenderTree/PixelDumpSupport.h:
        * DumpRenderTree/mac/PixelDumpSupportMac.mm:
        (createBitmapContext): This function was added to share bitmap context creation code.
        (createBitmapContextFromWebView):
        (createPagedBitmapContext):

2010-07-15  Yuta Kitamura  <yutak@chromium.org>

        Reviewed by Kent Tamura.

        Pull in pywebsocket-0.5.1
        https://bugs.webkit.org/show_bug.cgi?id=42353

        pywebsocket-0.5.1 contains a small bug fix (*) that should fix a worker test
        in Chromium. There is no other functional change.

        (*) http://code.google.com/p/pywebsocket/source/detail?r=265

        * Scripts/webkitpy/thirdparty/__init__.py: Bump pywebsocket version to 0.5.1.

2010-07-15  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig.

        Add toolbar and toolbar item validation for MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=42422

        * MiniBrowser/MBToolbarItem.h: Added.
        * MiniBrowser/MBToolbarItem.m: Added.
        (-[MBToolbarItem validate]):

        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController validateUserInterfaceItem:]):

        * MiniBrowser/MiniBrowser.xcodeproj/project.pbxproj:
        * MiniBrowser/mac/BrowserWindow.xib:

2010-07-15  Victor Wang  <victorw@chromium.org>

        Unreviewed, add victorw irc nickname to committer list.

        * Scripts/webkitpy/common/config/committers.py:

2010-07-15  Adam Roben  <aroben@apple.com>

        Make killing Apache more reliable (on both Mac and Windows)

        We previously had two ways of determining whether we had succeeded in
        killing Apache:
          1) checking the return value of kill(0, $apachePID)
          2) checking whether Apache's PID file still exists

        On Cygwin, Apache doesn't always delete its PID file when it exits,
        making (2) unreliable. We unfortunately misdiagnosed this as an
        impotency of Perl's kill function, which led to r63177 and r63355.

        Now that we know that the real problem is that Apache doesn't always
        delete its PID file on Windows, we can make a much better fix: always
        use method (1) to determine whether we've killed Apache.

        Fixes <http://webkit.org/b/42415> Killing Apache is unreliable,
        leading to regression test failures (and general annoyance).

        Reviewed by Anders Carlsson.

        * Scripts/webkitperl/httpd.pm:
        (openHTTPD): Moved killing code from here to killHTTPD. Added a call
        to delete the PID file in case Apache doesn't do this itself when
        killed. Our later logic relies on the PID file being deleted after
        this point.
        (closeHTTPD): Removed killing logic and changed to just call killHTTPD
        instead. killHTTPD's logic is a bit different from the logic we had
        here, for the reasons stated above.
        (killHTTPD): Added. Code came from openHTTPD.
        (handleInterrupt): Bonus fix for Mac: don't hang when pressing Ctrl-C!
        On Mac, don't try to kill Apache when we receive a signal, as Apache
        will already have been killed by this point (though for some reason
        this isn't detected by our killing logic in killHTTPD). On Cygwin, we
        still need to kill Apache manually.

2010-07-15  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=42399
        Update MiniBrowser for WKFrameNavigationType 

        * MiniBrowser/mac/BrowserWindowController.m:
        (_decidePolicyForNavigationAction):
        (_decidePolicyForNewWindowAction):

2010-07-15  Stephanie Lewis  <slewis@apple.com>

        Reviewed by Geoff Garen.

        http://bugs.webkit.org/show_bug.cgi?id=42406
        Make SunSpider work better with roots.

        * Scripts/sunspider-compare-results: fix argument bug
        * Scripts/webkitdirs.pm: look inside JavaScriptCore if jsc isn't top-level.

2010-07-15  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig.

        Hook up back/forward in MiniBrowser
        https://bugs.webkit.org/show_bug.cgi?id=42397

        * MiniBrowser/mac/BrowserWindow.xib:
        * MiniBrowser/mac/BrowserWindowController.h:
        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController goBack:]):
        (-[BrowserWindowController goForward:]):

2010-07-15  Daniel Bates  <dbates@rim.com>

        Reviewed by Darin Adler.

        [Mac] Implement LayoutTestController::markerTextForListItem()
        https://bugs.webkit.org/show_bug.cgi?id=37929

        Implements DRT support for markerTextForListItem in the Mac port.

        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::markerTextForListItem): Implemented.

2010-07-15  Adam Barth  <abarth@webkit.org>

        Unreviewed.

        Update the port names to be more specific.  Before this patch,
        port-specific results for Mac would end up in the wrong place.

        * Scripts/webkitpy/tool/commands/rebaseline.py:
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py:

2010-07-14  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        WebKit needs a rebaselining tool (finally)
        https://bugs.webkit.org/show_bug.cgi?id=42339

        This is a very basic rebaselining tool.  It's not
        quite as fancy as chromium's as it will only handle
        updating failing results.  It cannot yet handle adding new
        results, or updating results where the results should not
        replace existing results.

        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/tool/commands/__init__.py:
        * Scripts/webkitpy/tool/commands/queries.py:
        * Scripts/webkitpy/tool/commands/rebaseline.py: Added.
        * Scripts/webkitpy/tool/commands/rebaseline_unittest.py: Added.

2010-07-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r63352.
        http://trac.webkit.org/changeset/63352
        https://bugs.webkit.org/show_bug.cgi?id=42341

        Broke plugin-initiate-popup-window.html and plugin-javascript-
        access.html on snow leopard (Requested by abarth on #webkit).

        * DumpRenderTree/TestNetscapePlugIn/PluginObject.cpp:
        (pluginAllocate):
        * DumpRenderTree/TestNetscapePlugIn/PluginObject.h:
        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_New):
        (handleEventCarbon):
        (handleEventCocoa):

2010-07-14  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Mark Rowe.

        Lower WebKitTestRunner notifyDone timeout to 6.0 for now, to make it easier to grind through the failures.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:

2010-07-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r63346.
        http://trac.webkit.org/changeset/63346
        https://bugs.webkit.org/show_bug.cgi?id=42295

        Broke lots of tests, some of which probably just need new
        results (Requested by aroben on #webkit).

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (urlSuitableForTestResult):

2010-07-14  Adam Roben  <aroben@apple.com>

        Speed up killing of Apache on Windows

        Fixes <http://webkit.org/b/42289> Killing Apache (and thus quitting
        run-webkit-tests) takes a long time on Windows

        Reviewed by Darin Adler and Jon Honeycutt.

        * Scripts/webkitperl/httpd.pm:
        (closeHTTPD): Use taskkill to kill Apache and its child processes.
        Perl's kill seems ineffectual. We were already using taskkill, but
        only after trying kill 20 times. Since kill never works, let's just
        skip it entirely.

2010-07-14  Johnny Ding  <jnd@chromium.org>

        Reviewed by Adam Barth.

        https://bugs.webkit.org/show_bug.cgi?id=41292
        Add a new parameter to the test plugin to allow to specify a script and a
        mouse/keyboard event. The specified script will be evaluated in the browser
        when the specified event is received by the plugin.

        * DumpRenderTree/TestNetscapePlugIn/PluginObject.cpp:
        (pluginAllocate):
        * DumpRenderTree/TestNetscapePlugIn/PluginObject.h:
        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_New):
        (handleEventCarbon):
        (handleEventCocoa):

2010-07-14  Adam Roben  <aroben@apple.com>

        Make urlSuitableForTestResult work for http: URLs, too

        Fixes <http://webkit.org/b/42276>
        http/tests/loading/preload-slow-loading.php and
        http/tests/mime/uppercase-mime-type.html fail on Windows.

        Reviewed by Darin Adler.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (urlSuitableForTestResult): Don't bail if the URL starts with http://.
        We want this function to work for those URLs, too!

2010-07-13  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Oliver Hunt.

        Add placebo versions of some repaint test functions to WebKitTestRunner - good enough for non-pixel tests
        https://bugs.webkit.org/show_bug.cgi?id=42227

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::LayoutTestController): Initialize new bool
        members.
        (WTR::LayoutTestController::display): Dummy method.
        (WTR::displayCallback): Call the dummy.
        (WTR::repaintSweepHorizontallyCallback): ditto
        (WTR::testRepaintCallback): ditto
        (WTR::LayoutTestController::staticFunctions): Expose new methods.
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (WTR::LayoutTestController::setTestRepaint): Set the flag (which currently does
        nothing).
        (WTR::LayoutTestController::setTestRepaintSweepHorizontally): ditto

2010-07-13  Andreas Kling  <andreas.kling@nokia.com>

        Unreviewed. Adding myself as committer.

        * Scripts/webkitpy/common/config/committers.py:

2010-07-07  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Darin Adler.

        Prevent assertion/duplicate loads for non-deferred subtitute-data loads

        https://bugs.webkit.org/show_bug.cgi?id=30879

        MainResourceLoader uses the member m_initialRequest to store requests for future
        deferred loads. When doing the actual load in handleDataLoadNow(), we therefore
        have to clear this request so that subsequent entries into the loader will not
        start yet another load.

        This can happen as a result of a PageGroupLoadDeferrer going out of scope when
        returning from Chrome::runJavaScriptAlert(), which calls setDeferredLoading(false),
        but only in the case of using both substitute-data and non-deferred main resource
        load together. That's why two new DRT functions were added:

         * queueLoadHTMLString()
         * setDeferMainResourceLoad()

        The change adds DRT hooks for Mac, Win and Qt for these two functions. For Mac
        and Win the hook uses new SPI in WebDataSource. For Qt a new static member was
        added to the FrameLoaderClientQt and accessed though DumpRenderTreeSupportQt.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (queueLoadHTMLStringCallback):
        (setDeferMainResourceDataLoadCallback):
        (LayoutTestController::staticFunctions):
        (LayoutTestController::queueLoadHTMLString):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::deferMainResourceDataLoad):
        (LayoutTestController::setDeferMainResourceDataLoad):
        * DumpRenderTree/WorkQueueItem.h:
        (LoadHTMLStringItem::LoadHTMLStringItem):
        * DumpRenderTree/gtk/WorkQueueItemGtk.cpp:
        (LoadHTMLStringItem::invoke):
        * DumpRenderTree/mac/ResourceLoadDelegate.mm:
        (-[ResourceLoadDelegate webView:resource:willSendRequest:redirectResponse:fromDataSource:]):
        * DumpRenderTree/mac/WorkQueueItemMac.mm:
        (LoadHTMLStringItem::invoke):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setDeferMainResourceDataLoad):
        (LayoutTestController::queueLoadHTMLString):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        * DumpRenderTree/qt/WorkQueueItemQt.cpp:
        (LoadHTMLStringItem::invoke):
        * DumpRenderTree/qt/WorkQueueItemQt.h:
        (LoadHTMLStringItem::LoadHTMLStringItem):
        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::willSendRequest):
        * DumpRenderTree/win/WorkQueueItemWin.cpp:
        (LoadHTMLStringItem::invoke):
        * DumpRenderTree/wx/WorkQueueItemWx.cpp:
        (LoadHTMLStringItem::invoke):

2010-07-13  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Nikolas Zimmermann.

        Activate test fonts for layout tests in WebKitTestRunner (on Mac)
        https://bugs.webkit.org/show_bug.cgi?id=42153

        * WebKitTestRunner/InjectedBundle/ActivateFonts.h: Added.
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::initialize): Activate fonts on startup.
        * WebKitTestRunner/InjectedBundle/mac: Added.
        * WebKitTestRunner/InjectedBundle/mac/ActivateFonts.mm: Added.
        (WTR::activateFonts): Activate our fonts.
        * WebKitTestRunner/InjectedBundle/win: Added.
        * WebKitTestRunner/InjectedBundle/win/ActivateFonts.cpp: Added.
        (WTR::activateFonts): Dummy version.
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj: Copy fonts to bundle;
        add more files.
        * WebKitTestRunner/fonts: Added.
        * WebKitTestRunner/fonts/AHEM____.TTF: Added.
        * WebKitTestRunner/fonts/ColorBits-A.png: Added.
        * WebKitTestRunner/fonts/ColorBits.ttf: Added.
        * WebKitTestRunner/fonts/WebKit Layout Tests 2.ttf: Added.
        * WebKitTestRunner/fonts/WebKit Layout Tests.ttf: Added.
        * WebKitTestRunner/fonts/WebKitWeightWatcher100.ttf: Added.
        * WebKitTestRunner/fonts/WebKitWeightWatcher200.ttf: Added.
        * WebKitTestRunner/fonts/WebKitWeightWatcher300.ttf: Added.
        * WebKitTestRunner/fonts/WebKitWeightWatcher400.ttf: Added.
        * WebKitTestRunner/fonts/WebKitWeightWatcher500.ttf: Added.
        * WebKitTestRunner/fonts/WebKitWeightWatcher600.ttf: Added.
        * WebKitTestRunner/fonts/WebKitWeightWatcher700.ttf: Added.
        * WebKitTestRunner/fonts/WebKitWeightWatcher800.ttf: Added.
        * WebKitTestRunner/fonts/WebKitWeightWatcher900.ttf: Added.

2010-07-13  Dumitru Daniliuc  <dumi@chromium.org>

        Reviewed by Eric Seidel.

        Remove check-header-includes, as it didn't turn out to be very useful.
        https://bugs.webkit.org/show_bug.cgi?id=41970

        * Scripts/check-header-includes: Removed.

2010-07-12  Steve Falkenburg  <sfalken@apple.com>

        Reviewed by Maciej Stachowiak.

        Make WebKit2 be built by build-webkit (so it will be built by build.webkit.org bots)
        https://bugs.webkit.org/show_bug.cgi?id=40922
        
        Always build WebKit2 on Windows. Necessary since our WebKit build on
        Windows is packaged into a DLL with WebKit2.

        * Scripts/build-webkit: Always build WebKit2 on Windows.

2010-07-12  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Steve Falkenburg.

        One http test timing out on Windows can cause all future tests to time out
        https://bugs.webkit.org/show_bug.cgi?id=42146
        
        There have been multiple times on the Windows bots where one http test timing out causes all future
        http tests to time out. This is because the httpd process becomes unresponsive. When an http test
        times out, we should restart httpd on Cygwin to prevent this.

        * Scripts/old-run-webkit-tests: If an http test timed out on Cygwin, close httpd and restart it.
        * Scripts/webkitperl/httpd.pm: Add additional logic to closeHTTPD to teach it about taskkill if
            using kill fails.

2010-07-12  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Dan Bernstein.

        Remove use of auto_ptr in WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=42134
        
        Replaced auto_ptr with PassOwnPtr / OwnPtr.

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::WKStringToUTF8):
        (WTR::InjectedBundlePage::dump):
        (WTR::InjectedBundlePage::addMessageToConsole):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::WKStringToUTF8):
        (WTR::TestInvocation::didRecieveMessageFromInjectedBundle):

2010-07-12  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Sam Weinig.

        Need support for a WebKit2-specific Skipped list (and initially add accessibility tests to it)
        https://bugs.webkit.org/show_bug.cgi?id=42132

        * Scripts/old-run-webkit-tests: In --webkit-test-runner mode, add mac-wk2 to list of
        platform directories.

2010-07-12  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Anders Carlsson.

        Make WebKitTestRunner resize the view specially for the W3C SVG tests.
        https://bugs.webkit.org/show_bug.cgi?id=42126

        * WebKitTestRunner/PlatformWebView.h:
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::TestInvocation): Store the path as a C
        string for later use.
        (WTR::TestInvocation::~TestInvocation):
        (WTR::sizeWebViewForCurrentTest): Resize the WebView to the proper
        size, depending on whether this is a W3C SVG test.
        (WTR::TestInvocation::invoke): Call the size function.
        * WebKitTestRunner/TestInvocation.h:
        * WebKitTestRunner/mac/PlatformWebViewMac.mm:
        (WTR::PlatformWebView::resizeTo): Implement.
        * WebKitTestRunner/win/PlatformWebViewWin.cpp:
        (WTR::PlatformWebView::resizeTo): Placeholder.

2010-07-12  Mario Sanchez Prada  <msanchez@igalia.com>

        Reviewed by Xan Lopez.

        Ensure DRT loads GAIL (Gtk+ module), for a11y tests
        https://bugs.webkit.org/show_bug.cgi?id=38648

        Add the GTK_MODULES envvar (set to "gail") to the clean
        environment when running DRT for the Gtk+ port

        * Scripts/old-run-webkit-tests:

2010-07-12  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Dirk Schulze.

        [GTK] Support pixel tests
        https://bugs.webkit.org/show_bug.cgi?id=31518

        Finish support for pixel tests on GTK+.

        * DumpRenderTree/PixelDumpSupport.cpp: Remove unecessary RetainPtr include (only
        works on CoreFoundation systems) and add missing cstdio include.
        * DumpRenderTree/cairo/PixelDumpSupportCairo.cpp: Switch to using the MD5 support found
        in JSC library. MD5.cpp and MD5.h are only available for the Windows build.
        (computeMD5HashStringForBitmapContext): The number of bytes per row should be the row stride
        of the image, not the row stride multiplied by the width. Use JSC MD5 implementation to calculate
        the MD5 hash here. According to glibc manpages, using snprintf to build a string in unsupported
        by the ANSI standard and this fails on Linux, so unroll the loop here.
        * DumpRenderTree/cairo/PixelDumpSupportCairo.h: Correct some constructor misbehavior.
        (BitmapContext::BitmapContext): There is no reason to check the value of the
        m_context member in the constructor and it certainly should not be freed. Instead
        just initialize it with the incoming value.
        * DumpRenderTree/gtk/DumpRenderTree.cpp: Fix the order of includes.
        (dump): Actually call dumpWebViewAsPixelsAndCompareWithExpected when it is time to
        dump pixels.
        * DumpRenderTree/gtk/PixelDumpSupportGtk.cpp: Added.
        (createBitmapContextFromWebView):
        * GNUmakefile.am: Add new files to the build.

2010-07-12  Adam Barth  <abarth@webkit.org>

        Unreviewed.

        Remove stray "raise e" that got included in a previous patch.  This
        caused the EWS bots to turn red instead of purple when a patch failed
        to apply.

        * Scripts/webkitpy/tool/commands/stepsequence.py:

2010-07-12  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r63101.
        http://trac.webkit.org/changeset/63101
        https://bugs.webkit.org/show_bug.cgi?id=42103

        Broke one API test (Requested by xan_ on #webkit).

        * Scripts/old-run-webkit-tests:

2010-07-12  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Adam Roben.

        https://bugs.webkit.org/show_bug.cgi?id=13075
        XMLHttpRequest with failed authentication should set status to 401

        https://bugs.webkit.org/show_bug.cgi?id=6871
        <rdar://problem/3363403> 401 error page is never shown

        Fix crashes in Windows DumpRenderTree.

        * DumpRenderTree/win/ResourceLoadDelegate.cpp: (ResourceLoadDelegate::didReceiveAuthenticationChallenge):
        If we return an error, WebKit will call continueWithoutCredentialForAuthenticationChallenge()
        again on a destroyed sender.

2010-07-12  Adam Roben  <aroben@apple.com>

        Windows failure-to-launch fix

        * DumpRenderTree/win/DumpRenderTree.vcproj: Copy CoreVideo.dll and
        CoreVideo.pdb into WebKitOutputDir in the post-build event, too, like
        we already do for CoreFoundation, CFNetwork, etc.

2010-07-12  Mario Sanchez Prada  <msanchez@igalia.com>

        Reviewed by Xan Lopez.

        Ensure DRT loads GAIL (Gtk+ module), for a11y tests
        https://bugs.webkit.org/show_bug.cgi?id=38648

        Add the GTK_MODULES envvar (set to "gail") to the clean
        environment when running DRT for the Gtk+ port

        * Scripts/old-run-webkit-tests:

2010-07-09  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=13075
        XMLHttpRequest with failed authentication should set status to 401

        https://bugs.webkit.org/show_bug.cgi?id=6871
        <rdar://problem/3363403> 401 error page is never shown

        * DumpRenderTree/mac/ResourceLoadDelegate.mm:
        (-[ResourceLoadDelegate webView:resource:didReceiveAuthenticationChallenge:fromDataSource:]):
        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::didReceiveAuthenticationChallenge):
        Do respond even if handlesAuthenticationChallenges() is false. Pretend that the user pressed
        the Cancel button.

2010-07-12  Andreas Kling  <andreas.kling@nokia.com>

        Reviewed by Tor Arne Vestbø.

        [Qt] Add location bar (Ctrl+L) shortcut in QtTestBrowser
        https://bugs.webkit.org/show_bug.cgi?id=42082

        * QtTestBrowser/main.cpp:
        (LauncherWindow::createChrome):
        * QtTestBrowser/mainwindow.cpp:
        (MainWindow::openLocation):
        * QtTestBrowser/mainwindow.h:

2010-07-12  Adam Roben  <aroben@apple.com>

        Make the Python autoinstaller not use a dead SourceForge server

        Fixes <http://webkit.org/b/42080> webkit-patch is broken due to
        offline SourceForge server

        Reviewed by Anders Carlsson.

        * Scripts/webkitpy/thirdparty/__init__.py: Use
        surfnet.dl.sourceforge.net instead of hivelocity.dl.sourceforge.net,
        which seems to be down.

2010-07-12  Adam Roben  <aroben@apple.com>

        Make run-webkit-tests print how many tests timed out when exiting
        early

        The number of timed-out tests is taken into account when deciding
        whether to exit early. Leaving it out of the output just makes the
        script look buggy (because it might say something like "Exiting early
        after 0 crashes.").

        Fixes <http://webkit.org/b/42077> run-webkit-tests prints confusing
        messages when exiting early due to crashes and time-outs

        Reviewed by Anders Carlsson.

        * Scripts/old-run-webkit-tests:
        (stopRunningTestsEarlyIfNeeded): When stopping, print the number of
        timed-out tests, too.

2010-07-11  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Dan Bernstein.

        Implement animation-related methods for WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=42053
        
        Implemented numberOfActiveAnimatiosn and pauseAnimationAtTimeOnElementWithId. Many
        animation tests were hanging otherwise.

        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::numberOfActiveAnimations):
        (WTR::LayoutTestController::pauseAnimationAtTimeOnElementWithId):
        (WTR::numberOfActiveAnimationsCallback):
        (WTR::pauseAnimationAtTimeOnElementWithIdCallback):
        (WTR::LayoutTestController::staticFunctions):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:

2010-07-11  Daniel Bates  <dbates@rim.com>

        Reviewed by David Kilzer.

        Enable executable support for svn-apply and svn-unapply
        https://bugs.webkit.org/show_bug.cgi?id=39409

        Connect up the Git and SVN executable bit support in parseDiff() so that
        executable bit changes are propagated via the returned diff hash to the
        patch function in svn-apply and svn-unapply.

        * Scripts/VCSUtils.pm:
          - Modified parseDiff() to call parseSvnDiffProperties when
            it finds the start of an SVN property change diff.
          - Removed FIXME comment above parseSvnDiffProperties() since
            it is now being used by parseDiff().
          - Export method scmToggleExecutableBit() now that we added the
            executableBitDelta hash key. (This should have been exported
            when we added this function in Bug #38423 <https://bugs.webkit.org/show_bug.cgi?id=38423>).
        * Scripts/webkitperl/VCSUtils_unittest/parseDiff.pl:
          - Updated results for:
            "rename (with executable bit change)"
              - Test value of executableBitDelta (now that we have support).
            "SVN: binary file (isBinary true)"
              - Remove the property change diff from svnConvertedText. We plan
                to remove svnConvertedText in the future. So, we decided
                against adding such support to any new code, such as the
                property parsing routines. Therefore, we do not keep SVN
                converted text for property change diffs.
          - Added unit tests:
            "SVN: file change diff with property change diff"
            "SVN: file change diff, followed by property change diff on different file"
            "SVN: property diff, followed by file change diff"
            "SVN: copied file with property change"
            "SVN: two consecutive property diffs"
            "SVN: binary file with executable bit change"
            "SVN: binary file followed by property change on different file"
            "SVN: binary file followed by file change on different file"
            "SVN: file change diff with property change, followed by property change diff"
            "SVN: file change diff with property change, followed by file change diff"

2010-07-11  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Dan Bernstein.

        Implement waitUntilDone and notifyDone for WebKitTestRunner
        https://bugs.webkit.org/show_bug.cgi?id=42049

        With this fix, most of the DOM tests pass.
        
        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::didCreatePage): Track the main page. Not
        a great way to do it in the future case where we may get multiple
        pages - we really need a way to send it over from the ui process.
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (WTR::InjectedBundle::page): A way to get the main page.
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::InjectedBundlePage): Initialize m_isLoading to false.
        (WTR::InjectedBundlePage::didStartProvisionalLoadForFrame): Track that we
        are loading.
        (WTR::InjectedBundlePage::dump): Factor into a method so this can be
        called by the layout test controller. Also, cancel any pending watchdogs.
        (WTR::InjectedBundlePage::didFinishLoadForFrame): Note that we are done loading.
        (WTR::InjectedBundlePage::didFailLoadWithErrorForFrame): Ditto.
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:
        (WTR::InjectedBundlePage::isLoading): A way to track if we are loading.
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp:
        (WTR::LayoutTestController::LayoutTestController): Initialize m_waitToDump
        to false.
        (WTR::LayoutTestController::invalidateWaitToDumpWatchdog): Invalidate 
        the watchdog.
        (WTR::waitUntilDoneWatchdogFired): Static helper for the watchdog timer.
        (WTR::LayoutTestController::setWaitToDump): Set the flag.
        (WTR::LayoutTestController::waitToDumpWatchdogTimerFired): Handle the case
        where waitUntilDone times out.
        (WTR::LayoutTestController::notifyDone): Dump, if loading is done.
        (WTR::waitUntilDoneCallback): JS glue for waitUntilDone.
        (WTR::notifyDoneCallback): JS glue for notifyDone.
        (WTR::LayoutTestController::staticFunctions): Add waitUntilDone and notifyDone
        to the layoutController.
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h:
        (WTR::LayoutTestController::waitToDump): Inline method to get the wait state.

2010-07-09  Brian Weinstein  <bweinstein@apple.com>

        Rubber-stamped by Dan Bernstein.

        Windows testers running Windows 7 were hanging during test_kill_process. Changing the
        number of attempts from 3 to 10 fixes the problem on the new bots (and doesn't seem to
        slow down the tests).

        * Scripts/webkitpy/common/system/executive.py:

2010-07-09  Luiz Agostini  <luiz.agostini@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Mac build fix
        https://bugs.webkit.org/show_bug.cgi?id=41967

        Adding file PluginObjectMac.mm and frameworks Cocoa and QuartzCore.

        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:

2010-07-09  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Antonio Gomes.

        [Qt] [WebKit2] Add navigation actions to MiniBrowser toolbar
        https://bugs.webkit.org/show_bug.cgi?id=41966

        * MiniBrowser/qt/BrowserWindow.cpp:
        (BrowserWindow::BrowserWindow):

2010-07-09  Leon Clarke  <leonclarke@google.com>

        Reviewed by Adam Barth.

        add support for link prefetching
        https://bugs.webkit.org/show_bug.cgi?id=3652

        * Scripts/build-webkit:

2010-07-09  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Adam Barth.

        r63004 broke some python tests
        https://bugs.webkit.org/show_bug.cgi?id=42007

        AbstractStep now checks options.no_squash and options.squash, so
        they needed to have real values. Mock would return an object for those,
        which would then act as if the values were True.

        * Scripts/webkitpy/tool/commands/commandtest.py:
        * Scripts/webkitpy/tool/commands/download_unittest.py:
        * Scripts/webkitpy/tool/commands/stepsequence.py:
        * Scripts/webkitpy/tool/commands/upload_unittest.py:
        * Scripts/webkitpy/tool/mocktool.py:
        * Scripts/webkitpy/tool/steps/closebugforlanddiff_unittest.py:
        * Scripts/webkitpy/tool/steps/preparechangelog_unittest.py:
        * Scripts/webkitpy/tool/steps/steps_unittest.py:
        * Scripts/webkitpy/tool/steps/updatechangelogswithreview_unittest.py:
        * Scripts/webkitpy/tool/steps/validatereviewer_unittest.py:

2010-07-09  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Adam Barth.

        --squash should go away and become the default
        https://bugs.webkit.org/show_bug.cgi?id=39624

        If there are local commits and working copy changes, then prompt the user
        whether to continue. Setting git config webkit-patch.commit_should_always_squash
        true bypasses the prompt.

        --git-commit=HEAD.. operates on working copy changes only.
        --git-commit=committish operates on a range of commits as a single commit.
            e.g. --git-commit=HEAD only operates on the HEAD commit.
            --git-commit=HEAD~4..HEAD~2 will operate on HEAD~3 and HEAD~2 as a single commit.

        --no-squash and --squash are left in with descriptive error messages if used.

        * Scripts/check-webkit-style:
        * Scripts/webkitpy/common/checkout/api.py:
        * Scripts/webkitpy/common/checkout/api_unittest.py:
        * Scripts/webkitpy/common/checkout/scm.py:
        * Scripts/webkitpy/common/checkout/scm_unittest.py:
        * Scripts/webkitpy/common/net/rietveld.py:
        * Scripts/webkitpy/common/system/user.py:
        * Scripts/webkitpy/style/optparser.py:
        * Scripts/webkitpy/style_references.py:
        * Scripts/webkitpy/tool/commands/download.py:
        * Scripts/webkitpy/tool/commands/upload.py:
        * Scripts/webkitpy/tool/mocktool.py:
        * Scripts/webkitpy/tool/steps/abstractstep.py:
        * Scripts/webkitpy/tool/steps/applypatchwithlocalcommit.py:
        * Scripts/webkitpy/tool/steps/checkstyle.py:
        * Scripts/webkitpy/tool/steps/checkstyle_unittest.py: Removed.
        * Scripts/webkitpy/tool/steps/commit.py:
        * Scripts/webkitpy/tool/steps/options.py:
        * Scripts/webkitpy/tool/steps/preparechangelog.py:
        * Scripts/webkitpy/tool/steps/preparechangelogforrevert.py:
        * Scripts/webkitpy/tool/steps/updatechangelogswithreviewer.py:
        * Scripts/webkitpy/tool/steps/validatereviewer.py:

2010-07-09  Mark Rowe  <mrowe@apple.com>

        Add two new Windows test build slaves.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2010-07-09  Albert J. Wong  <ajwong@chromium.org>

        Reviewed by David Levin.

        rebaseline_chromium_webkit_tests missing --use_drt option on linux
        https://bugs.webkit.org/show_bug.cgi?id=41985

        This adds in the --use_drt option for rebaseline_chromium_webkit_tests
        so that it works on linux. This is essentially a "compile-fix" for the
        script.

        * Scripts/webkitpy/layout_tests/rebaseline_chromium_webkit_tests.py:

2010-07-09  Nico Weber  <thakis@chromium.org>

        Unreviewed. Adding myself as committer.

        * Scripts/webkitpy/common/config/committers.py:

2010-07-09  David Kilzer  <ddkilzer@apple.com>

        Revert "<http://webkit.org/b/41788> commit-log-editor: wrong ChangeLog read when invoked from subdir with git"

        This reverts commit r62692.

        * Scripts/commit-log-editor:

2010-07-08  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by Ojan Vafai.

        cleanup json_results_generator dependencies so that non-layout-tests can also use it safely
        https://bugs.webkit.org/show_bug.cgi?id=38693

        Introduced a new base class JSONResultsGeneratorBase that doesn't
        have any dependency on layout_tests packages.
        Turned JSONResultsGenerator into a wrapper class of the base class
        so that the old code can work with it during the cleanup.

        Added json_results_generator_unittest.py.

        * Scripts/webkitpy/layout_tests/layout_package/json_layout_results_generator.py:
        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:
        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator_unittest.py: Added

2010-07-09  Abhishek Arya  <inferno@chromium.org>

        Unreviewed.

        Marking myself as a committer.

        * Scripts/webkitpy/common/config/committers.py:

2010-07-09  Kenneth Rohde Christiansen  <kenneth.christiansen@openbossa.org>

        Reviewed by Antti Koivisto.

        Implement MiniBrowser for Qt.
        https://bugs.webkit.org/show_bug.cgi?id=40233

        * MiniBrowser/qt/BrowserWindow.cpp: Added.
        (createNewPage):
        (BrowserView::BrowserView):
        (BrowserView::resizeEvent):
        (BrowserView::load):
        (BrowserView::view):
        (BrowserWindow::BrowserWindow):
        (BrowserWindow::load):
        (BrowserWindow::changeLocation):
        (BrowserWindow::~BrowserWindow):
        * MiniBrowser/qt/BrowserWindow.h: Added.
        (BrowserView::~BrowserView):
        * MiniBrowser/qt/MiniBrowser.pro: Added.
        * MiniBrowser/qt/main.cpp: Added.
        (main):

2010-07-09  Jedrzej Nowacki  <jedrzej.nowacki@nokia.com>

        Reviewed by Simon Hausmann.

        Introduce the Qt autotest launcher.

        Qt autotests should be executed more frequently, ideally by the Qt
        build bot. This is the first step to provide the tests more accessible.

        [Qt] It should be easier to run all Qt's autotests.
        https://bugs.webkit.org/show_bug.cgi?id=31625

        * Scripts/run-qtwebkit-tests: Added.

2010-07-09  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        commit-queue should merge to TOT when checkout needs update
        https://bugs.webkit.org/show_bug.cgi?id=41944

        There are a bunch of different designs that are possible here.  This
        one merges to top of tree by cleaning out the working copy and
        re-applying the patch.  Once you decide to merge that way, you need to
        decide who's going to retry.  In this patch, we retry in the child
        process instead of plumbing the failure reason to the master process.

        This patch is difficult to test end-to-end, but hopefully it will work.
        :)

        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/stepsequence.py:
        * Scripts/webkitpy/tool/multicommandtool.py:
        * Scripts/webkitpy/tool/multicommandtool_unittest.py:

2010-07-09  Dumitru Daniliuc  <dumi@chromium.org>

        Reviewed by Darin Adler.

        Add a script to check for unnecessary includes in header files.
        https://bugs.webkit.org/show_bug.cgi?id=41894

        * Scripts/check-header-includes: Added.

2010-07-09  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Add --html5-treebuilder option to run-webkit-tests
        https://bugs.webkit.org/show_bug.cgi?id=41922

        We're down to one or two regressions in the HTML5lib test suite.  It's
        getting to be time to look at fixing LayoutTests.

        * Scripts/old-run-webkit-tests:

2010-07-08  Simon Fraser  <simon.fraser@apple.com>

        Fix Tiger plugin test failures; the #ifdefs were incorrect, resulting
        in the drawing model never getting set on Tiger.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_New):

2010-07-08  Aaron Boodman  <aa@chromium.org>

        Reviewed by Timothy Hatcher.

        Add the ability for user scripts and user styles to affect just the top frame.

        https://bugs.webkit.org/show_bug.cgi?id=41529

        * DumpRenderTree/LayoutTestController.h: Added new allFrames param.
        * DumpRenderTree/LayoutTestController.cpp: Ditto.
        (addUserScriptCallback):
        (addUserStyleSheetCallback):
        * DumpRenderTree/chromium/LayoutTestController.cpp: Ditto.
        (LayoutTestController::addUserScript):
        (LayoutTestController::addUserStyleSheet):
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp: Ditto.
        (LayoutTestController::addUserScript):
        (LayoutTestController::addUserStyleSheet):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm: Ditto.
        (LayoutTestController::addUserScript):
        (LayoutTestController::addUserStyleSheet):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp: Ditto.
        (LayoutTestController::addUserScript):
        (LayoutTestController::addUserStyleSheet):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp: Ditto.
        (LayoutTestController::addUserScript):
        (LayoutTestController::addUserStyleSheet):

2010-07-08  Adele Peterson  <adele@apple.com>

        Reviewed by Jon Honeycutt, Adam Roben, and Darin Adler.

        Test infrastructure for https://bugs.webkit.org/show_bug.cgi?id=41721
        <rdar://problem/8158561> Missing plug-in indicator should have a pressed state

        Log when the missing plugin button is pressed.

        * DumpRenderTree/mac/UIDelegate.mm:
        (-[UIDelegate webView:didPressMissingPluginButton:]):
        * DumpRenderTree/win/UIDelegate.cpp:
        (UIDelegate::QueryInterface):
        (UIDelegate::createWebViewWithRequest):
        (UIDelegate::drawBackground):
        (UIDelegate::decidePolicyForGeolocationRequest):
        (UIDelegate::didPressMissingPluginButton):
        * DumpRenderTree/win/UIDelegate.h:

2010-07-08  Simon Fraser  <simon.fraser@apple.com>

        Fix the Tiger build.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_New):

2010-07-08  Simon Fraser  <simon.fraser@apple.com>

        Fix windows build.

        #ifdef code for Mac.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_New):

2010-07-08  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Anders Carlsson.

        Allow the TestPlugin to use Core Animation rendering for testing
        https://bugs.webkit.org/show_bug.cgi?id=41872
        
        Add the ability for the TestPlugin to use the CoreAnimation rendering model
        when available, based on the "drawingmodel" attribute of the embed tag:
            drawingmodel="coreanimation"

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj: Add PluginObjectMac.mm
        * DumpRenderTree/TestNetscapePlugIn/PluginObject.h: Add some macros so we can detect
        when building on Tiger. Add a void* coreAnimationLayer member.
        
        * DumpRenderTree/TestNetscapePlugIn/PluginObjectMac.mm: Added.
        (createCoreAnimationLayer): Obj-C method to create the CALayer.
        
        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_New): Look for the drawingmodel attribute to decide which drawing
        model to use.
        (NPP_Destroy): Release the CALayer if we have one.
        (NPP_GetValue): Return the retained CALayer.

2010-07-08  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Support pixel tests
        https://bugs.webkit.org/show_bug.cgi?id=31518

        Convert this file from CRLF to NL line endings. It will soon
        be used on more than just the WinCairo platform.

        * DumpRenderTree/cairo/PixelDumpSupportCairo.cpp:
        (writeFunction):
        (printPNG):
        (computeMD5HashStringForBitmapContext):
        (dumpBitmap):

2010-07-08  Steve Falkenburg  <sfalken@apple.com>

        Reviewed by Darin Adler.

        Enable Data Execution Prevention for our test harnesses on Windows
        https://bugs.webkit.org/show_bug.cgi?id=41882

        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/ImageDiff.vcproj:
        * WebKitAPITest/WebKitAPITest.vcproj:
        * WebKitTestRunner/win/WebKitTestRunner.vcproj:

2010-07-07  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Add DRT support for pageProperty etc.

        https://bugs.webkit.org/show_bug.cgi?id=41584

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::isPageBoxVisible):
        (LayoutTestController::pageSizeAndMarginsInPixels):
        (LayoutTestController::pageProperty):
        (LayoutTestController::addUserStyleSheet):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-07-08  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        Remove a warnings from the ImageDiff build by using the proper
        printf format string for the gsize data type.

        * DumpRenderTree/gtk/ImageDiff.cpp:
        (printImage): Use the proper printf format string for the gsize data type.

2010-07-08  Alice Liu  <alice.liu@apple.com>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=41653
        Add new WebKitTestRunner project for Windows

        * WebKitTestRunner/WebKitTestRunnerPrefix.h: 
        Similar to how it's done in DumpRenderTree, define max and min early
        on so that they don't get replaced by a macro requiring 2 arguments.

        * WebKitTestRunner/win: Added.
        * WebKitTestRunner/win/WebKitTestRunner.sln: Added.
        * WebKitTestRunner/win/WebKitTestRunner.vcproj: Added.
        * WebKitTestRunner/win/main.cpp: Added.
        (main): Implemented

        Added these files with stubbed out functions:
        * WebKitTestRunner/win/PlatformWebViewWin.cpp: Added.
        (WTR::PlatformWebView::PlatformWebView):
        (WTR::PlatformWebView::~PlatformWebView):
        (WTR::PlatformWebView::page):
        * WebKitTestRunner/win/TestControllerWin.cpp: Added.
        (WTR::TestController::initializeInjectedBundlePath):
        * WebKitTestRunner/win/TestInvocationWin.cpp: Added.
        (WTR::TestInvocation::runUntil):

2010-07-07  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Gustavo Noronha Silva.

        [GTK] Implement ImageDiff and add it to the build system
        https://bugs.webkit.org/show_bug.cgi?id=41779

        Add the initial implementation of the ImageDiff tool for the GTK+
        port. This is an essential tool for doing pixel tests. The implementation
        is based on the Mac and Chromium ports.

        * DumpRenderTree/gtk/ImageDiff.cpp: Added.
        (readPixbufFromStdin): Added.
        (differenceImageFromDifferenceBuffer): Ditto.
        (calculateDifference): Ditto.
        (printImage): Ditto.
        (printImageDifferences): Ditto.
        (main): Ditto.
        * GNUmakefile.am: Add ImageDiff to the WebKitTools build scripts.

2010-07-08  Jay Civelli  <jcivelli@chromium.org>

        Unreviewed. Adding myself as a committer.

        * Scripts/webkitpy/common/config/committers.py:

2010-07-08  Adam Roben  <aroben@apple.com>

        Make Windows stop running tests from platform/mac

        r62742 made a change (at my suggestion!) that caused us to start
        looking for tests in platform/mac, rather than just looking for
        expected results in platform/mac. This patch just undoes that part of
        r62742.

        Fixes <http://webkit.org/b/41855> REGRESSION (r62742): Windows runs
        tests from platform/mac, but shouldn't

        Reviewed by Antti Koivisto and Anders Carlsson.

        * Scripts/old-run-webkit-tests:
        (top level): Removed "mac-snowleopard" and "mac" from @winPlatforms,
        so we won't look in those directories for tests to run.
        (expectedDirectoryForTest): Added back code from pre-r62742 to look in
        platform/mac-snowleopard and platform/mac for expected results.

2010-07-08  Antonio Gomes  <tonikitoo@webkit.org>

        Unreviewed. Adding myself as a reviewer.

        * Scripts/webkitpy/common/config/committers.py:

2010-07-08  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Update my e-mail in committers.py

        * Scripts/webkitpy/common/config/committers.py:

2010-07-07  Daniel Bates  <dbates@rim.com>

        Reviewed by Dumitru Daniliuc.

        VCSUtils.pm complains about uninitialized value $newLine
        https://bugs.webkit.org/show_bug.cgi?id=41333

        Fixes an issue where VCSUtils::fixChangeLogPatch() may read off the end of
        an array when fixing a change log entry that overlaps with an earlier
        entry. In particular, when a patch contains a change log entry inserted
        earlier in the change log file, but after an entry with the same author
        and date.

        * Scripts/VCSUtils.pm:
            - Added for-loop constraint to fixChangeLogPatch() so that it does not
              read off the end of the @overlappingLines array.
        * Scripts/webkitperl/VCSUtils_unittest/fixChangeLogPatch.pl: Added unit test.

2010-07-07  Anders Carlsson  <andersca@apple.com>

        Comment out a part of TestNetscapePlugin that caused tests to fail on Tiger and Leopard.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_New):

2010-07-07  Kent Tamura  <tkent@chromium.org>

        Reviewed by Adam Barth.

        [DRT/Chromium] Support for indeterminate checkbox
        https://bugs.webkit.org/show_bug.cgi?id=41747

        Import http://src.chromium.org/viewvc/chrome?view=rev&revision=51499

        * DumpRenderTree/chromium/WebThemeControlDRT.cpp:
        (WebThemeControlDRT::draw):
        * DumpRenderTree/chromium/WebThemeControlDRT.h:
        (WebThemeControlDRT::):
        * DumpRenderTree/chromium/WebThemeEngineDRT.cpp:
        (WebThemeEngineDRT::paintButton):

2010-07-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Mark Rowe.

        Clean up MiniBrowser Xcode project.

        - Use xcconfig files.
        - Rename plists to canonical Info.plist
        - Remove localizations.

        * MiniBrowser/Configurations: Added.
        * MiniBrowser/Configurations/Base.xcconfig: Added.
        * MiniBrowser/Configurations/DebugRelease.xcconfig: Added.
        * MiniBrowser/Configurations/MiniBrowser.xcconfig: Added.
        * MiniBrowser/Configurations/WebBundle.xcconfig: Added.
        * MiniBrowser/MiniBrowser.xcodeproj/project.pbxproj:
        * MiniBrowser/WebBundle-Info.plist: Removed.
        * MiniBrowser/mac/BrowserStatisticsWindowController.m:
        (-[BrowserStatisticsWindowController initWithThreadedWKContextRef:processWKContextRef:]):
        * MiniBrowser/mac/BrowserWindow.xib: Added.
        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController initWithPageNamespace:]):
        * MiniBrowser/mac/English.lproj: Removed.
        * MiniBrowser/mac/English.lproj/BrowserWindow.xib: Removed.
        * MiniBrowser/mac/English.lproj/InfoPlist.strings: Removed.
        * MiniBrowser/mac/English.lproj/MainMenu.xib: Removed.
        * MiniBrowser/mac/Info.plist: Copied from MiniBrowser/mac/MiniBrowser-Info.plist.
        * MiniBrowser/mac/MainMenu.xib: Added.
        * MiniBrowser/mac/MiniBrowser-Info.plist: Removed.
        * MiniBrowser/mac/WebBundle/Info.plist: Copied from MiniBrowser/WebBundle-Info.plist.

2010-07-07  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Fix two regressions
        https://bugs.webkit.org/show_bug.cgi?id=41745

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::paintInvalidatedRegion):
         Repaint three times to fix svg/W3C-SVG-1.1/struct-use-01-t.svg
         and svg/custom/use-on-g-containing-foreignObject-and-image.svg
         though test_shell does it twice. Probably DRT needs it because
         DRT delays painting as possible.

2010-07-07  Anders Carlsson  <andersca@apple.com>

        Try to fix build.

        * DumpRenderTree/unix/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_destroy_stream):

2010-07-07  Anders Carlsson  <andersca@apple.com>

        Try to fix the GTK+ and Qt test failures by merging the newly added code from TestNetscapePlugin/main.cpp

        * DumpRenderTree/unix/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_new_stream):
        (webkit_test_plugin_destroy_stream):
        (webkit_test_plugin_write_ready):
        (webkit_test_plugin_write):

2010-07-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Mark Rowe.

        Don't hard code the Mac OS X 10.6 SDK for MiniBrowser. 

        * MiniBrowser/MiniBrowser.xcodeproj/project.pbxproj:

2010-07-07  Anders Carlsson  <andersca@apple.com>

        Use the correct XP_MACOSX define instead of XP_MAC. This was causing test failures on some platforms.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_New):
        (NPP_HandleEvent):

2010-07-07  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Adam Roben.

        Need to have a way to specify different results for Windows XP and 7
        https://bugs.webkit.org/show_bug.cgi?id=41776
        
        Add the ability to have platform/win-xp, platform/win-vista, and platform/win-7
        subdirectories, so we can have different results for tests on Windows XP, Windows
        Vista, and Windows 7.

        Windows XP will try the order: win-xp, win-vista, win-7, win, mac-snowleopard, mac.
        Windows Vista will try the order: win-vista, win-7, win, mac-snowleopard, mac.
        Windows 7 will try the order: win-7, win, mac-snowleopard, mac.

        This matches the behavior of the mac.

        * Scripts/old-run-webkit-tests: Add multiple platforms for Windows, and if we are on XP
            or Vista, try looking in other win-* subdirectories before win.
        * Scripts/webkitdirs.pm: Add some helper functions to determine what version of Windows
            we are running.

2010-07-07  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Remove ASSERT_NOT_REACHED in some functions
        https://bugs.webkit.org/show_bug.cgi?id=41753

        The original code of the following functions in
        test_shell_devtools_client.cc have NOTIMPLEMENTED(), not
        ASSERT_NOT_REACHED(). The program shouldn't stop at these
        functions.

        * DumpRenderTree/chromium/DRTDevToolsClient.cpp:
        (DRTDevToolsClient::activateWindow):
        (DRTDevToolsClient::closeWindow):
        (DRTDevToolsClient::dockWindow):
        (DRTDevToolsClient::undockWindow):

2010-07-07  Anders Carlsson  <andersca@apple.com>

        Reviewed by Sam Weinig.

        Test that we call NPP_DestroyStream if a plug-in returns -1 from its NPP_Write function
        https://bugs.webkit.org/show_bug.cgi?id=41821

        * DumpRenderTree/TestNetscapePlugIn/PluginObject.cpp:
        (pluginGetProperty):
        (pluginSetProperty):
        (pluginAllocate):
        * DumpRenderTree/TestNetscapePlugIn/PluginObject.h:
        Add and initialize the returnNegativeOneFromWrite property.

        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (NPP_NewStream):
        Set the stream type to NP_NORMAL so we'll get write callbacks.

        (NPP_DestroyStream):
        Treat the onstreamdestroy attribute as a function name and not a string.

        (NPP_WriteReady):
        Have this return a nonzero value.

        (NPP_Write):
        If returnNegativeOneFromWrite is true return -1.

2010-07-07  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix for machines with both MSVC 2005 and 2008 installed. Ensures the
        latest version is selected by default, and allows the version to be specified.

        * wx/build/settings.py:

2010-07-07  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        AX: TextArea should return AXSelectedTextRange of 0,0 if the cursor is not in the text area
        https://bugs.webkit.org/show_bug.cgi?id=41810

        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::selectedTextRange):

2010-07-07  Martin Robinson  <mrobinson@igalia.com>

        Unreviewed.

        Build fix after r62700.

        * GNUmakefile.am: Update the source list to reflect the new TestNetscapePlugIn
        source file locations.

2010-07-07  Ojan Vafai  <ojan@chromium.org>

        Reviewed by David Levin.

        change --exit-after-n-crashes to --exit-after-n-crashes-or-timeouts
        https://bugs.webkit.org/show_bug.cgi?id=41814

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        * Scripts/old-run-webkit-tests:

2010-07-07  Ojan Vafai  <ojan@chromium.org>

        Reviewed by David Levin.

        add --exit-after-n-crashes to run-webkit-tests
        https://bugs.webkit.org/show_bug.cgi?id=41811

        Change the bots at build.webkit.org to use --exit-after-n-crashes
        instead of --exit-after-n-failures since we want to be able to have
        more than 20 failures on those bots, but more than 20 crashes means
        something should be rolled out.

        * Scripts/old-run-webkit-tests:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:

2010-07-07  Brian Weinstein  <bweinstein@apple.com>

        Fix the Windows build by removing win/TestNetscapePlugin/main.cpp from the
        TestNetscapePlugin project, because this was removed from the tree.

        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.vcproj:

2010-07-07  Anders Carlsson  <andersca@apple.com>

        Reviewed by Simon Fraser.

        Unify Mac and Windows TestNetscapePlugin main.cpp files
        https://bugs.webkit.org/show_bug.cgi?id=41798
        
        * DumpRenderTree/DumpRenderTree.sln:
        * DumpRenderTree/TestNetscapePlugIn/main.cpp:
        (strcasecmp):
        (NP_Initialize):
        (NP_GetEntryPoints):
        (NP_Shutdown):
        (NPP_New):
        (NPP_Destroy):
        (NPP_HandleEvent):
        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.vcproj:
        * DumpRenderTree/win/TestNetscapePlugin/main.cpp: Removed.

2010-07-07  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix. pageProperty needs to return a value.

        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::pageProperty):

2010-07-07  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/41788> commit-log-editor: wrong ChangeLog read when invoked from subdir with git

        Reviewed by Anders Carlsson.

        For both svn and git, commit-log-editor is invoked from the root
        of the working directory.  Unlike svn, git returns a list of
        changed files that are relative to the directory where the
        command was invoked.  This caused the ChangeLog file in the root
        directory to be read instead of the ChangeLog in the current
        directory.

        The fix is to use $ENV{PWD} as the base directory when fixing
        the path to the ChangeLog files.  With svn, this has no net
        effect since $ENV{PWD} is the root of the working directory and
        the ChangeLog paths are already relative to that directory.
        With git, $ENV{PWD} is the directory that the commit was invoked
        from, which fixes the ChangeLog paths so that the correct files
        are read when creating the commit log entry.

        Note that the call to makeFilePathRelative() was supposed to
        address this issue, but it doesn't because (a) it does nothing
        with svn working directories by design, and (b) it does nothing
        with git working directories because it's invoked when the
        current directory is the root of the working directory, thus
        giving no relative path.

        * Scripts/commit-log-editor: Removed call to
        makeFilePathRelative() since since it does nothing.  Moved code
        to fix up $changeLog path so that it's fixed before trying to
        open the file, and use $ENV{PWD} as the base path.  Also use
        canonicalizePath() to clean up paths with "../" in them.

2010-07-07  Anders Carlsson  <andersca@apple.com>

        Another attempt at fixing the Qt build.

        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:

2010-07-07  Anders Carlsson  <andersca@apple.com>

        Try to fix Qt build.

        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:

2010-07-07  Anders Carlsson  <andersca@apple.com>

        Reviewed by Simon Fraser.

        Rename TestNetscapePlugin.subproj and move platform specific files to subdirectories
        https://bugs.webkit.org/show_bug.cgi?id=41781

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        * DumpRenderTree/TestNetscapePlugIn/PluginObject.cpp: Renamed from WebKitTools/DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp.
        * DumpRenderTree/TestNetscapePlugIn/PluginObject.h: Renamed from WebKitTools/DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.h.
        * DumpRenderTree/TestNetscapePlugIn/TestObject.cpp: Renamed from WebKitTools/DumpRenderTree/TestNetscapePlugIn.subproj/TestObject.cpp.
        * DumpRenderTree/TestNetscapePlugIn/TestObject.h: Renamed from WebKitTools/DumpRenderTree/TestNetscapePlugIn.subproj/TestObject.h.
        * DumpRenderTree/TestNetscapePlugIn/mac/Info.plist: Renamed from WebKitTools/DumpRenderTree/TestNetscapePlugIn.subproj/Info.plist.
        * DumpRenderTree/TestNetscapePlugIn/main.cpp: Renamed from WebKitTools/DumpRenderTree/TestNetscapePlugIn.subproj/main.cpp.
        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.def: Renamed from WebKitTools/DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.def.
        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.rc: Renamed from WebKitTools/DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.rc.
        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin.vcproj: Added.
        * DumpRenderTree/TestNetscapePlugIn/win/TestNetscapePlugin_debug.def: Renamed from WebKitTools/DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin_debug.def.
        * DumpRenderTree/TestNetscapePlugIn/win/resource.h: Renamed from WebKitTools/DumpRenderTree/win/TestNetscapePlugin/resource.h.
        * DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.vcproj: Removed.

2010-07-07  Andras Becsi  <abecsi@webkit.org>

        Unreviewed trivial fix.

        Remove DUMPRENDERTREE_TEMP environment variable from NRWT
        which was checked in accidentally in r62635.

        * Scripts/webkitpy/layout_tests/port/webkit.py:

2010-07-07  Gabor Rapcsanyi  <rgabor@inf.u-szeged.hu>

        Reviewed by Eric Seidel.

        Pass port specific environment to server process.
        https://bugs.webkit.org/show_bug.cgi?id=41593

        * Scripts/webkitpy/layout_tests/port/qt.py:
        * Scripts/webkitpy/layout_tests/port/webkit.py:

2010-07-06  Kent Tamura  <tkent@chromium.org>

        Reviewed by Shinichiro Hamaji.

        Fix a wrong dup detection of rebaseline-chromium-webkit-tests
        https://bugs.webkit.org/show_bug.cgi?id=41644

        rebaseline-chromium-webkit-tests used ImageDiff with 0.1%
        tolerance. We don't need tolerance for rebaseline.

        * Scripts/webkitpy/layout_tests/port/base.py:
          Add optional tolerance parameter to diff_image().
        * Scripts/webkitpy/layout_tests/port/test.py:
          Add optional tolerance parameter to diff_image().
        * Scripts/webkitpy/layout_tests/port/webkit.py:
          Add optional tolerance parameter to diff_image(), and pass it to ImageDiff command.
        * Scripts/webkitpy/layout_tests/test_types/image_diff.py:
          diff_files() always calls diff_image() with tolerance=0.
          diff_files() is used only by rebaseline-chromium-webkit-tests.

2010-07-06  Sam Weinig  <sam@webkit.org>

        Fix MiniBrowser build.

        * MiniBrowser/mac/WebBundle/WebBundleMain.m:

2010-07-06  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Add support for dumping the contents of messages to the console to WebKitTestRunner

        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::InjectedBundlePage):
        (WTR::InjectedBundlePage::_addMessageToConsole):
        (WTR::InjectedBundlePage::addMessageToConsole):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h:

2010-07-06  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=41708
        Add dumpAsText support for WebKitTestRunner

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::InjectedBundle):
        (WTR::InjectedBundle::reset): Reset the LayoutTestController for each test.
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::InjectedBundlePage::didFinishLoadForFrame): Use the new WKBundleFrameCopyInnerText
        API to dump the main frames text.

2010-07-06  Darin Adler  <darin@apple.com>

        Fix Chromium build.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::didCreateDataSource): Call leakPtr instead of release.
        (WebViewHost::didNavigateWithinPage): Ditto.
        (WebViewHost::updateURL): Ditto.

2010-07-06  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] build-webkit should not run autogen.sh unconditionally
        https://bugs.webkit.org/show_bug.cgi?id=41704

        * Scripts/webkitdirs.pm: Only run autogen.sh during a build if GNUmakefile
        doesn't exist. Autotools should re-run autogen.sh when necessary. Also do
        some very minor cleanup.

2010-07-06  Darin Adler  <darin@apple.com>

        Try to fix Chromium build.

        * DumpRenderTree/chromium/WebViewHost.cpp: Added include of PassOwnPtr.h.

2010-07-06  Darin Adler  <darin@apple.com>

        Fix build.

        * WebKitAPITest/TestsController.cpp:
        (WebKitAPITest::TestsController::addTest): Use leakPtr instead of release.

2010-07-06  Roland Steiner  <rolandsteiner@chromium.org>

        Reviewed by Kent Tamura.

        Bug 40558 - [DRT/Chromium] Upstream TestShellDevTools for Chromium DRT
        https://bugs.webkit.org/show_bug.cgi?id=40558

        Upstream DevTools for Chromium DRT.
        (original Chromium files rev. 51287)

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/DRTDevToolsAgent.cpp: Added.
        (DRTDevToolsAgent::DRTDevToolsAgent):
        (DRTDevToolsAgent::setWebView):
        (DRTDevToolsAgent::sendMessageToFrontend):
        (DRTDevToolsAgent::forceRepaint):
        (DRTDevToolsAgent::runtimeFeatureStateChanged):
        (DRTDevToolsAgent::injectedScriptSource):
        (DRTDevToolsAgent::injectedScriptDispatcherSource):
        (DRTDevToolsAgent::debuggerScriptSource):
        (DRTDevToolsAgent::asyncCall):
        (DRTDevToolsAgent::call):
        (DRTDevToolsAgent::webDevToolsAgent):
        (DRTDevToolsAgent::attach):
        (DRTDevToolsAgent::detach):
        (DRTDevToolsAgent::setTimelineProfilingEnabled):
        (DRTDevToolsAgent::evaluateInWebInspector):
        (DRTDevToolsAgent::dispatchMessageLoop):
        * DumpRenderTree/chromium/DRTDevToolsAgent.h: Added.
        (DRTDevToolsAgent::~DRTDevToolsAgent):
        (DRTDevToolsAgent::hostIdentifier):
        * DumpRenderTree/chromium/DRTDevToolsCallArgs.cpp:
        * DumpRenderTree/chromium/DRTDevToolsCallArgs.h:
        (DRTDevToolsCallArgs::DRTDevToolsCallArgs):
        (DRTDevToolsCallArgs::~DRTDevToolsCallArgs):
        (DRTDevToolsCallArgs::callsCount):
        * DumpRenderTree/chromium/DRTDevToolsClient.cpp: Added.
        (DRTDevToolsClient::DRTDevToolsClient):
        (DRTDevToolsClient::~DRTDevToolsClient):
        (DRTDevToolsClient::sendMessageToAgent):
        (DRTDevToolsClient::sendDebuggerCommandToAgent):
        (DRTDevToolsClient::activateWindow):
        (DRTDevToolsClient::closeWindow):
        (DRTDevToolsClient::dockWindow):
        (DRTDevToolsClient::undockWindow):
        (DRTDevToolsClient::asyncCall):
        (DRTDevToolsClient::call):
        (DRTDevToolsClient::allMessagesProcessed):
        * DumpRenderTree/chromium/DRTDevToolsClient.h:
        * DumpRenderTree/chromium/EventSender.cpp:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::closeWebInspector):
        (LayoutTestController::setTimelineProfilingEnabled):
        (LayoutTestController::evaluateInWebInspector):
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):
        (TestShell::~TestShell):
        (TestShell::createDRTDevToolsClient):
        (TestShell::showDevTools):
        (TestShell::closeDevTools):
        (TestShell::runFileTest):
        (TestShell::createNewWindow):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::drtDevToolsAgent):
        (TestShell::drtDevToolsClient):
        * DumpRenderTree/chromium/config.h:

2010-07-06  Gabor Rapcsanyi  <rgabor@inf.u-szeged.hu>

        Reviewed by Eric Seidel.

        Don't pass image hash to DRT when pixel tests are disabled.
        https://bugs.webkit.org/show_bug.cgi?id=41597

        * Scripts/webkitpy/layout_tests/layout_package/dump_render_tree_thread.py:

2010-07-05  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Eric Seidel.

        REGRESSION(r60652): WebKitTools/Scripts/ensure-valid-python should cleanup temporary directory
        https://bugs.webkit.org/show_bug.cgi?id=41612

        * Scripts/ensure-valid-python: File::Temp::tempdir call fixed.

2010-07-05  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        We should be able to specify a bug to block for webkit-patch upload
        https://bugs.webkit.org/show_bug.cgi?id=41648

        This will be useful for working on the HTML5 parser.

        * Scripts/webkitpy/tool/steps/createbug.py:
        * Scripts/webkitpy/tool/steps/options.py:

2010-07-05  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Oliver Hunt.

        The style checker exempts gtk2drawing.h when it should exempt gtkdrawing.h
        https://bugs.webkit.org/show_bug.cgi?id=41017

        * Scripts/webkitpy/style/checker.py: Exempt gtkdrawing.h instead of gtk2drawing.h
        * Scripts/webkitpy/style/checker_unittest.py: Update the unit test to reflect the change.

2010-07-04  MORITA Hajime  <morrita@google.com>

        rebaseline-chromium-webkit-tests: UnicodeDecodeError
        https://bugs.webkit.org/show_bug.cgi?id=41589

        * run() method can result non-utf-8 bytes, that causes utf-8
          decoding fail.  Fixed to disable decoding.
        * Fixed Git.find_checkout_root() to make a test pass.

        * Scripts/webkitpy/common/checkout/scm.py:
        * Scripts/webkitpy/common/checkout/scm_unittest.py:

2010-07-03  Patrick Gansterer  <paroga@paroga.com>

        Reviewed by Simon Hausmann.

        [Qt] Fix DumpRenderTree userStyleSheet handling.
        https://bugs.webkit.org/show_bug.cgi?id=41570

        DumpRenderTree did only set the userStyleSheet at
        layoutTestController.setUserStyleSheetEnabled().

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setUserStyleSheetLocation):
        (LayoutTestController::setUserStyleSheetEnabled):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-07-03  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] support dumpChildFrameScrollPositions

        https://bugs.webkit.org/show_bug.cgi?id=41088

        Unskip:

        http/tests/navigation/anchor-subframeload.html
        http/tests/navigation/relativeanchor-frames.html

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::dumpFrameScrollPosition):
        (WebCore::DumpRenderTree::dump):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController::shouldDumpChildFrameScrollPositions):
        (LayoutTestController::dumpChildFrameScrollPositions):

2010-07-02  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Rename new scripts so that they don't make autocompleting run-webkit-tests annoying.

        * Scripts/debug-test-runner: Copied from Scripts/debug-webkittestrunner.
        * Scripts/debug-webkittestrunner: Removed.
        * Scripts/run-test-runner: Copied from Scripts/run-webkittestrunner.
        * Scripts/run-webkittestrunner: Removed.

2010-07-02  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Steve Falkenburg.

        Some http tests fail on Windows with Cygwin 1.7
        https://bugs.webkit.org/show_bug.cgi?id=41537
        
        With Cygwin 1.7, the registry key at SOFTWARE\\Cygnus Solutions\\Cygwin\\mounts v2\\/
        doesn't exist anymore, because the mount points are stored in /etc/fstab. However, we
        just need root mount point, which is defined in SOFTWARE\\Cygwin\\setup.

        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (resolveCygwinPath): Fall back to SOFTWARE\\Cygwin\\setup if 
            SOFTWARE\\Cygnus Solutions\\Cygwin\\mounts v2\\/ doesn't work.

2010-06-23  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Gustavo Noronha Silva.

        [GTK] Separate DerivedSources per-project
        https://bugs.webkit.org/show_bug.cgi?id=41109

        The JavaScriptCore cppflags used to include the top-level DerivedSources directory
        allowing the tools to build as a side-effect. Now that the top-level directory
        is no longer in the list of JavaScriptCore includes, include it explicitly.

        * GNUmakefile.am:

2010-07-01  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Make context menus show up in the right place in QTestBrowser

        Context menus were shown at scene-relative coordinates for
        QGraphicsWebView while QMenu expects them to be global. The
        change to the QWidget case was to get rid of the mapToGlobal.

        * QtTestBrowser/webview.cpp:

2010-07-01  Robert Hogan <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] dump frames in ascending alphabetical order of title

        https://bugs.webkit.org/show_bug.cgi?id=41261

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::dumpHistoryItem):

2010-07-01  Martin Robinson  <mrobinson@igalia.com>

        Unreviewed. 

        Fix the GTK+ build after r62278.

        * Scripts/webkitdirs.pm: If the make arguments have already been specified,
        let them override the automatic CPU detection for autotools builds.

2010-07-01  Martin Robinson  <mrobinson@igalia.com>

        Unreviewed.

        Fix the Windows build after r62278.

        * Scripts/num-cpus: Use FindBin to add the Scripts directory to the list of library directories.

2010-07-01  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Gustavo Noronha Silva.

        [GTK] build-webkit does not detect the number of CPUs
        https://bugs.webkit.org/show_bug.cgi?id=41469

        Pass the appropriate -j<#> flag to make when building autotools builds.
        This causes make to spawn that many number of child processes for doing
        parallel builds.

        * Scripts/num-cpus: Use the newly abstracted numberOfCPUs to return the number
        of CPUs. This makes the script work across more platforms.
        * Scripts/webkitdirs.pm: Create a numberOfCPUs/determineNumberOfCPUs to determine the
        number of CPUs across several platforms. Use this new function to determine the appropriate
        arguments to pass to make for doing parallel builds with autotools build files.

2010-07-01  Simon Hausmann  <simon.hausmann@nokia.com>

        Rubber-stamped by Laszlo Gombos.

        [Qt][Symbian] Bumped up the maximum heap size to 96MB

        * QtTestBrowser/QtTestBrowser.pro: Removed explicit heap size declaration
        and use the one from WebKit.pri instead.

2010-07-01  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Promote webkit-patch land-safely to main help
        https://bugs.webkit.org/show_bug.cgi?id=41446

        I've been using this command a bunch and recommending it to folks.  We
        should show it in main help as it's past the experimental phase.

        * Scripts/webkitpy/tool/commands/upload.py:

2010-06-28  MORITA Hajime  <morrita@google.com>

        Reviewed by Shinichiro Hamaji.

        rebaseline-chromium-webkit-tests doesn't do diffs right with a Git checkout of WebKit
        https://bugs.webkit.org/show_bug.cgi?id=38775

        - Introduced SCM.show_head() and SCM.diff_for_file().
        - Replaced direct svn invocations with newly implement SCM methods.

        * Scripts/webkitpy/common/checkout/scm.py:
        * Scripts/webkitpy/common/checkout/scm_unittest.py:
        * Scripts/webkitpy/layout_tests/rebaseline_chromium_webkit_tests.py:

2010-06-30  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Sam Weinig.

        Allow MiniBrowser to open local files
        https://bugs.webkit.org/show_bug.cgi?id=41104

        Wire up the openDocument: message with an NSOpenPanel, so we can open
        local files.
        
        Also change the xib so that the window remembers its size.
        
        * MiniBrowser/mac/AppDelegate.m:
        (-[BrowserAppDelegate frontmostBrowserWindowController]):
        (-[BrowserAppDelegate openDocument:]):
        (-[BrowserAppDelegate openPanelDidEnd:returnCode:contextInfo:]):
        * MiniBrowser/mac/English.lproj/BrowserWindow.xib:

2010-06-30  Sam Weinig  <sam@webkit.org>

        Rubber-stamped by Anders Carlsson.

        Add debug-webkittestrunner and cleanup related scripts.

        * Scripts/debug-webkittestrunner: Added.
        * Scripts/run-webkittestrunner:
        * Scripts/webkitdirs.pm:

2010-06-30  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix after recent changes to LayoutTestController.

        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::pageSizeAndMarginsInPixels):

2010-06-29  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=41389
        Make WebKitTestRunner work with more than one test at a time.

        This converts WebKitTestRunner to a similar model as DumpRenderTree,
        where there is a single WKView and each test is run it, rather than
        the design I was using where each test got its own WKView.

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::didRecieveMessage):
        (WTR::InjectedBundle::reset):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        * WebKitTestRunner/TestController.cpp:
        (WTR::TestController::initialize):
        (WTR::TestController::runTest):
        (WTR::TestController::_didRecieveMessageFromInjectedBundle):
        (WTR::TestController::didRecieveMessageFromInjectedBundle):
        * WebKitTestRunner/TestController.h:
        (WTR::TestController::mainWebView):
        (WTR::TestController::pageNamespace):
        (WTR::TestController::context):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::TestInvocation):
        (WTR::TestInvocation::~TestInvocation):
        (WTR::TestInvocation::invoke):
        (WTR::TestInvocation::didRecieveMessageFromInjectedBundle):
        * WebKitTestRunner/TestInvocation.h:

2010-06-30  Simon Hausmann  <simon.hausmann@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt][Symbian] Only 10 websites can be loaded consecutively when using QtWebkit 2.0
        https://bugs.webkit.org/show_bug.cgi?id=40446

        We quickly run out of memory on Symbian when loading web pages. This is
        caused by the default heap size, which is not suited for a web browser.

        This change bumps the max heap size to 32MB.

        * QtTestBrowser/QtTestBrowser.pro:

2010-06-30  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        webkit-patch land allow the user to continue even if the builders are red
        https://bugs.webkit.org/show_bug.cgi?id=41395

        I don't think it's good that we've been teaching people
        to always pass --ignore-builders.  At least land is now
        useable w/o --ignore-builders.

        * Scripts/webkitpy/tool/steps/ensurebuildersaregreen.py:

2010-06-29  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] support dumpResourceResponseMIMETypes
        https://bugs.webkit.org/show_bug.cgi?id=41260

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::dumpResourceResponseMIMETypes):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-06-29  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Resize scene when Qt DRT WebPage receives a geometry change request
        https://bugs.webkit.org/show_bug.cgi?id=41173

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::WebPage::setViewGeometry):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:

2010-06-29  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Simon Hausmann.

        [Qt] Deal with postEvent in case of graphics based DRT
        https://bugs.webkit.org/show_bug.cgi?id=41174

        QGraphicsScene does not have a postEvent method, so make scene
        send the event, in case of graphics based DRT, and delete it after that.

        * DumpRenderTree/qt/EventSenderQt.cpp:
        (EventSender::scheduleAsynchronousClick):
        (EventSender::replaySavedEvents):
        (EventSender::postEvent):
        * DumpRenderTree/qt/EventSenderQt.h:

2010-06-29  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Make switchFocus() method works with QGraphicsWebView in Qt DRT
        https://bugs.webkit.org/show_bug.cgi?id=41172

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::switchFocus):

2010-06-29  Mario Sanchez Prada  <msanchez@igalia.com>

        Reviewed by Xan Lopez.

        [Gtk] Make DRT more coherent with other ports to allow reusing more tests
        https://bugs.webkit.org/show_bug.cgi?id=40009

        Make sure "AXRole: ", "AXTitle: " and "AXDescription: " prefixes
        are used when returning those values, for coherency with other ports.

        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::role):
        (AccessibilityUIElement::title):
        (AccessibilityUIElement::description):

2010-06-29  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r62106.
        http://trac.webkit.org/changeset/62106
        https://bugs.webkit.org/show_bug.cgi?id=41346

        "Broke editing tests" (Requested by xan_ on #webkit).

        * Scripts/old-run-webkit-tests:

2010-06-29  Mario Sanchez Prada  <msanchez@igalia.com>

        Reviewed by Xan Lopez.

        Ensure DRT loads GAIL (Gtk+ module), for a11y tests
        https://bugs.webkit.org/show_bug.cgi?id=38648

        Add the GTK_MODULES envvar (set to "gail") to the clean
        environment when running DRT for the Gtk+ port

        * Scripts/old-run-webkit-tests:

2010-06-28  Adam Barth  <abarth@webkit.org>

        Unreviewed.

        Switch test-html5-parser back to using runner.html.

        * Scripts/test-html5-parser:

2010-06-28  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Restore webkit-runner.html for use with new tree builder
        https://bugs.webkit.org/show_bug.cgi?id=41317

        For now, we just want to run webkit-runner when we test-html5-parser.

        * Scripts/test-html5-parser:

2010-06-23  John Gregg  <johnnyg@google.com>

        Reviewed by Kent Tamura.

        add ENABLE_DIRECTORY_UPLOAD build support
        https://bugs.webkit.org/show_bug.cgi?id=41100

        * Scripts/build-webkit:

2010-06-28  Gustavo Noronha Silva  <gns@gnome.org>

        Rubber-stamped by Xan Lopez.

        Update webkitdirs's knowledge of our library's name.

        * Scripts/webkitdirs.pm:

2010-06-28  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=41299
        Build up WebKitTestRunner output in the InjectedBundle

        Simplify WebKitTestRunner by building up the output in the InjectedBundle
        and sending it over postMessage when done, instead of using the async
        WKPageRenderTreeExternalRepresentation.

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp:
        (WTR::InjectedBundle::done):
        (WTR::InjectedBundle::didRecieveMessage):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h:
        (WTR::InjectedBundle::os):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp:
        (WTR::WKStringToUTF8):
        (WTR::InjectedBundlePage::didFinishLoadForFrame):
        (WTR::InjectedBundlePage::didFailLoadWithErrorForFrame):
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::WKStringToUTF8):
        (WTR::TestInvocation::TestInvocation):
        (WTR::TestInvocation::invoke):
        (WTR::TestInvocation::initializeMainWebView):
        (WTR::TestInvocation::_didRecieveMessageFromInjectedBundle):
        (WTR::TestInvocation::didRecieveMessageFromInjectedBundle):
        * WebKitTestRunner/TestInvocation.h:

2010-06-28  Robert Hogan  <robert@webkit.org>

        Unreviewed, rolling out r62021.
        http://trac.webkit.org/changeset/62021
        https://bugs.webkit.org/show_bug.cgi?id=41261

        Broke http/navigation tests among other

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::dumpFramesAsText):

2010-06-28  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Add run-webkittestrunner to run WebKitTestRunner with the appropriate
        environment.

        * Scripts/run-webkittestrunner: Added.
        * Scripts/webkitdirs.pm:

2010-06-28  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] dump frames in ascending alphabetical order of title

        https://bugs.webkit.org/show_bug.cgi?id=41261

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::dumpFramesAsText):

2010-06-28  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] dump bf history of child windows

        https://bugs.webkit.org/show_bug.cgi?id=41266

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::dumpBackForwardList):
        (WebCore::DumpRenderTree::dump):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:

2010-06-28  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=41288
        WebKit2: Add frame API for InjectedBundle code

        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (_didClearWindowForFrame):

2010-06-28  Jesus Sanchez-Palencia  <jesus.palencia@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] QtTestBrowser does not have a "Load" button ; therefore, unable to load pages on touch only symbian devices (portrait mode).
        https://bugs.webkit.org/show_bug.cgi?id=38597

        Fix behavior so reload button really acts as a load and a reload button.

        * QtTestBrowser/mainwindow.cpp:
        (MainWindow::changeLocation):

2010-06-28  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Gustavo Noronha.

        [GTK] Does not compile with -DGSEAL_ENABLE
        https://bugs.webkit.org/show_bug.cgi?id=37851

        Fix build with GSEAL enabled.

        * DumpRenderTree/gtk/EventSender.cpp:
        (gtk_widget_get_window):
        (prepareMouseButtonEvent):
        (mouseMoveToCallback):
        (mouseWheelToCallback):
        (keyDownCallback):

2010-06-28  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Gustavo Noronha.

        [GTK] Add support for GTK+3
        https://bugs.webkit.org/show_bug.cgi?id=41253

        Adapt build system for 3.x support.

        * GNUmakefile.am:

2010-06-10  Mahesh Kulkarni  <mahesh.kulkarni@nokia.com>

        Reviewed by Simon Hausmann.

        [QT][S60] build-webkit scripts picks wrong make spec for windows build
        https://bugs.webkit.org/show_bug.cgi?id=41198

        Instead of checking for existence of %EPOCROOT% on windows, mandatory use of --symbian flag for symbian builds. 

        * Scripts/webkitdirs.pm:
        (determineIsSymbian): remove check for %EPOCROOT% as one can build for windows port of QT as well

2010-06-28  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Make it possible to test the new HTML5 TreeBuilder
        https://bugs.webkit.org/show_bug.cgi?id=41276

        Adam was concerned that someone might make their port
        depend on this setting (I guess we had some trouble with that
        with the HTML5Parser setting), so I littered the code with warnings.

        test-html5-parser now tests this code path.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        (initializeGlobalsFromCommandLineOptions):
        * Scripts/test-html5-parser:

2010-06-27  MORITA Hajime  <morrita@google.com>

        Unreviewed. 
        
        Some never-called @staticmethods touched self. 
        Fixed it to replace these self with a class.

        * Scripts/webkitpy/common/checkout/scm.py:

2010-06-27  MORITA Hajime  <morrita@google.com>

        Unreviewed.
        
        Fixed exception raising syntax that is pointed out at
        https://bugs.webkit.org/show_bug.cgi?id=41153

        * Scripts/webkitpy/common/checkout/scm.py:
        * Scripts/webkitpy/common/checkout/scm_unittest.py: 
          Removed a bad line that I accidentally checked-in at last revision.

2010-06-24  MORITA Hajime  <morrita@google.com>

        Reviewed by Eric Seidel.

        rebaseline-chromium-webkit-tests should add or remove files to local git repository
        https://bugs.webkit.org/show_bug.cgi?id=41153

        - Added SCM.add() and SCM.remove()
        - Replaced "svn add" and "svn remove"
          rebaseline_chromium_webkit_tests.py: in with SCM method equivalents.
        - add "-U" and "-q" options to rebaseline_chromium_webkit_tests.py
          for debugging purpose.

        * Scripts/webkitpy/common/checkout/scm.py:
        * Scripts/webkitpy/common/checkout/scm_unittest.py:
        * Scripts/webkitpy/layout_tests/rebaseline_chromium_webkit_tests.py:

2010-06-25  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Shinichiro Hamaji.

        Improve default value handling for page format properties.
        https://bugs.webkit.org/show_bug.cgi?id=41150

        * DumpRenderTree/LayoutTestController.cpp:
        (parsePageNumber):
        (parsePageNumberSizeMarings):
        (pageSizeAndMarginsInPixelsCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::pageSizeAndMarginsInPixels):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::pageSizeAndMarginsInPixels):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::pageSizeAndMarginsInPixels):

2010-06-21  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] DRT Support for setCustomPolicyDelegate

        https://bugs.webkit.org/show_bug.cgi?id=39564

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setCustomPolicyDelegate):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-06-26  Robert Hogan  <robert@webkit.org>

        Unreviewed, Qt build fix following http://trac.webkit.org/changeset/61879
        
        Remove qwebscriptworld.h from LayoutTestControllerQt.cpp - it is no longer
        exported.

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:

2010-06-26  Tony Gentilcore  <tonyg@chromium.org>

        Reviewed by Dimitri Glazkov.

        Add a build-webkit option for enabling Web Timing support.
        https://bugs.webkit.org/show_bug.cgi?id=38924

        * Scripts/build-webkit:

2010-06-25  Jesus Sanchez-Palencia  <jesus.palencia@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] QtTestBrowser does not have a "Load" button ; therefore, unable to load pages on touch only symbian devices (portrait mode).
        https://bugs.webkit.org/show_bug.cgi?id=38597

        Make the reload button act as a load button as well.

        * QtTestBrowser/mainwindow.cpp:
        (MainWindow::buildUI):
        (MainWindow::changeLocation):

2010-06-25  Prasad Tammana  <prasadt@chromium.org>

        Reviewed by Dmitry Titov.

        Add empty abortModal() method to all platforms.
        https://bugs.webkit.org/show_bug.cgi?id=40864

        Add an empty abortModal() stub to LayoutTestController on all platforms to get rid of platform specific #ifs in
        platform independent LayoutTestController code.  Without this change, layout tests using LayoutTestController tests
        that use abortModal will become mac specific which is not desirable.

        * DumpRenderTree/LayoutTestController.cpp:
        (abortModalCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::abortModal):
        * DumpRenderTree/chromium/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::abortModal):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController::abortModal):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::abortModal):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::abortModal):

2010-06-25  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=41226
        Flesh out injected bundle code for WebKitTestRunner and add basic LayoutTestController.

        * WebKitTestRunner/InjectedBundle/InjectedBundle.cpp: Added.
        (WTR::InjectedBundle::shared):
        (WTR::InjectedBundle::InjectedBundle):
        (WTR::InjectedBundle::_didCreatePage):
        (WTR::InjectedBundle::_willDestroyPage):
        (WTR::InjectedBundle::_didRecieveMessage):
        (WTR::InjectedBundle::initialize):
        (WTR::InjectedBundle::didCreatePage):
        (WTR::InjectedBundle::willDestroyPage):
        (WTR::InjectedBundle::didRecieveMessage):
        * WebKitTestRunner/InjectedBundle/InjectedBundle.h: Added.
        (WTR::InjectedBundle::layoutTestController):
        * WebKitTestRunner/InjectedBundle/InjectedBundleMain.cpp:
        (WKBundleInitialize):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.cpp: Added.
        (WTR::InjectedBundlePage::InjectedBundlePage):
        (WTR::InjectedBundlePage::~InjectedBundlePage):
        (WTR::InjectedBundlePage::_didStartProvisionalLoadForFrame):
        (WTR::InjectedBundlePage::_didReceiveServerRedirectForProvisionalLoadForFrame):
        (WTR::InjectedBundlePage::_didFailProvisionalLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::_didCommitLoadForFrame):
        (WTR::InjectedBundlePage::_didFinishLoadForFrame):
        (WTR::InjectedBundlePage::_didFailLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::_didReceiveTitleForFrame):
        (WTR::InjectedBundlePage::_didClearWindowForFrame):
        (WTR::InjectedBundlePage::didStartProvisionalLoadForFrame):
        (WTR::InjectedBundlePage::didReceiveServerRedirectForProvisionalLoadForFrame):
        (WTR::InjectedBundlePage::didFailProvisionalLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::didCommitLoadForFrame):
        (WTR::InjectedBundlePage::didFinishLoadForFrame):
        (WTR::InjectedBundlePage::didFailLoadWithErrorForFrame):
        (WTR::InjectedBundlePage::didReceiveTitleForFrame):
        (WTR::InjectedBundlePage::didClearWindowForFrame):
        * WebKitTestRunner/InjectedBundle/InjectedBundlePage.h: Added.
        (WTR::InjectedBundlePage::page):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.cpp: Added.
        (WTR::LayoutTestController::create):
        (WTR::LayoutTestController::LayoutTestController):
        (WTR::LayoutTestController::~LayoutTestController):
        (WTR::dumpAsTextCallback):
        (WTR::layoutTestControllerObjectFinalize):
        (WTR::LayoutTestController::makeWindowObject):
        (WTR::LayoutTestController::getJSClass):
        (WTR::LayoutTestController::staticFunctions):
        * WebKitTestRunner/InjectedBundle/LayoutTestController.h: Added.
        (WTR::LayoutTestController::dumpAsText):
        (WTR::LayoutTestController::setDumpAsText):
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj:

2010-06-25  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Make WebKitTestRunner really work with run-webkit-tests. 

        - Add Forwarding headers to allow some cleanup.

        * WebKitTestRunner/ForwardingHeaders: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/ASCIICType.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/Assertions.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/Atomics.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/FastMalloc.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/HashMap.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/HashSet.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/HashTraits.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/Locker.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/MainThread.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/MathExtras.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/Noncopyable.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/OwnPtr.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/OwnPtrCommon.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/PassOwnPtr.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/PassRefPtr.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/Platform.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/RefCounted.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/RefPtr.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/RetainPtr.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/StringExtras.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/ThreadSafeShared.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/Threading.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/ThreadingPrimitives.h: Added.
        * WebKitTestRunner/ForwardingHeaders/wtf/Vector.h: Added.
        * WebKitTestRunner/TestInvocation.cpp:
        (WTR::TestInvocation::dump): Dump the right number of #EOFs.
        * WebKitTestRunner/TestInvocation.h:

2010-06-25  Sam Weinig  <sam@webkit.org>

        Reviewed by Mark Rowe.

        Add support for WebKitTestRunner to old-run-webkit-tests

        - Also adds a script to build WebKitTestRunner for old-run-webkit-tests to use.

        * Scripts/build-webkittestrunner: Added.
        * Scripts/old-run-webkit-tests:

2010-06-25  Adam Barth  <abarth@webkit.org>

        Reviewed by David Levin.

        Incremental build failed on Chromium ews
        https://bugs.webkit.org/show_bug.cgi?id=41011

        The division of responsibility between update-webkit --chromium and
        build-webkit --chromium is slightly unclear.  In this patch, we make
        build-webkit --chromium also update DEPS and re-run GYP in case the
        developer has changed either since they updated.

        This change is also helpful for the EWS, which wants to update DEPS and
        re-run GYP after applying patches, but the EWS doesn't want to run
        update-webkit --chromium because it has a dirty working copy.

        * Scripts/webkitdirs.pm:

2010-06-25  Robert Hogan  <robert@webkit.org>

        Reviewed by Simon Hausmann.

        [Qt] Support evaluateScriptInIsolatedWorld()

        https://bugs.webkit.org/show_bug.cgi?id=40079

        Remove evaluateScriptInIsolatedWorld() from QtWebKit API.
        Remove QWebScriptWorld from exported headers.
        Confine support to DumpRenderTreeSupportQt so that the tests can pass.

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::evaluateScriptInIsolatedWorld):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-06-25  Anders Carlsson  <andersca@apple.com>

        Revert accidental part and add a newline.

        * MiniBrowser/mac/AppDelegate.m:
        * MiniBrowser/mac/MiniBrowser_Prefix.pch:

2010-06-25  Anders Carlsson  <andersca@apple.com>

        Rubber-stamped by Dan Bernstein.

        Add a LOG macro that expands to a no-op by default.

        * MiniBrowser/MiniBrowser.xcodeproj/project.pbxproj:
        * MiniBrowser/mac/AppDelegate.m:
        (_didRecieveMessageFromInjectedBundle):
        * MiniBrowser/mac/BrowserWindowController.m:
        (-[BrowserWindowController windowShouldClose:]):
        (_didStartProvisionalLoadForFrame):
        (_didReceiveServerRedirectForProvisionalLoadForFrame):
        (_didFailProvisionalLoadWithErrorForFrame):
        (_didCommitLoadForFrame):
        (_didFinishLoadForFrame):
        (_didFailLoadWithErrorForFrame):
        (_didReceiveTitleForFrame):
        (_didFirstLayoutForFrame):
        (_didFirstVisuallyNonEmptyLayoutForFrame):
        (_didBecomeUnresponsive):
        (_didBecomeResponsive):
        (_decidePolicyForNavigationAction):
        (_decidePolicyForNewWindowAction):
        (_createNewPage):
        (_showPage):
        (_closePage):
        (_didNavigateWithNavigationData):
        (_didPerformClientRedirect):
        (_didPerformServerRedirect):
        (_didUpdateHistoryTitle):
        * MiniBrowser/mac/MiniBrowser_Prefix.pch:
        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (_didClearWindowForFrame):
        (_didCreatePage):
        (_willDestroyPage):
        (_didRecieveMessage):

2010-06-24  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        commit-queue is taking too long to land patches because of red trees
        https://bugs.webkit.org/show_bug.cgi?id=41194

        Instead of checking for the tree to be green, we'll just spin hot
        trying to land patches.  This is probably too extreme in ignoring the
        tree, but I think we should try it for a while to see if we have
        trouble.  That will help us find the right balance.

        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:

2010-06-24  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Clean up the use of gdk_window_get_root_coords in EventSender
        https://bugs.webkit.org/show_bug.cgi?id=40843

        Define the version for old GTK+s in a way that is forward-compatible
        and clean up the logic a bit.

        * DumpRenderTree/gtk/EventSender.cpp:
        (gdk_window_get_root_coords): Renamed and cleaned up.
        (prepareMouseButtonEvent): Remove #ifdefs.
        (mouseMoveToCallback): Remove #ifdefs.

2010-06-24  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Eric Seidel.

        Fix NewRunWebKitTests to work on Windows.
        https://bugs.webkit.org/show_bug.cgi?id=41180

        * BuildSlaveSupport/build.webkit.org-config/master.cfg: Added "perl" as first arguments,
            because Windows fails to understand what we're asking of it.

2010-06-24  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] The url passed to the WebView during layout tests is invalid
        https://bugs.webkit.org/show_bug.cgi?id=40832

        Set the test URL to the full real file URL and do a small cleanup.
        Previously a URL like file://relative/path/to/test.html was passed
        to the WebView. This malformed file URL would be returned by
        webkit_web_view_get_url and webkit_web_frame_get_url.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (shouldLogFrameLoadDelegates): Change to take a const string& as the argument.
        (shouldOpenWebInspector): Change to take a const string& as the argument.
        (shouldEnableDeveloperExtras): Change to take a const string& as the argument.
        (runTest): Pass the full file:// URL to the view. Remove the superfluous url variable.

2010-06-24  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Fix WebKitTestRunner Makefile typos.

        * WebKitTestRunner/Makefile:

2010-06-24  Adele Peterson  <adele@apple.com>

        Reviewed by Eric Carlson.

        DumpRenderTree part of testing <rdar://problem/8093680> "Paste and Match Style" should fire paste events
        https://bugs.webkit.org/show_bug.cgi?id=41085

        * DumpRenderTree/mac/DumpRenderTree.mm: (resetWebViewToConsistentStateBeforeTesting):
        Clear the general pasteboard in between tests so Cut,Copy, and setData on ClipboardData won't have lasting effects.

2010-06-23  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=41086
        Add new WebKitTestRunner project (ie. DRT for WebKit2).

        - Mac only.
        - run-webkit-tests has not been modified to call it yet.
        - Only dumps the render tree at this time. 

        * WebKitTestRunner: Added.
        * WebKitTestRunner/Configurations: Added.
        * WebKitTestRunner/Configurations/Base.xcconfig: Added.
        * WebKitTestRunner/Configurations/DebugRelease.xcconfig: Added.
        * WebKitTestRunner/Configurations/InjectedBundle.xcconfig: Added.
        * WebKitTestRunner/Configurations/WebKitTestRunner.xcconfig: Added.
        * WebKitTestRunner/InjectedBundle: Added.
        * WebKitTestRunner/InjectedBundle-Info.plist: Added.
        * WebKitTestRunner/InjectedBundle/InjectedBundleMain.cpp: Added.
        (_didStartProvisionalLoadForFrame):
        (_didReceiveServerRedirectForProvisionalLoadForFrame):
        (_didFailProvisionalLoadWithErrorForFrame):
        (_didCommitLoadForFrame):
        (_didFinishLoadForFrame):
        (_didFailLoadWithErrorForFrame):
        (_didReceiveTitleForFrame):
        (_didClearWindow):
        (_didCreatePage):
        (_willDestroyPage):
        (_didRecieveMessage):
        (WKBundleInitialize):
        * WebKitTestRunner/Makefile: Added.
        * WebKitTestRunner/PlatformWebView.h: Added.
        (WTR::PlatformWebView::platformView):
        * WebKitTestRunner/TestController.cpp: Added.
        (WTR::TestController::shared):
        (WTR::TestController::TestController):
        (WTR::TestController::initialize):
        (WTR::TestController::runTest):
        (WTR::TestController::runTestingServerLoop):
        (WTR::TestController::run):
        * WebKitTestRunner/TestController.h: Added.
        (WTR::TestController::verbose):
        (WTR::TestController::injectedBundlePath):
        * WebKitTestRunner/TestInvocation.cpp: Added.
        (WTR::createWKURL):
        (WTR::TestInvocation::TestInvocation):
        (WTR::TestInvocation::~TestInvocation):
        (WTR::TestInvocation::invoke):
        (WTR::TestInvocation::dump):
        (WTR::TestInvocation::initializeMainWebView):
        (WTR::TestInvocation::didStartProvisionalLoadForFrame):
        (WTR::TestInvocation::didReceiveServerRedirectForProvisionalLoadForFrame):
        (WTR::TestInvocation::didFailProvisionalLoadWithErrorForFrame):
        (WTR::TestInvocation::didCommitLoadForFrame):
        (WTR::TestInvocation::didFinishLoadForFrame):
        (WTR::TestInvocation::didFailLoadForFrame):
        (WTR::TestInvocation::renderTreeExternalRepresentationFunction):
        (WTR::TestInvocation::renderTreeExternalRepresentationDisposeFunction):
        * WebKitTestRunner/TestInvocation.h: Added.
        * WebKitTestRunner/WebKitTestRunner.xcodeproj: Added.
        * WebKitTestRunner/WebKitTestRunner.xcodeproj/project.pbxproj: Added.
        * WebKitTestRunner/WebKitTestRunnerPrefix.h: Added.
        * WebKitTestRunner/mac: Added.
        * WebKitTestRunner/mac/PlatformWebViewMac.mm: Added.
        (WTR::PlatformWebView::PlatformWebView):
        (WTR::PlatformWebView::~PlatformWebView):
        (WTR::PlatformWebView::page):
        * WebKitTestRunner/mac/TestInvocationMac.mm: Added.
        (WTR::TestInvocation::runUntil):
        * WebKitTestRunner/mac/main.mm: Added.
        (main):

2010-06-24  Luiz Agostini  <luiz.agostini@openbossa.org>

        Unreviewed. Adding myself to the committers list.

        * Scripts/webkitpy/common/config/committers.py:

2010-06-23  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix, adding new LayoutTestController methods and enabling SVG_FOREIGN_OBJECT.

        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::isPageBoxVisible):
        (LayoutTestController::pageAreaRectInPixels):
        (LayoutTestController::preferredPageSizeInPixels):
        * wx/build/settings.py:

2010-06-23  James Robinson  <jamesr@chromium.org>

        Unreviewed.  Add my IRC handle to committers.py so the sheriffbot can yell at me.

        * Scripts/webkitpy/common/config/committers.py:

2010-06-23  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        Correct Chromium test configuration
        https://bugs.webkit.org/show_bug.cgi?id=41057

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
         - Add "--use-drt" option for NRWT. It is required for Chromium and
           ignored for other platforms.
         - Skip JSC test on Chromium
        * BuildSlaveSupport/test-result-archive:
          Add Chromium support.

2010-06-23  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Fix for https://bugs.webkit.org/show_bug.cgi?id=41073
        WebKit2: Flesh out more of the InjectedBundle client API

        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (_didStartProvisionalLoadForFrame):
        (_didReceiveServerRedirectForProvisionalLoadForFrame):
        (_didFailProvisionalLoadWithErrorForFrame):
        (_didCommitLoadForFrame):
        (_didFinishLoadForFrame):
        (_didFailLoadWithErrorForFrame):
        (_didReceiveTitleForFrame):
        (_didClearWindowForFrame):
        (_didCreatePage):
        (_willDestroyPage):
        (WKBundleInitialize):

2010-06-23  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Shinichiro Hamaji.

        Implement page format data programming interface.
        Add methods for testing.
        https://bugs.webkit.org/show_bug.cgi?id=37538

        * DumpRenderTree/LayoutTestController.cpp:
        (parsePageNumber):
        (isPageBoxVisibleCallback):
        (pageAreaRectInPixelsCallback):
        (preferredPageSizeInPixelsCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::isPageBoxVisible):
        (LayoutTestController::pageAreaRectInPixels):
        (LayoutTestController::preferredPageSizeInPixels):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::isPageBoxVisible):
        (LayoutTestController::pageAreaRectInPixels):
        (LayoutTestController::preferredPageSizeInPixels):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::isPageBoxVisible):
        (LayoutTestController::pageAreaRectInPixels):
        (LayoutTestController::preferredPageSizeInPixels):

2010-06-23  Sam Magnuson  <smagnuson@netflix.com>

        Reviewed by Shinichiro Hamaji.

        Follow proper convention for if/switch/while as I've discovered
        them to be through my review processes.
        https://bugs.webkit.org/show_bug.cgi?id=40723

        Modified test so that if( foo ) is not allowed as it appears not
        to be the accepted convention.

        * Scripts/webkitpy/style/checkers/cpp.py:
        * Scripts/webkitpy/style/checkers/cpp_unittest.py:

2010-06-22  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Run clean-header-guards to fix some header guards
        https://bugs.webkit.org/show_bug.cgi?id=41044

        No functional changes, thus no tests.

        This entire change was generated by running
        clean-header-guards, and then reverting changes
        to files which shouldn't be changed.  Those which
        are left all should be updated.

        Some of these changes are just fixing 755 permissions
        to be 644, since it seems various files have the wrong
        execute bit which don't need it.  clean-header-guards
        made those (welcome) permission fixes unintentionally.

        * DumpRenderTree/chromium/WebThemeControlDRT.h:
        * DumpRenderTree/chromium/WebThemeEngineDRT.h:
        * QtTestBrowser/fpstimer.h:

2010-06-22  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Rename HTMLDocumentParser to LegacyHTMLDocumentParser
        https://bugs.webkit.org/show_bug.cgi?id=41043

        Update the hash.

        * Scripts/do-webcore-rename:

2010-06-22  Sam Magnuson  <smagnuson@netflix.com>

        Reviewed by Shinichiro Hamaji.

        Follow proper convention for variable declaration spacing.
        https://bugs.webkit.org/show_bug.cgi?id=40724

        Modified test so that 'int   a;' is not allowed.

        * Scripts/webkitpy/style/checkers/cpp.py:
        * Scripts/webkitpy/style/checkers/cpp_unittest.py:

2010-06-22  Eric Seidel  <eric@webkit.org>

        Unreviewed.  Add Tony Gentilcore now that he's a committer.

        * Scripts/webkitpy/common/config/committers.py:

2010-06-22  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Remove Gtk 64-Release bot from core since it's broken
        https://bugs.webkit.org/show_bug.cgi?id=41022

        This bot alone has been responsible for more than 72 hours of
        commit-queue blockage in the last week.  The bot is broken -- keeps
        losing its display server or similar.  Until the Gtk folks can fix the
        bot, we need to remove it from core.  The WebKit community can't keep
        it green as is.

        * Scripts/webkitpy/common/net/buildbot.py:
        * Scripts/webkitpy/common/net/buildbot_unittest.py:

2010-06-21  Dumitru Daniliuc  <dumi@chromium.org>

        Reviewed by Eric Seidel.

        Fix the Windows build.
        https://bugs.webkit.org/show_bug.cgi?id=40972

        * DumpRenderTree/win/ImageDiff.vcproj:

2010-06-21  Prasad Tammana  <prasadt@chromium.org>

        Reviewed by Darin Adler, Dmitry Titov.

        DumpRenderTree should allow tests with modal dialogs
        https://bugs.webkit.org/show_bug.cgi?id=35350

        * DumpRenderTree/LayoutTestController.cpp:
        (abortModalCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::abortModal):
        Add abortModal method to LayoutTestController and make it available from script.

        * DumpRenderTree/mac/UIDelegate.mm: Add support for showModalDialog.
        (-[UIDelegate modalWindowWillClose:]): Observer for NSWindowWillCloseNotifications to call
        abortModal from when modal window closes.
        (-[UIDelegate webViewRunModal:]): Delegate method for showModalDialog to run the modal loop.

2010-06-21  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Anders Carlsson.
        
        Rename DrawingAreaProxyUpdateChunk to ChunkedUpdateDrawingArea
        https://bugs.webkit.org/show_bug.cgi?id=40948
        
        Have the script look in WebKit2.

        * Scripts/do-webcore-rename:

2010-06-21  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Unskip plugins/get-url-that-the-resource-load-delegate-will-disallow.html

        It's a Mac-specific test so just add the required LayoutTestController
        function as a no-op to avoid failing. Similar approach adopted by other
        ports.

        https://bugs.webkit.org/show_bug.cgi?id=33344

        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController::addDisallowedURL):

2010-06-21  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Patch for https://bugs.webkit.org/show_bug.cgi?id=40940
        Add message passing support to the WebKit2 API.

        - Add some test messages.

        * MiniBrowser/mac/AppDelegate.m:
        (_didRecieveMessageFromInjectedBundle):
        (-[BrowserAppDelegate init]):
        * MiniBrowser/mac/WebBundle/WebBundleMain.m:
        (_didClearWindow):
        (_didCreatePage):
        (_didRecieveMessage):
        (WKBundleInitialize):

2010-06-21  Drew Wilson  <atwilson@chromium.org>

        Unreviewed.

        Rolling back 61551 and 61555 due to test failures.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setEditingBehavior):
        * DumpRenderTree/mac/UIDelegate.mm:

2010-06-21  Anders Carlsson  <andersca@apple.com>

        Reviewed by Sam Weinig.

        Make DumpRenderTree build with clang++

        * DumpRenderTree/mac/DumpRenderTreePasteboard.m:
        (-[LocalPasteboard setPropertyList:forType:]):
        * DumpRenderTree/mac/DumpRenderTreeWindow.mm:
        (-[DumpRenderTreeWindow keyDown:]):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::elementDoesAutoCompleteForElementWithId):
        (LayoutTestController::isCommandEnabled):

2010-06-21  Satish Sampath  <satish@chromium.org>

        Reviewed by Steve Block.

        Speech Input Patch 0: Added compilation argument to conditionally compile pending patches.
        https://bugs.webkit.org/show_bug.cgi?id=40878

        * Scripts/build-webkit:

2010-06-21  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Initialization for http/tests/loading/
        https://bugs.webkit.org/show_bug.cgi?id=40902

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::runFileTest):

2010-06-21  Jocelyn Turcotte  <jocelyn.turcotte@nokia.com>

        Unreviewed.

        Adding myself to the committers list.

        * Scripts/webkitpy/common/config/committers.py:

2010-06-20  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Add --allow-external-pages option
        https://bugs.webkit.org/show_bug.cgi?id=40762

        Add --allow-external-pages introduced by Chromium r45403.
        http://src.chromium.org/viewvc/chrome?view=rev&revision=45403

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (main):
        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::allowExternalPages):
        (TestShell::setAllowExternalPages):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::willSendRequest):

2010-06-20  Joseph Pecoraro  <joepeck@webkit.org>

        Reviewed by Adam Barth.

        Sheriffbot: Should allow "r" in SVN_REVISION
        https://bugs.webkit.org/show_bug.cgi?id=40889

        * Scripts/webkitpy/tool/bot/irc_command.py: remove a leading "r" from SVN_REVISION if it exists
        * Scripts/webkitpy/tool/bot/sheriffircbot_unittest.py: test an SVN_REVISION with a leading r.

2010-06-20  Joseph Pecoraro  <joepeck@webkit.org>

        Reviewed by Dimitri Glazkov.

        Python Tests Fail after r61508
        https://bugs.webkit.org/show_bug.cgi?id=40891

        Test's regex list needed to be updated to match the new
        regex list in the source code. Added new bots to the
        example_buildbots list.

        Regex list fixed in r61512. Updated bot list.

        * Scripts/webkitpy/common/net/buildbot_unittest.py:

2010-06-20  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed, build fix.

        Tweak test regexp list to match the change in http://trac.webkit.org/changeset/61508.

        * Scripts/webkitpy/common/net/buildbot_unittest.py: Tweaked regexp.

2010-06-19  Justin Schuh  <jschuh@chromium.org>

        Unreviewed.

        Adding myself to the committers list.

        * Scripts/webkitpy/common/config/committers.py:

2010-06-19  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Fix for https://bugs.webkit.org/show_bug.cgi?id=40882
        Add ability to have a WebProcess per WebContext.

        Move to use new shared contexts API.

        * MiniBrowser/mac/AppDelegate.h:
        * MiniBrowser/mac/AppDelegate.m:
        (-[BrowserAppDelegate init]):
        (-[BrowserAppDelegate getCurrentPageNamespace]):
        (-[BrowserAppDelegate validateMenuItem:]):
        (-[BrowserAppDelegate _setProcessModel:]):
        (-[BrowserAppDelegate setSharedProcessProcessModel:]):
        (-[BrowserAppDelegate setSharedThreadProcessModel:]):
        * MiniBrowser/win/BrowserView.cpp:
        (BrowserView::create):

2010-06-02  Robert Hogan  <robert@webkit.org>

        Reviewed by Adam Barth.

        [Qt] Support evaluateScriptInIsolatedWorld()

        https://bugs.webkit.org/show_bug.cgi?id=40079

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::evaluateScriptInIsolatedWorld):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-06-18  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Darin Adler.

        Add three more non-core Chromium builders to start testing DumpRenderTree.
        https://bugs.webkit.org/show_bug.cgi?id=40335

        * BuildSlaveSupport/build.webkit.org-config/config.json: Added 3 builders.

2010-06-18  Drew Wilson  <atwilson@chromium.org>

        Reviewed by Darin Fisher.

        [Chromium] Plumbing for top-level frame names
        https://bugs.webkit.org/show_bug.cgi?id=40430

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::reset):
        Changed obsolete call to clearName() to use setName(WebString()) instead.

2010-06-18  Sam Weinig  <weinig@apple.com>

        Rolling http://trac.webkit.org/changeset/61297 back in.

        * MiniBrowser/MiniBrowser.xcodeproj/project.pbxproj:
        * MiniBrowser/mac/WebBundle/WebBundleMain.c: Removed.
        * MiniBrowser/mac/WebBundle/WebBundleMain.m: Added.
        (_didClearWindow):
        (_didCreatePage):
        (WKBundleInitialize):

2010-06-18  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=40803
        TestNetscapePlugin has an incorrect implementation of "property" property

        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp: (pluginGetProperty): Don't
        pass a static string back, it's going to be released by NPAPI implementation.

2010-06-18  Leandro Pereira  <leandro@profusion.mobi>

        Unreviewed.

        Adding myself to the committers list.

        * Scripts/webkitpy/common/config/committers.py:

2010-06-17  Tony Chang  <tony@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] cleanup redundant DEPS value and remove buildbot cleanup code
        https://bugs.webkit.org/show_bug.cgi?id=40615

        * Scripts/update-webkit-chromium: remove directory removal of third_party in old checkouts

2010-06-17  Ada Chan  <adachan@apple.com>

        Rolling out http://trac.webkit.org/changeset/61297 due to build errors.

        * MiniBrowser/MiniBrowser.xcodeproj/project.pbxproj:
        * MiniBrowser/mac/WebBundle/WebBundleMain.c: Copied from MiniBrowser/mac/WebBundle/WebBundleMain.c.
        * MiniBrowser/mac/WebBundle/WebBundleMain.m: Removed.

2010-06-17  Darin Adler  <darin@apple.com>

        One more try at fix for Chromium build.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell): Use set again instead of =.

2010-06-17  Darin Adler  <darin@apple.com>

        Fix Chromium build.

        I didn't realize that neither Chromium nor Qt share the DumpRenderTree
        code with all the other platforms! Wow, that should be fixed at some point.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell): Changed back to using "new".
        * DumpRenderTree/chromium/TestShell.h: Changed back to OwnPtr.

2010-06-17  Simon Hausmann  <simon.hausmann@nokia.com>

        Unreviewed Qt build fix.

        LayoutTestController in the Qt DRT is not using refs :)

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):

2010-06-17  Darin Adler  <darin@apple.com>

        Reviewed by Sam Weinig.

        Use adoptRef and create functions in more code paths
        https://bugs.webkit.org/show_bug.cgi?id=40760

        * DumpRenderTree/DumpRenderTree.h: Change gLayoutTestController to a RefPtr.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::create): Added.
        * DumpRenderTree/LayoutTestController.h: Declare the create function.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::TestShell): Use create instead of new.
        * DumpRenderTree/chromium/TestShell.h: Use RefPtr instead of OwnPtr.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (runTest): Use RefPtr and create instead of OwnPtr and new.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (runTest): Use RefPtr and create instead of OwnPtr and new.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree): Use create and releaseRef
        instead of new.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (runTest): Use RefPtr and create instead of OwnPtr and new.

        * DumpRenderTree/wx/DumpRenderTreeWx.cpp:
        (runTest): Use RefPtr and create instead of OwnPtr and new.
        (MyApp::OnInit): Removed unneeded code to delete the layout
        test controller. This is done during each test.

2010-06-17  Kent Tamura  <tkent@chromium.org>

        Reviewed by Shinichiro Hamaji.

        [DRT/Chromium] Fix a bug of Windows pixel tests
        https://bugs.webkit.org/show_bug.cgi?id=40763

        * DumpRenderTree/chromium/TestEventPrinter.cpp:
        (TestShellPrinter::handleImage):

2010-06-16  Kent Tamura  <tkent@chromium.org>

        Reviewed by Shinichiro Hamaji.

        [DRT/Chromium] Fix crash on Mac Release
        https://bugs.webkit.org/show_bug.cgi?id=40759

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::paintRect): We should not use m_canvas directly because
          it is created lazily in canvas().

2010-06-16  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix after new method addition.

        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::pageProperty):

2010-06-16  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Set current working directory for each of tests
        https://bugs.webkit.org/show_bug.cgi?id=40668

        This change fixes tests with eventSender.beginDragWithFiles().

        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (runTest):

2010-06-16  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Gustavo Noronha Silva.

        [GTK] r60803 broke media/controls-drag-timebar.html
        https://bugs.webkit.org/show_bug.cgi?id=40269

        Only queue events while the mouse button is down, if drag mode is enabled. Some
        tests may disable drag mode, to prevent the queuing of events in this situation.

        * DumpRenderTree/gtk/EventSender.cpp:
        (sendOrQueueEvent): Only queue events here if dragMode is true.

2010-06-16  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Gustavo Noronha Silva.

        [GTK] Remove the abuse of GDK_CURRENT_TIME in the DRT
        https://bugs.webkit.org/show_bug.cgi?id=40600

        * DumpRenderTree/gtk/EventSender.cpp:
        (prepareMouseButtonEvent): Remove logic adding an offset to GDK_CURRENT_TIME.

2010-06-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Dimitri Glazkov.

        Add a hidden land-cowboy command to webkit-patch to help land quick
        build fixes.

        * Scripts/webkitpy/tool/commands/download.py:
        * Scripts/webkitpy/tool/steps/preparechangelog.py:

2010-06-16  Adam Roben  <aroben@apple.com>

        Convert console messages to UTF-8 before printing them

        Speculative fix for <http://webkit.org/b/40731> REGRESSION (r61234):
        http/tests/security/xssAuditor/embed-tag-null-char.html and
        http/tests/security/xssAuditor/object-embed-tag-null-char.html fail on
        Windows. (I can't test the fix because Apache is crashing on my
        computer.)

        Reviewed by Alexey Proskuryakov.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (toUTF8): Extracted the code into an overload that takes a wide string
        and a length, then added an overload that takes a wstring.

        * DumpRenderTree/win/DumpRenderTreeWin.h: Declare the new toUTF8
        overload.

        * DumpRenderTree/win/UIDelegate.cpp:
        (UIDelegate::webViewAddMessageToConsole): Use toUTF8 to convert to
        UTF-8 instead of letting printf convert to the current code page.

2010-06-16  Drew Wilson  <atwilson@chromium.org>

        Reviewed by Kent Tamura.

        [Chromium] Plumbing for top-level frame names
        https://bugs.webkit.org/show_bug.cgi?id=40430

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::createView):
        Migrate to new createView() API.
        * DumpRenderTree/chromium/WebViewHost.h:
        Remove obsolete createView() methods, add new createView() API that takes a frameName parameter.

2010-06-16  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Scroll wheel event support to graphics based DRT
        https://bugs.webkit.org/show_bug.cgi?id=40577

        * DumpRenderTree/qt/EventSenderQt.cpp:
        (EventSender::continuousMouseScrollBy):
        (EventSender::createGraphicsSceneWheelEvent):
        * DumpRenderTree/qt/EventSenderQt.h:

2010-06-16  Adam Roben  <aroben@apple.com>

        Remove a stray newline from the Windows version of TestNetscapePlugin

        Reviewed by Alexey Proskuryakov.

        Fixes <http://webkit.org/b/40728>
        plugins/geturlnotify-during-document-teardown.html fails on Windows

        * DumpRenderTree/win/TestNetscapePlugin/main.cpp:
        (NPP_Destroy): Removed extra newline that the Mac version doesn't
        have.

2010-06-16  Adam Roben  <aroben@apple.com>

        Respect LayoutTestController::isPrinting on Windows

        This gets some printing tests closer to passing (like
        printing/page-rule-in-media-query.html).

        Fixes <http://webkit.org/b/40727>.

        Reviewed by Dan Bernstein.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (dump): Pass LayoutTestController::isPrinting to
        IWebFramePrivate::renderTreeAsExternalRepresentation.

2010-06-15  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Enable HTML5 lexer
        https://bugs.webkit.org/show_bug.cgi?id=40650

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (initializeGlobalsFromCommandLineOptions):

2010-06-10  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Shinichiro Hamaji.

        Implement render style selection for pages to support CSS3 Paged Media.
        https://bugs.webkit.org/show_bug.cgi?id=35961

        * DumpRenderTree/LayoutTestController.cpp:
        (parsePagePropertyParameters):
        (pagePropertyCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::pageProperty):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::pageProperty):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::pageProperty):

2010-06-15  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Fix for https://bugs.webkit.org/show_bug.cgi?id=40630
        WebKit2: Add mechanism to inject code into the WebProcess on startup

        Add initial InjectedBundle support.

        * MiniBrowser/MiniBrowser.xcodeproj/project.pbxproj:
        * MiniBrowser/WebBundle-Info.plist: Added.
        Add test InjectedBundle to the project.

        * MiniBrowser/mac/AppDelegate.m:
        (-[BrowserAppDelegate init]):
        Get the path to the WebBundle from the the main bundle and pass it to the new
        WKContextCreateWithInjectedBundlePath function.

        * MiniBrowser/mac/BrowserWindowController.m:
        (_didChangeProgress):
        Fix the build.  This has been broken for a while.

        * MiniBrowser/mac/WebBundle: Added.
        * MiniBrowser/mac/WebBundle/WebBundleMain.c: Added.
        (_didCreatePage):
        (WKBundleInitialize):
        Add really basic InjectedBundle.

        * MiniBrowser/win/BrowserView.cpp:
        (BrowserView::create):
        Switch from WKContextCreateWithProcessModel to WKContextCreate and remove commented out code.

2010-06-15  Dumitru Daniliuc  <dumi@chromium.org>

        Reviewed by Darin Adler.

        Adding myself to the reviewers list.
        https://bugs.webkit.org/show_bug.cgi?id=40693

        * Scripts/webkitpy/common/config/committers.py:

2010-06-15  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        Switch to using GIO methods instead of realpath in GtkLauncher to determine
        the file URI. This should remove warnings about realpath being undefined
        when compiling with '-ansi'.

        * GtkLauncher/main.c:
        (filenameToURL): Use GIO instead of realpath to determine file URI.

2010-06-15  Adam Roben  <aroben@apple.com>

        Remove the redundant set-apple-windows-environment-variables script

        Apparently update-webkit does this for you these days.

        Rubber-stamped by Steve Falkenburg.

        * Scripts/set-apple-windows-environment-variables: Removed.

2010-06-14  Adam Roben  <aroben@apple.com>

        Add a script to set the WebKitOutputDir and WebKitLibrariesDir
        environment variables

        Fixes <http://webkit.org/b/40595>.

        Reviewed by Steve Falkenburg.

        * Scripts/set-apple-windows-environment-variables: Added.
        (to_windows_path): Passes the passed-in path through cygpath to
        generate a Windows-style path.
        (main): Sets the WebKitOutputDir and WebKitLibrariesDir environment
        variables to their defaults, if they aren't already set.

2010-06-14  Adam Roben  <aroben@apple.com>

        Speed up run-safari/debug-safari on Windows

        Fixes <http://webkit.org/b/40586>.

        Reviewed by Steve Falkenburg.

        * Scripts/webkitdirs.pm:
        (runSafari): When debugging, set up the environment to run Safari
        using the built WebKit.dll, then use "devenv /debugexe Safari.exe" to
        actually launch the debugger. When not debugging, just run WebKit.exe
        and it will do the rest for us.

2010-06-15  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] DRT EventSender support to graphics context events
        https://bugs.webkit.org/show_bug.cgi?id=40324

        * DumpRenderTree/qt/EventSenderQt.cpp:
        (EventSender::contextClick):

2010-06-14  Tony Chang  <tony@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] checkout chromium third_party directly
        https://bugs.webkit.org/show_bug.cgi?id=40556

        * Scripts/update-webkit-chromium: some migration code for the bots

2010-06-14  Alexey Proskuryakov  <ap@apple.com>

        Chromium build fix.

        * DumpRenderTree/chromium/EventSender.cpp: (EventSender::keyDown): Chromium uses differently
        named constants for Windows virtual key codes, replacing VK_DELETE with VKEY_DELETE.

2010-06-14  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=40529
        eventSender.keyDown("delete") incorrectly sends a backspace on some platforms

        * DumpRenderTree/mac/EventSendingController.mm:
        (-[EventSendingController keyDown:withModifiers:withLocation:]): We were sending a broken
        event for "delete" - it had virtual key code from forward delete, and text from backspace.
        Fixed "delete" to mean forward delete.

        * DumpRenderTree/chromium/EventSender.cpp: (EventSender::keyDown):
        * DumpRenderTree/gtk/EventSender.cpp: (keyDownCallback):
        * DumpRenderTree/win/EventSender.cpp: (keyDownCallback):
        Mac DRT confusion has propagated to other platforms, fixing those.

2010-06-14  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        Small GtkLauncher build fix for some systems.

        * GtkLauncher/main.c: Add <limit.h> include.

2010-06-14  Mahesh Kulkarni  <mahesh.kulkarni@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] navigator.geolocation support for Qt port
        https://bugs.webkit.org/show_bug.cgi?id=39724

        Implementation for geolocation cases to DumpRenderTreeQt

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::WebPage::allowGeolocationRequest):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setGeolocationPermission):
        (LayoutTestController::setMockGeolocationError):
        (LayoutTestController::setMockGeolocationPosition):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController::isGeolocationPermissionSet):
        (LayoutTestController::geolocationPermission):

2010-06-13  Nathan Lawrence  <nlawrence@apple.com>

        Reviewed by Darin Adler.

        Outside of Xcode (make or WebKitTools/Scripts), there doesn't seem to
        be a way of overwriting the Xcode system path.  Making
        $WEBKITOUTPUTDIR take precedence over the system default would make
        this possible.

        * Scripts/webkitdirs.pm:

2010-06-13  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        AX: link won't return linked element if URL contains #
        https://bugs.webkit.org/show_bug.cgi?id=40192

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (linkedUIElementAtIndexCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::linkedUIElementAtIndex):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::linkedUIElementAtIndex):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::linkedUIElementAtIndex):

2010-06-13  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Adler.

        webkit-patch should add a bug URL to ChangeLogs if they don't have one yet
        https://bugs.webkit.org/show_bug.cgi?id=39550

        This can cause an extra request to bugs.webkit.org durig upload, but it
        shouldn't be too bad.  Also, this won't work if you remove the
        boilerplate created by prepare-ChangeLog.

        * Scripts/webkitpy/common/checkout/changelog.py:
        * Scripts/webkitpy/common/checkout/changelog_unittest.py:
        * Scripts/webkitpy/common/net/bugzilla.py:
        * Scripts/webkitpy/tool/steps/abstractstep.py:
        * Scripts/webkitpy/tool/steps/preparechangelog.py:
        * Scripts/webkitpy/tool/steps/preparechangelog_unittest.py: Added.

2010-06-08  Robert Hogan  <robert@webkit.org>

        Reviewed by Eric Seidel.

        [Qt] Add support for callShouldCloseOnWebView() to DRT
        https://bugs.webkit.org/show_bug.cgi?id=40330

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::callShouldCloseOnWebView):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController::setCallCloseOnWebViews):

2010-06-12  Eric Seidel  <eric@webkit.org>

        Reviewed by Daniel Bates.

        do-webcore-rename should have a --verbose option
        https://bugs.webkit.org/show_bug.cgi?id=40497

        * Scripts/do-webcore-rename:
         - Unified how we handle skipping files/directories
           this will allow us to "black list" certain files and
           directories when performing renames.
         - Made do-webcore-rename log what it's skipping when passed --verbose.

2010-06-12  Darin Adler  <darin@apple.com>

        * Scripts/run-bindings-tests: Fixed a typo in a message.

2010-06-12  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [Chromium] new-run-webkit-tests --use-drt should work with Chromium checkout
        https://bugs.webkit.org/show_bug.cgi?id=40402

        _build_path() of each Chromium port check existence of build path
        of Chromium checkout first, then check existence of build path of
        WebKit-only checkout.

        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:
        * Scripts/webkitpy/layout_tests/port/chromium_mac.py:
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:

2010-06-12  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Back-forward list dumping is incorrect

        https://bugs.webkit.org/show_bug.cgi?id=36392

        Support dumping child history items in DRT.

        Unskip:

        fast/loader/frame-src-change-added-to-history.html
        fast/loader/frame-src-change-not-added-to-history.html
        fast/loader/frame-location-change-not-added-to-history.html

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::dumpHistoryItem):

2010-06-10  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Eric Seidel.

        upload all patches that lack in-rietveld to rietveld
        https://bugs.webkit.org/show_bug.cgi?id=40444

        If it's a patch, then we'll try to upload it as long as it
        doesn't have in-rietveld set. No longer set in-rietveld? since
        it's not needed.

        * Scripts/webkitpy/common/net/bugzilla.py:

2010-06-10  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Darin Fisher.

        Fix rietveld upload when message length > 100 characters
        https://bugs.webkit.org/show_bug.cgi?id=40457

        * Scripts/webkitpy/common/net/rietveld.py:

2010-06-11  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] There should be a way to enable popups in QtTestBrowser
        https://bugs.webkit.org/show_bug.cgi?id=40427

        * QtTestBrowser/main.cpp:
        (LauncherWindow::toggleJavascriptCanOpenWindows):
        (LauncherWindow::createChrome):

2010-06-10  Adam Barth  <abarth@webkit.org>

        Reviewed by Daniel Bates.

        Make SheriffBot more chatty
        https://bugs.webkit.org/show_bug.cgi?id=40463

        People seem to like to talk to SheriffBot, so let's make him chat back.

        * Scripts/webkitpy/thirdparty/__init__.py:
        * Scripts/webkitpy/tool/bot/irc_command.py:
        * Scripts/webkitpy/tool/bot/irc_command_unittest.py: Added.
        * Scripts/webkitpy/tool/bot/sheriffircbot.py:
        * Scripts/webkitpy/tool/bot/sheriffircbot_unittest.py:

2010-06-10  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Darin Adler.

        Fix the Windows buildbot when WebKitAuxiliaryLibs.zip cannot be found on our server.
        
        Robustify update-webkit-auxiliary-libs to be able to handle the case when WebKitAuxiliaryLibs.zip doesn't exist,
        and allow the script to fall back to an existing file, only failing if there is no fallback file. Also switch to checking
        WEXITSTATUS on $result instead of just comparing $result to 0.

        * Scripts/update-webkit-auxiliary-libs:

2010-06-10  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Alexey Proskuryakov.

        don't use Exception.message as it's deprecated in python 2.6+
        https://bugs.webkit.org/show_bug.cgi?id=40449

        * Scripts/webkitpy/tool/commands/queues.py:

2010-06-10  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Adam Barth.

        fix handle_script_error in rietveld upload queue and add testing for handle_script_error
        https://bugs.webkit.org/show_bug.cgi?id=40436

        * Scripts/webkitpy/common/system/outputcapture.py:
        * Scripts/webkitpy/tool/commands/earlywarningsystem_unittest.py:
        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:
        * Scripts/webkitpy/tool/commands/queuestest.py:
        * Scripts/webkitpy/tool/mocktool.py:

2010-06-10  Jarkko Sakkinen  <jarkko.j.sakkinen@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] *All* WebGL layout tests fail!
        https://bugs.webkit.org/show_bug.cgi?id=40296

        Added test for WebKitWebGLEnabled to
        LayoutTestController::overridePreference().

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::overridePreference):

2010-06-10  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] DRT EventSender support to graphics mouse events activation
        https://bugs.webkit.org/show_bug.cgi?id=40017

        * DumpRenderTree/qt/EventSenderQt.cpp:
        (EventSender::mouseDown):
        (EventSender::mouseUp):
        (EventSender::mouseMoveTo):
        (EventSender::keyDown):
        (EventSender::contextClick):
        (EventSender::sendTouchEvent):
        (EventSender::sendOrQueueEvent):
        (EventSender::eventFilter):
        (EventSender::createGraphicsSceneMouseEvent):
        (EventSender::sendEvent):
        * DumpRenderTree/qt/EventSenderQt.h:
        (EventSender::isGraphicsBased):

2010-06-09  Adam Barth  <abarth@webkit.org>

        Reviewed by Ojan Vafai.

        webkit-patch upload fails for security bugs because there's no rietveld flag
        https://bugs.webkit.org/show_bug.cgi?id=40309

        There's probably a more elegant way of seeing whether the form control
        exists, but this seems to work.

        * Scripts/webkitpy/common/net/bugzilla.py:

2010-06-09  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Adam Barth.

        make rietveld upload faster and avoid posting to bug on errors
        https://bugs.webkit.org/show_bug.cgi?id=40389

        Only grab the first item of the upload queue instead of trying
        to compute the whole list upfront (which is O(n) bugzilla lookups!).

        Also, don't post comments to the bug when uploading fails.

        * Scripts/webkitpy/common/net/bugzilla.py:
        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:
        * Scripts/webkitpy/tool/commands/stepsequence.py:
        * Scripts/webkitpy/tool/mocktool.py:

2010-06-09  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Adam Barth.

        Rietveld upload queue fails when setting in-rietveld flag
        https://bugs.webkit.org/show_bug.cgi?id=40371

        Make the comment arguments to set_flag_on_attachment optional
        and add it to the MockBugzilla.

        * Scripts/webkitpy/common/net/bugzilla.py:
        * Scripts/webkitpy/tool/bot/queueengine.py:
        * Scripts/webkitpy/tool/commands/download_unittest.py:
        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:
        * Scripts/webkitpy/tool/mocktool.py:

2010-06-09  Kenneth Russell  <kbr@google.com>

        Reviewed by Dimitri Glazkov.

        Rename FloatArray to Float32Array
        https://bugs.webkit.org/show_bug.cgi?id=40323

        Used do-webcore-rename to perform renaming. Manually undid
        incorrect changes to WebCore/bridge/jni/jsc/JNIBridgeJSC.cpp,
        WebCore/manual-tests/resources/ArrayParameterTestApplet.java and
        ArrayParameterTestApplet.class. Updated LayoutTests. Built and ran
        all layout tests on Safari; built Chromium and ran selected WebGL
        tests.

        * Scripts/do-webcore-rename:

2010-06-08  Tony Chang  <tony@chromium.org>

        Reviewed by David Levin.

        [chromium] compile linux chromium in WebKit/out instead of WebKit/WebKit/chromium/out
        https://bugs.webkit.org/show_bug.cgi?id=40285

        * Scripts/webkitdirs.pm:
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:

2010-06-03  Roland Steiner  <rolandsteiner@chromium.org>

        Reviewed by Tamura Kent.

        Bug 40052 - [DRT/Chromium] Upstream test_shell_webthemeengine as WebThemeEngineDRT
        https://bugs.webkit.org/show_bug.cgi?id=40052
        
        Add WebThemeEngineDRT and WebThemeControlDRT ported from Chromium rev. 48907

        * DumpRenderTree/DumpRenderTree.gypi:
        * DumpRenderTree/chromium/TestShellWin.cpp:
        (platformInit):
        * DumpRenderTree/chromium/WebThemeControlDRT.cpp: Added.
        (WebKit::):
        (WebKit::WebThemeControlDRT::WebThemeControlDRT):
        (WebKit::WebThemeControlDRT::~WebThemeControlDRT):
        (WebKit::WebThemeControlDRT::box):
        (WebKit::WebThemeControlDRT::line):
        (WebKit::WebThemeControlDRT::triangle):
        (WebKit::WebThemeControlDRT::roundRect):
        (WebKit::WebThemeControlDRT::oval):
        (WebKit::WebThemeControlDRT::circle):
        (WebKit::WebThemeControlDRT::nestedBoxes):
        (WebKit::WebThemeControlDRT::markState):
        (WebKit::WebThemeControlDRT::draw):
        (WebKit::WebThemeControlDRT::drawTextField):
        (WebKit::WebThemeControlDRT::drawProgressBar):
        * DumpRenderTree/chromium/WebThemeControlDRT.h: Added.
        (WebKit::WebThemeControlDRT::):
        * DumpRenderTree/chromium/WebThemeEngineDRT.cpp: Added.
        (WebKit::):
        (WebKit::WebThemeEngineDRT::paintButton):
        (WebKit::WebThemeEngineDRT::paintMenuList):
        (WebKit::WebThemeEngineDRT::paintScrollbarArrow):
        (WebKit::WebThemeEngineDRT::paintScrollbarThumb):
        (WebKit::WebThemeEngineDRT::paintScrollbarTrack):
        (WebKit::WebThemeEngineDRT::paintTextField):
        (WebKit::WebThemeEngineDRT::paintTrackbar):
        (WebKit::WebThemeEngineDRT::paintProgressBar):
        * DumpRenderTree/chromium/WebThemeEngineDRT.h: Added.
        (WebKit::WebThemeEngineDRT::WebThemeEngineDRT):

2010-06-08  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r60878.
        http://trac.webkit.org/changeset/60878
        https://bugs.webkit.org/show_bug.cgi?id=40349

        broke linux build (Requested by tony^work on #webkit).

        * Scripts/webkitdirs.pm:
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:

2010-06-08  Tony Chang  <tony@chromium.org>

        Reviewed by David Levin.

        [chromium] compile linux chromium in WebKit/out instead of WebKit/WebKit/chromium/out
        https://bugs.webkit.org/show_bug.cgi?id=40285

        * Scripts/webkitdirs.pm:
        * Scripts/webkitpy/layout_tests/port/chromium_linux.py:

2010-06-08  Kenneth Russell  <kbr@google.com>

        Unreviewed, build fix.

        Fix build breakage from 38145
        https://bugs.webkit.org/show_bug.cgi?id=40346

        The fix for bug 38145 broke the Chromium Win build because
        Microsoft's cmath doesn't define log2. Suggested fix by zmo is to
        change log2(x) to log(x) / log(2). Built and ran WebGL layout
        tests in Safari on Mac OS X. Changed download mirrors for
        python-irclib to working ones.

        * Scripts/webkitpy/thirdparty/__init__.py:

2010-06-08  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by Eric Seidel.

        old-run-webkit-tests should use ensure-valid-python to check if it can run the websockets tests
        https://bugs.webkit.org/show_bug.cgi?id=39058

        * Scripts/old-run-webkit-tests:
         use sourceDir() to find ensure-valid-python in checkPythonVersion()

2010-06-08  Andras Becsi  <abecsi@webkit.org>

        Unreviewed buildfix after r60479.

        [GTK] Move the declaration of getRootCoords higher up to fix the build on GTK
        versions other than 2.17.3.

        * DumpRenderTree/gtk/EventSender.cpp:
        (getRootCoords):

2010-06-07  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Oliver Hunt.

        [GTK] Mouse movement should not trigger a replay of saved events in the event sender
        https://bugs.webkit.org/show_bug.cgi?id=40267

        When a mouse button is down, automatically queue mouse motion events and
        do not play them back until the mouse button is released. This matches the
        behavior of other ports' EventSenders.

        * DumpRenderTree/gtk/EventSender.cpp:
        (mouseMoveToCallback): Don't automatically replaySavedEvents for mouse motion.
        (sendOrQueueEvent): Add a shouldReplaySavedEvents argument defaulting to true.

2010-06-07  Nikolas Zimmermann  <nzimmermann@rim.com>

        Reviewed by Sam Weinig.

        Add CPP bindings generator
        https://bugs.webkit.org/show_bug.cgi?id=38279

        Integrate CPP bindings in run-bindings-tests.

        * Scripts/run-bindings-tests:

2010-06-04  Tony Gentilcore  <tonyg@chromium.org>

        Reviewed by Ojan Vafai.

        Rename 'svn_merge_base' -> 'remote_merge_base'. This was left out of r60633.
        https://bugs.webkit.org/show_bug.cgi?id=40183

        * Scripts/webkitpy/tool/steps/preparechangelog.py:

2010-06-04  Martin Robinson  <mrobinson@igalia.com>

        Unreviewed.

        Add my new email and IRC nick to committers.py.

        * Scripts/webkitpy/common/config/committers.py:

2010-06-04  Kinuko Yasuda  <kinuko@chromium.org>

        Unreviewed.

        Revert changes in json_results_generator.py's _get_svn_revision.

        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:

2010-06-04  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] GtkLauncher should support relative file paths
        https://bugs.webkit.org/show_bug.cgi?id=39944

        Allow GtkLauncher to handle relative file paths passed via command-line arguments.

        * GtkLauncher/main.c:
        (filename_to_url): Added.
        (main): Try to resolve arguments as relative file URLs first.

2010-06-04  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] EventSender should call gtk_main_do_event instead of invoking signal handlers directly
        https://bugs.webkit.org/show_bug.cgi?id=40182

        Instead of invoking signal handlers directly via g_signal_emit_by_name, call
        gtk_main_do_event. This will allow us to call gtk_get_current_event() in WebKit
        without breaking DRT.

        * DumpRenderTree/gtk/EventSender.cpp:
        (dispatchEvent): Use gtk_main_do_event instead of invoking signal handlers directly.
        (keyDownCallback): Use dispatchEvent here which now uses gtk_main_do_event.

2010-06-04  Anders Carlsson  <andersca@apple.com>

        Reviewed by David Hyatt.

        Make the editing/spelling/context-menu-suggestions.html test more robust
        https://bugs.webkit.org/show_bug.cgi?id=40178

        Change the contextClick method to return an array of strings describing the context menu items.

        * DumpRenderTree/mac/EventSendingController.mm:
        (+[EventSendingController isSelectorExcludedFromWebScript:]):
        (+[EventSendingController webScriptNameForSelector:]):
        (-[EventSendingController contextClick]):

2010-06-03  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by Shinichiro Hamaji.

        Clean up chromium-specific code from json_results_generator.py.
        https://bugs.webkit.org/show_bug.cgi?id=39665

        * Scripts/webkitpy/layout_tests/layout_package/json_layout_results_generator.py:
        * Scripts/webkitpy/layout_tests/layout_package/json_results_generator.py:
        * Scripts/webkitpy/layout_tests/port/base.py:
        * Scripts/webkitpy/layout_tests/port/chromium.py:

2010-06-04  Tony Gentilcore  <tonyg@chromium.org>

        Reviewed by Adam Barth.

        Utilize new takeFirst() method where appropriate.
        https://bugs.webkit.org/show_bug.cgi?id=40089

        * DumpRenderTree/chromium/EventSender.cpp:
        (EventSender::replaySavedEvents):
        * DumpRenderTree/chromium/LayoutTestController.cpp:
        (LayoutTestController::WorkQueue::processWork):
        (LayoutTestController::WorkQueue::reset):

2010-06-04  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Simon Hausmann.

        [Qt] QtTestLauncher should allow notifications by default.
        https://bugs.webkit.org/show_bug.cgi?id=40078

        * QtTestBrowser/main.cpp:
        (NotificationsPermissionController::NotificationsPermissionController):
        (NotificationsPermissionController::checkPermission):
        (NotificationsPermissionController::requestPermission):
        (LauncherWindow::LauncherWindow):

2010-06-04  Tony Gentilcore  <tonyg@chromium.org>

        Reviewed by Adam Barth.

        Detect whether the user's environment can open a browser.
        https://bugs.webkit.org/show_bug.cgi?id=40136

        Some environments like cygwin silently fail webbrowser.open() causing
        webkit-patch upload not to display any diff. This detects environments
        where webbrowser.open() would fail by testing if webbrowser.get()
        raises an exception.

        * Scripts/webkitpy/common/system/user.py:
        * Scripts/webkitpy/tool/mocktool.py:
        * Scripts/webkitpy/tool/steps/confirmdiff.py:

2010-06-03  Tony Gentilcore  <tonyg@chromium.org>

        Reviewed by David Levin.

        Add dependencies required to link with VS Express 2005.
        https://bugs.webkit.org/show_bug.cgi?id=40038

        Visual Studio implicitly links against these libs.
        VC++ Express does not.

        * WebKitAPITest/WebKitAPITestCommon.vsprops:
        * WinLauncher/WinLauncher.vcproj:

2010-06-03  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by David Levin.

        bad codecs.open in webkitpy/layout_tests/ports/websocket_server.py
        https://bugs.webkit.org/show_bug.cgi?id=40105

        * Scripts/webkitpy/layout_tests/port/websocket_server.py:
        - kill pywebsocket process when url is not alive and the process is not
          terminated, not to leave pywebsocket server running.
        - fix codecs.open parameters.

2010-06-03  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by Alexey Proskuryakov.

        old-run-webkit-tests should use ensure-valid-python to check if it can run the websockets tests
        https://bugs.webkit.org/show_bug.cgi?id=39058

        * Scripts/ensure-valid-python:
          - Perl 5.8 doesn't have File::Temp->newdir().  Use File::Temp->tempdir() instead.
          - Add --check-only and --help option.
          - --check-only option only checks python version and don't try to install Python 2.5.
          - Set executable bit.
        * Scripts/old-run-webkit-tests:
          - Check if it can run the websocket tests by calling ensure-valid-python --check-only.

2010-05-14  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Adam Barth.

        add a RietveldUploadQueue to upload in-rietveld? patches to rietveld
        https://bugs.webkit.org/show_bug.cgi?id=38918

        Patches with in-rietveld? get uploaded to rietveld and get marked
        in-rietveld+. If the upload fails, they are marked in-rietveld-
        and an error is logged to the bug, like the commit-queue.

        Also, get rid of --fancy-review and the ability to upload to rietveld
        using webkit-patch upload/post.

        * Scripts/webkitpy/common/net/bugzilla.py:
        * Scripts/webkitpy/common/net/bugzilla_unittest.py:
        * Scripts/webkitpy/tool/commands/download.py:
        * Scripts/webkitpy/tool/commands/download_unittest.py:
        * Scripts/webkitpy/tool/commands/queues.py:
        * Scripts/webkitpy/tool/commands/queues_unittest.py:
        * Scripts/webkitpy/tool/commands/upload.py:
        * Scripts/webkitpy/tool/commands/upload_unittest.py:
        * Scripts/webkitpy/tool/mocktool.py:
        * Scripts/webkitpy/tool/steps/options.py:
        * Scripts/webkitpy/tool/steps/postcodereview.py:

2010-05-24  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Chris Jerdonek.

        many webkit-patch commands fail in a non-svn tracking git checkout
        https://bugs.webkit.org/show_bug.cgi?id=38156

        If the svn-tracking-branch (trunk) doesn't exist, fallback to the git remote-tracking-branch (master).
        If neither exists, then error out. This makes webkit-patch work
        for anyone that follows the intructions at http://trac.webkit.org/wiki/UsingGitWithWebKit
        to checkout webkit. The fallback to master is for people who don't
        do the steps on that page for tracking svn.

        * Scripts/webkitpy/common/checkout/scm.py:
        * Scripts/webkitpy/common/checkout/scm_unittest.py:

2010-06-03  Mike Fenton  <mifenton@rim.com>

        Unreviewed.

        Reverse e-mail for myself in committers.py to correspond with bugzilla account.

        * Scripts/webkitpy/common/config/committers.py:

2010-06-03  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: a number of fixes that make InspectorController
        happy with null redirects.

        https://bugs.webkit.org/show_bug.cgi?id=40109

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (runTest):
        * DumpRenderTree/mac/DumpRenderTree.mm:
        (runTest):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (runTest):

2010-06-02  Tasuku Suzuki  <tasuku.suzuki@nokia.com>

        Reviewed by Shinichiro Hamaji.

        [Qt] Fix compilation with QT_NO_PROPERTIES
        https://bugs.webkit.org/show_bug.cgi?id=38324

        * QtTestBrowser/main.cpp:
        (LauncherWindow::init):

2010-06-02  Diego Gonzalez  <diegohcg@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Make possible run DRT with QGraphicsWebView
        https://bugs.webkit.org/show_bug.cgi?id=40016

        Make possible to use a environment variable for switching backend.
        Usage: QT_DRT_WEBVIEW_MODE=graphics WebKitTools/Scripts/run-webkit-tests --qt

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::WebViewGraphicsBased::WebViewGraphicsBased):
        (WebCore::DumpRenderTree::DumpRenderTree):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        (WebCore::DumpRenderTree::setGraphicsBased):
        (WebCore::DumpRenderTree::isGraphicsBased):
        (WebCore::WebViewGraphicsBased::graphicsView):
        (WebCore::WebViewGraphicsBased::setPage):
        * Scripts/old-run-webkit-tests:

2010-06-02  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Eric Seidel.

        Slave lost shouldn't be recognized as build failed.
        https://bugs.webkit.org/show_bug.cgi?id=39282

        * Scripts/webkitpy/common/net/buildbot.py: Treat slave lost as green.
        * Scripts/webkitpy/common/net/buildbot_unittest.py: Add unit test for slave lost.

2010-06-01  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Fix the lifecycle of notification objects
        https://bugs.webkit.org/show_bug.cgi?id=40003

        Remove the dependency of notifications on QWebPage.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::requestPermissionCallback):
        (WebCore::WebPage::WebPage):
        (WebCore::DumpRenderTree::requestPermission):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:

2010-06-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r60559.
        http://trac.webkit.org/changeset/60559
        https://bugs.webkit.org/show_bug.cgi?id=40055

        It broke python unit test (Requested by Ossy on #webkit).

        * Scripts/webkitpy/common/net/buildbot.py:

2010-06-02  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Eric Seidel.

        Slave lost shouldn't be recognized as build failed.
        https://bugs.webkit.org/show_bug.cgi?id=39282

        * Scripts/webkitpy/common/net/buildbot.py:

2010-06-02  Tony Gentilcore  <tonyg@chromium.org>

        Reviewed by Eric Seidel.

        Fix crash caused when assigned_to is disabled
        https://bugs.webkit.org/show_bug.cgi?id=40039

        * Scripts/webkitpy/common/net/bugzilla.py:

2010-06-02  Sterling Swigart  <sswigart@google.com>

        Reviewed by David Levin.

        Image Resizer Patch 0: Added compilation argument to conditionally compile pending patches.
        https://bugs.webkit.org/show_bug.cgi?id=39906

        * Scripts/build-webkit:

2010-06-01  Raine Makelainen  <raine.makelainen@nokia.com>

        Reviewed by Simon Hausmann.

        Fixed tests to use QWebSettings::JavascriptCanAccessClipboard instead of QWebSettings::JavaScriptCanAccessClipboard.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::WebPage::WebPage):
        (WebCore::WebPage::resetSettings):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setJavaScriptCanAccessClipboard):

2010-06-01  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Mark Rowe.

        A nicer Tiger build fix.

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        * DumpRenderTree/mac/Configurations/Base.xcconfig:
        Enable GCC_OBJC_CALL_CXX_CDTORS via .xcconfig.

2010-06-01  Alexey Proskuryakov  <ap@apple.com>

        A real Tiger build fix.

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj: Enable GCC_OBJC_CALL_CXX_CDTORS
        for all configurations, not just debug.

2010-06-01  Alexey Proskuryakov  <ap@apple.com>

        Tiger build fix.

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj: Enable GCC_OBJC_CALL_CXX_CDTORS.

2010-06-01  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Get more mouse tests passing
        https://bugs.webkit.org/show_bug.cgi?id=39040

        Reproduce the logic from the Windows EventSender for mapping
        button numbers to GDK button numbers. Move this logic to the
        prepareMouseButtonEvent helper.

        * DumpRenderTree/gtk/EventSender.cpp:
        (prepareMouseButtonEvent): Reproduce Windows logic.
        (contextClickCallback): Move mapping logic to prepareMouseButtonEvent.
        (mouseDownCallback): Ditto.
        (mouseUpCallback): Ditto.

2010-06-01  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=39434
        REGRESSION (r59811): Geolocation callbacks cannot be created

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj: Added MockGeolocationProvider.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (createWebViewAndOffscreenWindow): Tell the view to use MockGeolocationProvider. 
        (resetWebViewToConsistentStateBeforeTesting): Make sure that mock notifications don't leak
        into subsequent tests.

        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setMockGeolocationPosition): Changed to use MockGeolocationProvider.
        (LayoutTestController::setMockGeolocationError): Ditto.

        * DumpRenderTree/mac/MockGeolocationProvider.h: Added.
        * DumpRenderTree/mac/MockGeolocationProvider.mm: Added.
        (+[MockGeolocationProvider shared]):
        (-[MockGeolocationProvider dealloc]):
        (-[MockGeolocationProvider setPosition:]):
        (-[MockGeolocationProvider setError:]):
        (-[MockGeolocationProvider registerWebView:]):
        (-[MockGeolocationProvider unregisterWebView:]):
        (-[MockGeolocationProvider lastPosition]):
        (-[MockGeolocationProvider stopTimer]):
        (-[MockGeolocationProvider timerFired]):

        * DumpRenderTree/mac/UIDelegate.mm:
        (-[UIDelegate webView:decidePolicyForGeolocationRequestFromOrigin:frame:listener:]):
        This delegate method must send a response. I'm not sure what the two-stage check is supposed
        to achieve, it seems unnecessary.

2010-05-12  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Double clicks cause three button press events
        https://bugs.webkit.org/show_bug.cgi?id=38853

        WebKit now filters the extra GDK_BUTTON_PRESS before GDK_2BUTTON_PRESS
        and GDK_3BUTTON_PRESS via gdk_event_peek(). Since EventSender bypasses
        the GDK event queue entirely, we simply do not send the extra event.

        * DumpRenderTree/gtk/EventSender.cpp:
        (mouseDownCallback): Do not send extra event. Send GDK_3BUTTON_PRESS appropriately.
        (dispatchEvent): Properly handle GDK_3BUTTON_PRESS.

2010-06-01  Martin Robinson  <mrobinson@igalia.com>

        Not reviewed. Build fix.

        Fix GTK+ build caused by a bad merge.

        * DumpRenderTree/gtk/EventSender.cpp: 
        (prepareMouseButtonEvent): Use the GdkEvent union as a pointer here.

2010-06-01  Martin Robinson  <mrobinson@webkit.org>

        Reviewed by Xan Lopez.

        [GTK] Double clicks cause three button press events
        https://bugs.webkit.org/show_bug.cgi?id=38853

        Small EventSender cleanups. Consolidate some common code. Style fixes.

        * DumpRenderTree/gtk/EventSender.cpp:
        (prepareMouseButtonEvent): Added.
        (contextClickCallback): Use prepareMouseButtonEvent.
        (mouseDownCallback): Use prepareMouseButtonEvent.
        (mouseUpCallback): Use prepareMouseButtonEvent.
        (mouseMoveToCallback): Small style fix.

2010-06-01  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Double clicks cause three button press events
        https://bugs.webkit.org/show_bug.cgi?id=38853

        Add rudimentary leapForward support to the GTK+ DRT. leapForward allows a test
        to pause for a specified amount of time. It is used in the processing of drag-
        -and-drop data as well as to separate distinct mouse double-clicks in some tests.
        This patch enables tests that rely on the latter behavior to pass.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (webViewWindowObjectCleared): Only initialize the EventSender when loading the top frame.
        * DumpRenderTree/gtk/EventSender.cpp:
        (leapForwardCallback): Add support for adjusting the time offset on leapForward().
        (contextClickCallback): Use sendOrQueueEvent.
        (updateClickCount): Take the time offset into account when counting clicks.
        (mouseDownCallback): Use sendOrQueueEvent.
        (getStateFlags): Change down/currentEventButton into buttonCurrentlyDown/lastClickButton.
        (mouseUpCallback): Use sendOrQueueEvent.
        (mouseMoveToCallback): Ditto.
        (mouseWheelToCallback): Ditto.
        (sendOrQueueEvent): Added.
        (dispatchEvent): Added.
        (replaySavedEvents): Pause when an event has a delay and defer to dispatchEvent.
        (makeEventSender): Only initialize the EventSender when loading the top frame.
        * DumpRenderTree/gtk/EventSender.h: Ditto.

2010-06-01  Martin Robinson  <mrobinson@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] css1/color_and_background/background_attachment.html fails on the 32-bit debug bot
        https://bugs.webkit.org/show_bug.cgi?id=39101

        Work around timing issues for render tree dumps by pumping the
        main loop before doing the dump. Resize events are asynchronous
        in GTK+, so sometimes resize requests are still pending when DRT
        dumps the tree.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (dump): Pump the main loop before dumping the render tree.

2010-05-31  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Fix crash of a test after another test with multiple windows
        https://bugs.webkit.org/show_bug.cgi?id=39942

        If a test opens multiple windows, focuses on non-main window, and
        the focused window is closed, TestShell::m_focusedWidget points a
        deleted object.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::closeWindow): Clear m_focusedWidget.

2010-05-30  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        new-run-webkit-tests: Support DRT on Chromium-win
        https://bugs.webkit.org/show_bug.cgi?id=39810

        Add --test-shell flag to DRT/Chromium, and it changes DRT so that
        it behaves like test_shell about command analysis, printing
        format, pixel dumping, and timeout handling.

        chromium.py and chromium_win.py supports the --test-shell flag and
        DRT/Chromium-win binary names.
        
        * DumpRenderTree/DumpRenderTree.gypi: Add new files.
        * DumpRenderTree/chromium/DumpRenderTree.cpp:
        (runTest): Support for test_shell-style command.
        (main): Introduce --test-shell.
        * DumpRenderTree/chromium/TestEventPrinter.cpp: Added.
        * DumpRenderTree/chromium/TestEventPrinter.h: Added.
          TestEventPrinter class manages stdio output and image output.
          TestEventPrinter.cpp has two implementations; DRTPrinter and
          TestShellPrinter.
        * DumpRenderTree/chromium/TestShell.cpp:
          Some changes for TestEventPrinter.
        (TestShell::TestShell):
        (TestShell::runFileTest):
        (TestShell::testTimedOut):
        (TestShell::dump):
        (TestShell::dumpImage):
        * DumpRenderTree/chromium/TestShell.h:
        (TestShell::printer):
        (TestShell::layoutTestTimeout):
        (TestShell::layoutTestTimeoutForWatchDog):
        (TestShell::setLayoutTestTimeout):
        * DumpRenderTree/chromium/TestShellWin.cpp:
        (watchDogThread): Use TestShell::layoutTestTimeoutForWatchDog().
        * Scripts/webkitpy/layout_tests/port/chromium.py:
        * Scripts/webkitpy/layout_tests/port/chromium_win.py:

2010-05-30  Robert Hogan  <robert@webkit.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Enhance Qt DRT implementation to support platform scroll wheel events.

        https://bugs.webkit.org/show_bug.cgi?id=36004

        * DumpRenderTree/qt/EventSenderQt.cpp:
        (EventSender::EventSender): QApplication::setWheelScrollLines(2) in order to match
                                    Scrollbar::pixelsPerLineStep() for DRT testing.
        (EventSender::mouseScrollBy): Added
        (EventSender::continuousMouseScrollBy): Added
        * DumpRenderTree/qt/EventSenderQt.h:

2010-05-28  Adam Barth  <abarth@webkit.org>

        Reviewed by David Levin.

        webkit-patch should support CHANGE_LOG_EDIT_APPLICATION
        https://bugs.webkit.org/show_bug.cgi?id=39546

        One sublty is that we want to wait for the user to finish editing the
        ChangeLog before moving on to the next step.  That means we want to pass
        -W to open.  However, if the user is using Xcode to edit the ChangeLog,
        we don't want them to have to exit the Xcode application.  For this reason,
        we create a new instance of the application with -n.
        
        Overall, xed seems like a better solution, so we recommend that too.

        * Scripts/webkitpy/common/system/user.py:
        * Scripts/webkitpy/tool/mocktool.py:
        * Scripts/webkitpy/tool/steps/editchangelog.py:

2010-05-21  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Ojan Vafai.

        new-run-webkit-tests: fix handling of Ctrl-C to exit even if some
        threads are wedged. Also, the script will print the results of the
        tests completed when the interrupt occurs.

        https://bugs.webkit.org/show_bug.cgi?id=33238

        * Scripts/webkitpy/layout_tests/layout_package/dump_render_tree_thread.py:
        * Scripts/webkitpy/layout_tests/layout_package/printing.py:
        * Scripts/webkitpy/layout_tests/layout_package/printing_unittest.py:
        * Scripts/webkitpy/layout_tests/run_webkit_tests.py:

2010-05-28  Darin Adler  <darin@apple.com>

        Ignore more Python messiness.

        * Scripts/webkitpy/layout_tests/data/platform/test: Added property svn:ignore.
        * Scripts/webkitpy/layout_tests/layout_package: Added property svn:ignore.
        * Scripts/webkitpy/layout_tests/test_types: Added property svn:ignore.
        * Scripts/webkitpy/test: Added property svn:ignore.
        * Scripts/webkitpy/thirdparty/simplejson: Added property svn:ignore.

2010-05-28  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Beth Dakin.

        Adding myself as a reviewer.

        * Scripts/webkitpy/common/config/committers.py:

2010-05-28  Chris Fleizach  <cfleizach@apple.com>

        Build fix. No review.

        AX: need to catch NSAccessibilityExceptions in DRT
        https://bugs.webkit.org/show_bug.cgi?id=39881

        It looks like Tiger doesn't like seeing a NSMakeRange inside a @try.

        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::rowIndexRange):
        (AccessibilityUIElement::columnIndexRange):
        (AccessibilityUIElement::selectedTextRange):

2010-05-28  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        AX: need to catch NSAccessibilityExceptions in DRT
        https://bugs.webkit.org/show_bug.cgi?id=39881

        Normally, accessibility exceptions are caught in the AX Runtime on the Mac, but 
        because DRT is its own AX client, no one is there to catch these otherwise innocuous exceptions.
  
        So DRT should wrap exception handlers around its AX related calls.

        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (attributesOfElement):
        (AccessibilityUIElement::getLinkedUIElements):
        (AccessibilityUIElement::getDocumentLinks):
        (AccessibilityUIElement::getChildren):
        (AccessibilityUIElement::getChildrenWithRange):
        (AccessibilityUIElement::ariaOwnsElementAtIndex):
        (AccessibilityUIElement::ariaFlowToElementAtIndex):
        (AccessibilityUIElement::disclosedRowAtIndex):
        (AccessibilityUIElement::selectedRowAtIndex):
        (AccessibilityUIElement::titleUIElement):
        (AccessibilityUIElement::parentElement):
        (AccessibilityUIElement::disclosedByRow):
        (AccessibilityUIElement::stringAttributeValue):
        (AccessibilityUIElement::boolAttributeValue):
        (AccessibilityUIElement::isAttributeSettable):
        (AccessibilityUIElement::isAttributeSupported):
        (AccessibilityUIElement::role):
        (AccessibilityUIElement::subrole):
        (AccessibilityUIElement::roleDescription):
        (AccessibilityUIElement::title):
        (AccessibilityUIElement::description):
        (AccessibilityUIElement::orientation):
        (AccessibilityUIElement::stringValue):
        (AccessibilityUIElement::language):
        (AccessibilityUIElement::helpText):
        (AccessibilityUIElement::x):
        (AccessibilityUIElement::y):
        (AccessibilityUIElement::width):
        (AccessibilityUIElement::height):
        (AccessibilityUIElement::clickPointX):
        (AccessibilityUIElement::clickPointY):
        (AccessibilityUIElement::intValue):
        (AccessibilityUIElement::minValue):
        (AccessibilityUIElement::maxValue):
        (AccessibilityUIElement::valueDescription):
        (AccessibilityUIElement::insertionPointLineNumber):
        (AccessibilityUIElement::isActionSupported):
        (AccessibilityUIElement::isEnabled):
        (AccessibilityUIElement::isRequired):
        (AccessibilityUIElement::isSelected):
        (AccessibilityUIElement::isExpanded):
        (AccessibilityUIElement::hierarchicalLevel):
        (AccessibilityUIElement::ariaIsGrabbed):
        (AccessibilityUIElement::ariaDropEffects):
        (AccessibilityUIElement::lineForIndex):
        (AccessibilityUIElement::boundsForRange):
        (AccessibilityUIElement::stringForRange):
        (AccessibilityUIElement::attributesOfColumnHeaders):
        (AccessibilityUIElement::attributesOfRowHeaders):
        (AccessibilityUIElement::attributesOfColumns):
        (AccessibilityUIElement::attributesOfRows):
        (AccessibilityUIElement::attributesOfVisibleCells):
        (AccessibilityUIElement::attributesOfHeader):
        (AccessibilityUIElement::rowCount):
        (AccessibilityUIElement::columnCount):
        (AccessibilityUIElement::indexInTable):
        (AccessibilityUIElement::rowIndexRange):
        (AccessibilityUIElement::columnIndexRange):
        (AccessibilityUIElement::cellForColumnAndRow):
        (AccessibilityUIElement::selectedTextRange):
        (AccessibilityUIElement::setSelectedTextRange):
        (AccessibilityUIElement::increment):
        (AccessibilityUIElement::decrement):
        (AccessibilityUIElement::showMenu):
        (AccessibilityUIElement::press):
        (AccessibilityUIElement::url):
        (AccessibilityUIElement::hasPopup):

2010-05-28  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Laszlo Gombos.

        [Qt] Pass all web notification layout tests
        https://bugs.webkit.org/show_bug.cgi?id=39146

        Mimic Chromium's test_shell security model in Qt's DRT.
        It makes a list of origins which were granted permission to display
        notifications, and only those origins can display notifications.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::checkPermissionCallback):
        (WebCore::requestPermissionCallback):
        (WebCore::WebPage::WebPage):
        (WebCore::DumpRenderTree::checkPermission):
        (WebCore::DumpRenderTree::requestPermission):
        * DumpRenderTree/qt/DumpRenderTreeQt.h:
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::grantDesktopNotificationPermission):
        (LayoutTestController::checkDesktopNotificationPermission):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2010-05-27  Philippe Normand  <pnormand@igalia.com>

        Reviewed by Shinichiro Hamaji.

        check-webkit-style complains about use of NULL in GTK function calls that require sentinels
        https://bugs.webkit.org/show_bug.cgi?id=39372

        Don't warn about NULL in g_*() calls. Zero can't be used instead
        for calls like g_build_filename and g_object_get/set.

        * Scripts/webkitpy/style/checkers/cpp.py:
        * Scripts/webkitpy/style/checkers/cpp_unittest.py:

2010-05-27  Luiz Agostini  <luiz.agostini@openbossa.org>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Platform plugin example
        https://bugs.webkit.org/show_bug.cgi?id=39489

        Exempting directory WebKit/qt/examples/ from style guide.

        * Scripts/webkitpy/style/checker.py:

2010-05-26  Philippe Normand  <pnormand@igalia.com>

        Reviewed by David Levin.

        [style] Allow usage of NULL in gst_*_many()
        https://bugs.webkit.org/show_bug.cgi?id=39740

        Don't warn if NULL is used by gst_*_many() functions. Zero can't
        be used for the reason explained in Bug 32858.

        * Scripts/webkitpy/style/checkers/cpp.py:
        * Scripts/webkitpy/style/checkers/cpp_unittest.py:

2010-05-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Update script to run the normal version of the parser tests.

        * Scripts/test-html5-parser:

2010-05-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Add HTML5 parser support to run-webkit-tests
        https://bugs.webkit.org/show_bug.cgi?id=39815

        * Scripts/old-run-webkit-tests:

2010-05-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Make HTML5 lexer not ASSERT when resuming partial parses
        https://bugs.webkit.org/show_bug.cgi?id=39755

        Add webkit-resumer.html to the HTML5 parser test suite.

        * Scripts/test-html5-parser:

2010-05-24  Tony Chang  <tony@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] setup fonts on chromium linux DRT
        https://bugs.webkit.org/show_bug.cgi?id=39644

        * DumpRenderTree/chromium/TestShellGtk.cpp:
        (setupFontconfig):
        (platformInit):
        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::paintRect):  Fix a bug where in release builds, we didn't initialize m_canvas.
        * DumpRenderTree/chromium/fonts.conf: Added.

2010-05-24  Dirk Pranke  <dpranke@chromium.org>

        Reviewed by Dimitri Glazkov.

        Re-commit r58765 - it had been rolled out to see if it was causing
        a perf regression (in r59787 and r59789), but that does not seem to
        have been the case.

        https://bugs.webkit.org/show_bug.cgi?id=39605

        * DumpRenderTree/chromium/NotificationPresenter.cpp:
        (NotificationPresenter::show):

2010-05-25  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Chris Jerdonek.

        remove suppression of rietveld logging
        https://bugs.webkit.org/show_bug.cgi?id=39693

        Now that we only upload to rietveld explicitly, e.g. on the bot
        or via webkit-patch post-attachment-to-rietveld, we should print
        all the rietveld logging. It was suppressed before to avoid making
        webkit-patch upload too noisy.

        * Scripts/webkitpy/common/net/rietveld.py:

2010-05-25  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Ojan Vafai.

        [Qt] Expose the editing behavior setting in DRT to test all editing code paths
        https://bugs.webkit.org/show_bug.cgi?id=39680

        Implement LayoutTestController::setEditingBehavior in Qt's DRT.

        * DumpRenderTree/qt/DumpRenderTreeQt.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setEditingBehavior):

2010-05-25  Kevin Ollivier  <kevino@theolliviers.com>

        [wx] Build fix after API change and addition of WebCore/platform/text/transcoder dir. 

        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setEditingBehavior):
        * wx/build/settings.py:

2010-05-24  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Eric Seidel and Kent Tamura (for the Chromium part).

        editingBehavior settings needs to be set back to a reasonable default between tests
        https://bugs.webkit.org/show_bug.cgi?id=39433

        Similarly to r59861, hard code the default setting during reset for Gtk and Chromium,
        so that the serialized version of the setting stays in sync with expectations.

        * DumpRenderTree/chromium/TestShell.cpp:
        (TestShell::resetWebSettings):
        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2010-05-24  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        webkit-patch land calls scm.changed_files 4 times!
        https://bugs.webkit.org/show_bug.cgi?id=39584

        * Scripts/webkitpy/tool/commands/download_unittest.py:
         - Assert that we don't call modified_changelogs too often.
        * Scripts/webkitpy/tool/steps/updatechangelogswithreviewer.py:
         - Use cached changelogs list instead of calling modified_changelogs directly.
        * Scripts/webkitpy/tool/steps/validatereviewer.py:
         - ditto.

2010-05-24  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Import layout_test_helper for Windows
        https://bugs.webkit.org/show_bug.cgi?id=39581

        Import Chromium win/layout_test_helper.cc as LayoutTestHelperWin.cpp.
        http://src.chromium.org/viewvc/chrome/trunk/src/webkit/tools/test_shell/win/layout_test_helper.cc

        * DumpRenderTree/chromium/LayoutTestHelperWin.cpp: Added.

2010-05-24  Kent Tamura  <tkent@chromium.org>

        Reviewed by Dimitri Glazkov.

        [DRT/Chromium] Reset frame name
        https://bugs.webkit.org/show_bug.cgi?id=39586

        This change fixes about 70 unexpected results.

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::reset):

2010-05-24  Marcus Bulach  <bulach@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] Adds WebGeolocationServiceMockImpl to remove public dependency on wtf/HashMap.h
        https://bugs.webkit.org/show_bug.cgi?id=39587

        * DumpRenderTree/chromium/WebViewHost.cpp:
        (WebViewHost::geolocationService):

2010-05-24  Robert Hogan  <robert@webkit.org>

        Reviewed by Laszlo Gombos.

        [Qt] DRT Support for removeOriginAccessWhitelistEntry

        Unskips http/tests/xmlhttprequest/origin-whitelisting-removal.html

        [Qt] DRT Support for removeOriginAccessWhitelistEntry
        https://bugs.webkit.org/show_bug.cgi?id=39565

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::removeOriginAccessWhitelistEntry):

2010-05-24  Marcus Bulach  <bulach@google.com>

        Reviewed by Ojan Vafai.

        _svn_branch_has_extra_commits needs to check for ^HEAD instead of ^head.
        https://bugs.webkit.org/show_bug.cgi?id=39603

        * Scripts/webkitpy/common/checkout/scm.py:

== Rolled over to ChangeLog-2010-05-24 ==
