<html>
<body>
<p>This tests that a textarea's default value is submitted with hard line wraps (carriage returns where line wraps appear in the textarea).</p>
<p>Due to a bug, the textarea is actually a bit wider than we specify via the cols attribute, so, the number and position of the carriage returns in the submitted data is not what you'd expect.
The expected results for this testcase should be updated when <a href="http://bugs.webkit.org/show_bug.cgi?id=7505">bug 7505</a> is fixed.</p>
<form name="f" method="?" action="textarea-hard-linewrap.html">
<textarea id="textarea" name="textarea" wrap="hard" cols="5">123456789</textarea>
<input type="submit">
</form>
<script>
if (document.URL.indexOf('?') == -1) {
    if (window.layoutTestController) {
        window.layoutTestController.dumpAsText();
        window.layoutTestController.waitUntilDone();
    }
    document.f.submit();
} else {
    var formData = document.URL.substring(document.URL.indexOf('?') + 1, document.URL.length);
    var expectedTextareaContents = "textarea=123456%0D%0A789";
    if (formData == expectedTextareaContents)
        document.write("Success");
    else
        document.write("Failure.  The form data that should have been submitted: " +
            expectedTextareaContents + "<br>This is what was actually submitted: " + formData);    
    if (window.layoutTestController)
        window.layoutTestController.notifyDone();
}
</script>
</body>
</html>
