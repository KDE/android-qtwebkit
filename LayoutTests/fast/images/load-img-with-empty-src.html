<html>
<head>
    <script type="text/javascript">
        function print(message, color) {
            var paragraph = document.createElement("div");
            paragraph.appendChild(document.createTextNode(message));
            paragraph.style.fontFamily = "monospace";
            if (color)
                paragraph.style.color = color;
            document.getElementById("console").appendChild(paragraph);
        }

        if (window.layoutTestController) {
            layoutTestController.dumpAsText(); 
        }
        
        var status = [true, true, false];
        var description = ["remove src attribute of an <img> to see whether it gets loaded. (It should NOT be loaded.)",
                           "define an <img> with no src specified to see whether it gets loaded. (It should NOT be loaded.)",
                           "define a <img> with src='' to see whether it gets loaded. (It should be loaded.)" ]

        function outputResults() {
            for (index = 0; index < 3; index++) {
                print("[" + index +"] " + description[index], "black");
                if (status[index])
                    print("PASS", "green");
                else
                    print("FAIL", "red");
            }
        }
    </script>
</head>
<body onload="outputResults();">
    <p>This page tests loading image with empty src attribute.</p>
    <hr>
    <div id="console"></div>
    <img id="image1" style="display:none" src="resources/test-load.jpg" onerror="status[0] = false;" />
    <img id="image2" style="display:none" onerror="status[1] = false;" />
    <img id="image3" style="display:none" src="" onerror="status[2] = true;" />
    <script type="text/javascript">
        var imgNode1 = document.getElementById("image1");
        imgNode1.removeAttribute("src");
    </script>
</body>
</html>
