<svg xmlns="http://www.w3.org/2000/svg">
    <rect width="100px" height="100px" id="test">
        <animateColor attributeName="fill"
             from="transparent" by="red" dur="5s" repeatCount="indefinite" />
    </rect>
    <text y="140px">Test for https://bugs.webkit.org/show_bug.cgi?id=45482</text>
    <text y="160px">The rectangle above should animate and should see PASSED below.</text>
    <text y="180px" id="console"/>
    <script><![CDATA[
        if (window.layoutTestController) {
            layoutTestController.dumpAsText();
            layoutTestController.waitUntilDone();
        }

        function doTest() {
            var console = document.getElementById("console");
            // Should not be transparent (initial value) as it would mean that the color is considered invalid.
            if (document.getElementById("test").style.fill.match(/^#(?!(000000||000)$)/))
                console.appendChild(document.createTextNode("PASSED"));
            else
                console.appendChild(document.createTextNode("FAILED"));
            if (window.layoutTestController)
                layoutTestController.notifyDone();
        }

        window.setTimeout(doTest, 100);
    ]]></script>
</svg>
