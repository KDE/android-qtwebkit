<!DOCTYPE html>

<html>
<head>
  <script>
    if (window.layoutTestController) {
        layoutTestController.dumpAsText();
        layoutTestController.waitUntilDone();
    }

    var paintCount = 0;

    function onLoad() {
        var pluginDiv = document.getElementById("pluginDiv");
        // Create the plugin in the middle of the page.
        pluginDiv.innerHTML = "<embed id=\"testPlugin\" type=\"application/x-webkit-test-netscape\" width=\"200\" height=\"200\" onpaintevent=\"didPaint()\" windowedPlugin=\"false\"></embed>";
        layoutTestController.display();
    }

    function didPaint() {
        paintCount++;
        document.getElementById('result').innerHTML = "SUCCESS";
        layoutTestController.notifyDone();
    }
  </script>
</head>
<body onload="onLoad();">
  This tests that dynamically added windowless plugins receive paint events on creation.

  <div id="result">FAILURE</div>

  <div id="pluginDiv" style="position: absolute; left: 300px; top: 300px; height: 400px; width: 400px; padding: 1em;">
  </div>
</body>
</html>
