<html>

<head>
<script>

var startX = 225;
var startY = 175;
var endX = 100;
var endY = 100;

function log(message) {
    var console = document.getElementById("console");
    var li = document.createElement("li");
    var text = document.createTextNode(message);
    
    console.appendChild(li);
    li.appendChild(text);
}

function runTest() 
{
    if (window.layoutTestController)
        layoutTestController.waitUntilDone();
    else {
        log("This test uses DumpRenderTree's drag & drop support to test that an image can successfully be dropped into a contenteditable iframe.  To run it manually, drag the image into the iframe and drop it.  It should appear inside the iframe.");
        return;
    }

	window.setTimeout('step1()', 5);
}

function step1()
{
    log("Mousing down on image");
    eventSender.mouseMoveTo(startX, startY);
    eventSender.mouseDown();

    window.setTimeout('step2()', 1000);
}

function step2() {
    log("Dragging to destination");
    eventSender.mouseMoveTo(endX + 1, endY + 1);
    
    window.setTimeout('step3()', 200);
    
}

function step3() {
    log("Dropping");
    eventSender.mouseMoveTo(endX, endY);

    eventSender.mouseUp();
    
    window.setTimeout('step4()', 200);
}

function step4()
{
    if (window.layoutTestController)
        layoutTestController.notifyDone();
}

</script>
</head>

<body style="padding:0; margin:0">  

<iframe style="margin: 0px; width: 200px; height: 200px; border: 4px solid black;" src="../resources/contenteditable-iframe-src.html"></iframe>

<img src="../resources/abe.jpg">
<ul style="list-style:circle; margin: 1em;" id="console"></ul>
<script>runTest()</script>
</body>
