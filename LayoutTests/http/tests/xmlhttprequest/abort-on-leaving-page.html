<body>
<div id=result></div>
<script>
if (window.layoutTestController) {
    layoutTestController.dumpAsText();
    layoutTestController.waitUntilDone();
}

try {
    var xhr = new XMLHttpRequest;
    xhr.open("GET", "resources/slow-response.pl");
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4)
            alert("SUCCESS");
    }
    xhr.send(null);
    
    setTimeout("window.location.href='data:text/html,Should have seen a SUCCESS alert.<script>if (window.layoutTestController) layoutTestController.notifyDone()</scr' + 'ipt>'", 100);
} catch (ex) {
    alert(ex);
}
</script>
<a href="about:blank">link</a>
</body>
