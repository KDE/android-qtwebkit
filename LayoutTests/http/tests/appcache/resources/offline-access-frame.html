<html manifest="/resources/network-simulator.php?path=/appcache/resources/offline-access.manifest">
<div id=result></div>
<script src="/resources/network-simulator.php?path=/appcache/resources/offline-access.js"></script>
<script>
function log(message)
{
    document.getElementById("result").innerHTML += message + "<br>";
}

applicationCache.oncached = function() { log("cached"); test() }
applicationCache.onnoupdate = function() { log("noupdate"); test() }
applicationCache.onerror = function() { log("error"); test() }

applicationCache.ondownloading = function() { log("downloading") }
applicationCache.onprogress = function() { log("progress") }
applicationCache.onupdateready = function() { log("updateready") }
applicationCache.onobsolete = function() { log("obsolete") }

if (applicationCache.status == applicationCache.IDLE) {
    // Update finished while we were waiting for offline-access.js to load.
    applicationCache.oncached = function() { log("cached") }
    applicationCache.onnoupdate = function() { log("noupdate") }
    applicationCache.onerror = function() { log("error") }
    test();
}

</script>
</html>
