<html>
<script>
    if (window.layoutTestController)
        layoutTestController.dumpAsText();
</script>
<body id="body">

    <!-- This test makes sure canvas click event routing and hit testing is working correctly. -->

    <div style="width: 500px;">
      <canvas id='canvas1' width='100' height='100'></canvas>
      <canvas id='canvas2' width='100' height='100'></canvas>
      <canvas id='canvas3' width='100' height='100'></canvas>
    </div>

    <div id="result"></div>

    <script>
        var result = document.getElementById("result");
        var canvas1 = document.getElementById("canvas1");
        canvas1.getContext('2d').fillRect(10, 10, 80, 80);
        canvas1.addEventListener("click", function() {
            result.innerText += "Clicked in canvas 1.\n";
        }, false);
        var canvas2 = document.getElementById("canvas2");
        canvas2.getContext('2d').fillRect(10, 10, 80, 80);
        canvas2.addEventListener("click", function() {
            result.innerText += "Clicked in canvas 2.\n";
        }, false);
        var canvas3 = document.getElementById("canvas3");
        canvas3.getContext('2d').fillRect(10, 10, 80, 80);
        canvas3.addEventListener("click", function() {
            result.innerText += "Clicked in canvas 3.\n";
        }, false);

        var body = document.getElementById("body");
        body.focus();

        var x = body.offsetLeft;
        var y = body.offsetTop;

        // Simulate a click in canvas 1.
        eventSender.mouseMoveTo(x + 50, y + 50);
        eventSender.mouseDown();
        eventSender.mouseUp();

        // Simulate a click in canvas 2.
        eventSender.mouseMoveTo(x + 150, y + 50);
        eventSender.mouseDown();
        eventSender.mouseUp();
    </script>
</body>
</html>
