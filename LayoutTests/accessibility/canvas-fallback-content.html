<html>
<script>
    if (window.layoutTestController)
        layoutTestController.dumpAsText();
</script>
<body>

<html>
 
    <!-- This test makes sure that canvas fallback content is accessible -->

    <input type="text"  id="normal" tabindex="1" />
    <canvas id="myCanvas" style="width:300px;height:300px;"  width='300' height='300' alt="canvas 1">
      <input type="checkbox" id="fallback" tabindex="2" />
    </canvas>

    <div id="result"></div>

    <script>
        if (window.accessibilityController) {
            var result = document.getElementById("result");

            document.body.focus();

            var normal = document.getElementById("normal");
            normal.focus();

            var normalElement = accessibilityController.focusedElement;

            var fallback = document.getElementById("fallback");
            fallback.focus();

            var accessibilityFocusedElement = accessibilityController.focusedElement;
            
            var pattern = "AXRole: AXCheckBox";
            if (document.activeElement.id == "fallback" &&
                accessibilityController.focusedElement.allAttributes().indexOf(pattern) != -1) {
                 result.innerText += "Test passed\n";
            }
            else {
                 result.innerText += "Test failed\n" + fallbackElement.allAttributes();
            }
        }
    </script>
</body>
</html>
