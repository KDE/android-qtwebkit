2011-03-17  Alexey Marinichev  <amarinichev@chromium.org>

        Reviewed by Kenneth Russell.

        chromium: uninitialized field in WebViewImpl
        https://bugs.webkit.org/show_bug.cgi?id=56620

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::WebViewImpl):

2011-03-17  Adrienne Walker  <enne@google.com>

        Reviewed by James Robinson.

        [chromium] Turn off accelerated compositing for RTL style pages.
        https://bugs.webkit.org/show_bug.cgi?id=56585

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::layout):
        (WebKit::WebViewImpl::pageHasRTLStyle):
        (WebKit::WebViewImpl::setRootGraphicsLayer):
        * src/WebViewImpl.h:

2011-03-17  Jay Civelli  <jcivelli@chromium.org>

        Reviewed by David Levin.

        Moving the method that is used to retrieve all the resources in
        a page from the Chromium code (dom_operations.cc) to WebKit.
        https://bugs.webkit.org/show_bug.cgi?id=55859

        * WebKit.gyp:
        * public/WebPageSerializer.h:
        * public/WebURL.h:
        (WebKit::operator==):
        (WebKit::operator!=):
        * public/WebVector.h:
        (WebKit::WebVector::contains):
        * src/WebDataSourceImpl.cpp:
        (WebKit::WebDataSourceImpl::WebDataSourceImpl):
        * src/WebPageSerializer.cpp:
        (WebCore::getSubResourceURLFromElement):
        (WebCore::retrieveResourcesForElement):
        (WebCore::retrieveResourcesForFrame):
        (WebKit::WebPageSerializer::retrieveAllResources):
        * tests/WebFrameTest.cpp:
        * tests/WebPageSerializerTest.cpp: Added.
        * tests/data/pageserialization: Added.
        * tests/data/pageserialization/awesome.png: Added.
        * tests/data/pageserialization/embed_iframe.html: Added.
        * tests/data/pageserialization/object_iframe.html: Added.
        * tests/data/pageserialization/simple_iframe.html: Added.
        * tests/data/pageserialization/simple_page.html: Added.
        * tests/data/pageserialization/top_frame.html: Added.

2011-03-17  Tony Chang  <tony@chromium.org>

        Reviewed by Pavel Feldman.

        [chromium] don't concatenate devtools files when debug_devtools=1
        https://bugs.webkit.org/show_bug.cgi?id=56572

        * WebKit.gyp:

2011-03-17  Tony Chang  <tony@chromium.org>

        Reviewed by Eric Seidel.

        [chromium] minor cleanup of devtools_files variable in WebKit.gyp
        https://bugs.webkit.org/show_bug.cgi?id=56503

        * WebKit.gyp: Moving duplicate variables out of a condition.

2011-03-16  Adam Barth  <abarth@webkit.org>

        Reviewed by James Robinson.

        Remove USE(BUILTIN_UTF8_CODEC)
        https://bugs.webkit.org/show_bug.cgi?id=56508

        * features.gypi:

2011-03-16  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] include inspector gif files in the list of resources
        https://bugs.webkit.org/show_bug.cgi?id=56504

        * scripts/generate_devtools_grd.py:

2011-03-16  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No new tests. Exposes no new functionality.

        * public/WebURLLoader.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::isDocumentThreadableLoaderClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:

2011-03-16  Adam Barth  <abarth@webkit.org>

        Roll Chromium DEPS.

        * DEPS:

2011-03-16  Daniel Sievers  <sievers@google.com>

        Reviewed by James Robinson.

        Add setting to always force compositing mode
        https://bugs.webkit.org/show_bug.cgi?id=56156

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setForceCompositingMode):
        * src/WebSettingsImpl.h:

2011-03-16  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Dimitri Glazkov.

        Revert of r80451. Decided to do this in WebCore instead.
        https://bugs.webkit.org/show_bug.cgi?id=55844

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-03-15  Ilya Sherman  <isherman@chromium.org>

        Reviewed by Darin Fisher.

        Move isReadOnly() from WebInputElement to WebFormControlElement
        https://bugs.webkit.org/show_bug.cgi?id=55760

        * public/WebFormControlElement.h:
        * public/WebInputElement.h:
        * src/WebFormControlElement.cpp:
        (WebKit::WebFormControlElement::isReadOnly):
        * src/WebInputElement.cpp:

2011-03-15  John Bauman  <jbauman@chromium.org>

        Reviewed by Kenneth Russell.

        Non-premultiplied-alpha canvas attribute is ignore for toDataURL, drawImage, texImage2D
        https://bugs.webkit.org/show_bug.cgi?id=56238

        Add support for reading a webgl context into an ImageData.

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToImageData):
        * src/GraphicsContext3DInternal.h:

2011-03-15  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81144.
        http://trac.webkit.org/changeset/81144
        https://bugs.webkit.org/show_bug.cgi?id=56432

        It broke the ui test
        NPAPITesterBase.GetURLRedirectNotification. (Requested by
        dave_levin on #webkit).

        * public/WebURLLoader.h:
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        (WebKit::AssociatedURLLoader::prepareRequest):
        (WebKit::AssociatedURLLoader::willSendRequest):
        (WebKit::AssociatedURLLoader::didSendData):
        (WebKit::AssociatedURLLoader::didReceiveResponse):
        (WebKit::AssociatedURLLoader::didDownloadData):
        (WebKit::AssociatedURLLoader::didReceiveData):
        (WebKit::AssociatedURLLoader::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::didFinishLoading):
        (WebKit::AssociatedURLLoader::didFail):
        * src/AssociatedURLLoader.h:

2011-03-15  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        pngcrush images used by inspector
        https://bugs.webkit.org/show_bug.cgi?id=56426

        This saves 120k in WebCore and 8k in WebKit/chromium.  I ran
        pngcrush -brute, so none of the meta data (ancillary chunks)
        are modified.

        * src/js/Images/segmentChromium.png:
        * src/js/Images/segmentHoverChromium.png:
        * src/js/Images/segmentHoverEndChromium.png:
        * src/js/Images/segmentSelectedChromium.png:
        * src/js/Images/segmentSelectedEndChromium.png:
        * src/js/Images/statusbarBackgroundChromium.png:
        * src/js/Images/statusbarBottomBackgroundChromium.png:
        * src/js/Images/statusbarMenuButtonChromium.png:
        * src/js/Images/statusbarMenuButtonSelectedChromium.png:

2011-03-15  Michael Nordman  <michaeln@google.com>

        Reviewed by Alexey Proskuryakov.

        When initiating a main resource load, let the application cache
        know which frame the load is being conducted for. This patch doesn't
        resolve the following bug, but the additional WebFrame parameter
        should provide the chromium port with enough info to pick the
        "most appropiate" cached resource.
        https://bugs.webkit.org/show_bug.cgi?id=55505

        Also fixup a stale comment in stopLoadingInFrame.

        * public/WebApplicationCacheHost.h:
        (WebKit::WebApplicationCacheHost::willStartMainResourceRequest):
        * src/ApplicationCacheHost.cpp:
        (WebCore::ApplicationCacheHost::maybeLoadMainResource):
        (WebCore::ApplicationCacheHost::stopLoadingInFrame):

2011-03-15  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] add a build target to create a grd file with devtool resources
        https://bugs.webkit.org/show_bug.cgi?id=56335

        Reland with a fix to avoid really long command lines on Windows.

        * WebKit.gyp:
        * scripts/generate_devtools_grd.py: Added.

2011-03-15  Alok priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Valgrind error due to uninitialized PluginLayerChromium::m_textureId
        https://bugs.webkit.org/show_bug.cgi?id=56390

        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setBackingTextureId):
        (WebKit::WebPluginContainerImpl::platformLayer):

2011-03-15  Brett Wilson  <brettw@chromium.org>

        Reviewed by Adam Barth.

        Make WebConsoleMessage properly respect the log level.
        https://bugs.webkit.org/show_bug.cgi?id=56386

        * public/WebConsoleMessage.h:
        (WebKit::WebConsoleMessage::WebConsoleMessage):

2011-03-15  Tony Chang  <tony@chromium.org>

        Revert r81147 and r81149, broke the chromium win build.

        * WebKit.gyp:
        * scripts/generate_devtools_grd.py: Removed.

2011-03-15  Tony Chang  <tony@chromium.org>

        Fix chromium build using python 2.5 (with statement).

        * scripts/generate_devtools_grd.py:

2011-03-15  Tony Chang  <tony@chromium.org>

        Reviewed by Adam Barth.

        [chromium] add a build target to create a grd file with devtool resources
        https://bugs.webkit.org/show_bug.cgi?id=56335

        This is the webkit side of the fix for
        http://code.google.com/p/chromium/issues/detail?id=35793

        * WebKit.gyp:
        * scripts/generate_devtools_grd.py: Added.

2011-03-15  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No new tests. No new functionality exposed.

        * public/WebURLLoader.h:
        (WebKit::WebURLLoaderOptions::WebURLLoaderOptions):
        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::clearClient):
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:

2011-03-15  Alok priyadarshi  <alokp@chromium.org>

        Reviewed by James Robinson.

        Remove unnecessary function WebPlugin::getBackingTextureId
        https://bugs.webkit.org/show_bug.cgi?id=56122

        It will be tested by Pepper2D and Pepper3D layout/smoke tests
        on the Chromium side.

        * public/WebPlugin.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::platformLayer):

2011-03-15  Mikhail Naganov  <mnaganov@chromium.org>

        Unreviewed. Update chromium deps to pick up the latest V8.

        * DEPS:

2011-03-14  Alexey Marinichev  <amarinichev@chromium.org>

        Reviewed by Kenneth Russell.

        Graphics Context is not properly recovered if the GPU process dies.
        https://bugs.webkit.org/show_bug.cgi?id=56148

        Split context recreation into two steps.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::composite):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        * src/WebViewImpl.h:

2011-03-14  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r81094.
        http://trac.webkit.org/changeset/81094
        https://bugs.webkit.org/show_bug.cgi?id=56355

        Broke the chromium DRT related build. (Requested by dave_levin
        on #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::renderTreeAsText):
        (WebKit::WebFrameImpl::layerTreeAsText):
        * src/WebFrameImpl.h:

2011-03-14  Daniel Sievers  <sievers@google.com>

        Reviewed by Simon Fraser.

        [Chromium] Make RenderAsTextBehavior and LayerTreeAsTextBehavior tweakable from the DumpRenderTree commandline
        https://bugs.webkit.org/show_bug.cgi?id=56139

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::renderTreeAsText):
        (WebKit::WebFrameImpl::layerTreeAsText):
        * src/WebFrameImpl.h:

2011-03-14  John Knottenbelt  <jknotten@chromium.org>

        Reviewed by Steve Block.

        Detach Geolocation from Frame when Page destroyed.
        https://bugs.webkit.org/show_bug.cgi?id=52877

        Add accessors to the WebGeolocationClientMock to allow the number of
        pending geolocation permission requests to be queried.

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:
        (WebKit::WebGeolocationClientMock::numberOfPendingPermissionRequests):

2011-03-11  David Levin  <levin@chromium.org>

        Rollout the chromium deps roll as it adds a dependency on a header
        that the bots building for WebKit don't seem to have.

        Specifically gfx\gl\gl_context_egl.cc depends on d3dcompiler.h

        * DEPS:

2011-03-11  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Tony Chang.

        [chromium] Correct return type of WebClipboard::readImage.
        https://bugs.webkit.org/show_bug.cgi?id=56234

        Update the return type to reflect that we are returning a blob of PNG
        data, not a bitmap.

        * public/WebClipboard.h:
        (WebKit::WebClipboard::readImage):

2011-03-11  David Levin  <levin@chromium.org>

        Update chromium deps to pick up the skia roll.

        * DEPS:

2011-03-11  Adrienne Walker  <enne@google.com>

        Reviewed by Kenneth Russell.

        Add missing unit tests to TilingData.
        https://bugs.webkit.org/show_bug.cgi?id=54143

        * tests/TilingDataTest.cpp:
        (WebCore::TEST):

2011-03-11  Anton D'Auria  <adauria@apple.com>

        Reviewed and landed by Brady Eidson.

        Add WebKit1 API to view and delete local storage
        https://bugs.webkit.org/show_bug.cgi?id=51878

        * src/StorageNamespaceProxy.cpp:
        (WebCore::StorageNamespaceProxy::clearOriginForDeletion):
        (WebCore::StorageNamespaceProxy::clearAllOriginsForDeletion):
        (WebCore::StorageNamespaceProxy::sync):
        * src/StorageNamespaceProxy.h:

2011-03-11  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add an accessibilityIsIgnored method to WebAccessibilityObject.
        https://bugs.webkit.org/show_bug.cgi?id=50969

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::accessibilityIsIgnored):

2011-03-11  Avi Drissman  <avi@google.com>

        Reviewed by Tony Chang.

        Fix missing initialization of new member variables.
        https://bugs.webkit.org/show_bug.cgi?id=50969

        * public/WebMenuItemInfo.h:
        (WebKit::WebMenuItemInfo::WebMenuItemInfo):

2011-03-11  Roland Steiner  <rolandsteiner@chromium.org>

        Reviewed by Ryosuke Niwa.

        Bug 55570 - Remove dependency of dom/InputElement.cpp on html/ and wml/
        https://bugs.webkit.org/show_bug.cgi?id=55570

        Add a virtual function toInputElement() to Node that has a default
        implementation of returning 0.
        For HTMLInputElement and WMLInputElement (which derive from InputElement)
        override this to return the object.
        Change all calling sites of the old toInputElement to use the new member
        function. This also allows us to save some casts.

        No new tests (refactoring).

        * src/WebInputElement.cpp:
        (WebKit::toWebInputElement):

2011-03-10  Takayoshi Kochi  <kochi@chromium.org>

        Reviewed by Tony Chang.

        Remove default parameter declaration for familiForChars(), which is no longer necessary.

        * public/gtk/WebFontInfo.h:

2011-03-10  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Make updateAndDrawLayers argumentless.
        https://bugs.webkit.org/show_bug.cgi?id=55985

        Made the TilePainters and viewport parameters for
        LayerRendererChromium member variables instead of arguments on
        updateAndDrawLayers. In a future change, this will allows us to
        draw the layer tree without the WebView's assistance.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::resize):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::scrollRootLayerRect):
        (WebKit::WebViewImpl::invalidateRootLayerRect):
        (WebKit::WebViewImplContentPainter::create):
        (WebKit::WebViewImplContentPainter::paint):
        (WebKit::WebViewImplContentPainter::WebViewImplContentPainter):
        (WebKit::WebViewImplScrollbarPainter::create):
        (WebKit::WebViewImplScrollbarPainter::paint):
        (WebKit::WebViewImplScrollbarPainter::WebViewImplScrollbarPainter):
        (WebKit::WebViewImpl::setIsAcceleratedCompositingActive):
        (WebKit::WebViewImpl::doComposite):
        (WebKit::WebViewImpl::reallocateRenderer):
        (WebKit::WebViewImpl::updateLayerRendererViewport):
        * src/WebViewImpl.h:

2011-03-10  Tony Chang  <tony@chromium.org>

        Unreviewed, roll chromium version to r77259 to pick up
        webfontinfo api change.

        * DEPS:

2011-03-10  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80701.
        http://trac.webkit.org/changeset/80701
        https://bugs.webkit.org/show_bug.cgi?id=56126

        fast/dom/Geolocation/window-close-crash.html fails on Snow
        Leopard release builds (Requested by mihaip on #webkit).

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:

2011-03-10  Andrey Kosyakov  <caseq@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: better names for HAR export commands
        https://bugs.webkit.org/show_bug.cgi?id=56097

        Rename Export to HAR to Copy entry/network log as HAR
        Expose Copy as HAR unconditionally, remove related settings entry.

        * src/js/DevTools.js: removed override for resourceExportEnabled

2011-01-26  John Knottenbelt  <jknotten@chromium.org>

        Reviewed by Dmitry Titov.

        Detach Geolocation from Frame when Page destroyed.
        https://bugs.webkit.org/show_bug.cgi?id=52877

        Add accessors to the WebGeolocationClientMock to allow the number of
        pending geolocation permission requests to be queried.

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:
        (WebKit::WebGeolocationClientMock::numberOfPendingPermissionRequests):

2011-03-08  Hans Wennborg  <hans@chromium.org>

        Reviewed by Jeremy Orlow.

        IndexedDB: Add BackingStoreType parameter to IDBFactoryBackendInterface::open
        https://bugs.webkit.org/show_bug.cgi?id=55948

        Add a parameter that allows for selection of alternative backing store
        implementations.

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::open):
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        (WebCore::IDBFactoryBackendProxy::open):
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBFactoryImpl.h:

2011-03-08  Kinuko Yasuda  <kinuko@chromium.org>

        Reviewed by David Levin.

        Destroying WorkerFileSystemCallbacksBridge on main thread results in ASSERT in WorkerContext::Observer::~Observer
        https://bugs.webkit.org/show_bug.cgi?id=55895

        * src/WorkerFileSystemCallbacksBridge.cpp:
        (WebKit::WorkerFileSystemCallbacksBridge::runTaskOnWorkerThread):
        Added stopObserving() so that releasing the bridge on the main thread
        (this could happen before or after the runTaskOnWorkerThread) does
        not cause the assertion error.

2011-03-08  Alok priyadarshi  <alokp@chromium.org>

        Reviewed by Dimitri Glazkov.

        Plugins needs a way to trigger style recalc
        https://bugs.webkit.org/show_bug.cgi?id=55242

        It will be tested by Pepper2D and Pepper3D layout/smoke tests
        on the Chromium side.
        
        * public/WebPluginContainer.h:
        * src/WebPluginContainerImpl.cpp:
        (WebKit::WebPluginContainerImpl::setBackingTextureId):
        * src/WebPluginContainerImpl.h:

2011-03-08  Andrei Popescu  <andreip@google.com>

        Reviewed by Steve Block.

        IDBCallbacks::onsuccess(IDBIndex*) is unused and should be removed.
        https://bugs.webkit.org/show_bug.cgi?id=55938

        * public/WebIDBCallbacks.h:
        * src/IDBCallbacksProxy.cpp:
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCallbacksImpl.h:
        * src/WebIDBObjectStoreImpl.cpp:

2011-03-07  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Add support for DataTransferItems
        https://bugs.webkit.org/show_bug.cgi?id=55115

        Add new runtime enabled flag for data transfer items feature.

        * public/WebRuntimeFeatures.h:
        * src/WebRuntimeFeatures.cpp:
        (WebKit::WebRuntimeFeatures::enableDataTransferItems):
        (WebKit::WebRuntimeFeatures::isDataTransferItemsEnabled):

2011-03-07  Ryosuke Niwa  <rniwa@webkit.org>

        Chromium build fix.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2011-03-07  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Darin Adler.

        selectionHasStyle and selectionStartHasStyle should use EditingStyle
        https://bugs.webkit.org/show_bug.cgi?id=55902

        selectionHasStyle now takes a property id and a value instead of a CSSMutableStyleDeclaration.

        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems): Calls selectionHasStyle.

2011-03-07  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Tony Chang.

        Add plumbing for paste support to ChromiumDataObject::types()
        https://bugs.webkit.org/show_bug.cgi?id=55792

        This requires a DEPS roll for a Chromium-side change to support DRT testing of
        event.dataTransfer.types.

        * DEPS:

2011-03-07  Takayoshi Kochi  <kochi@chromium.org>

        Reviewed by Tony Chang.

        Use preferred locale information when choosing fallback font using
        fontconfig on Linux platform.
        https://bugs.webkit.org/show_bug.cgi?id=55453

        Tests will be covered by Chromium side.

        * public/gtk/WebFontInfo.h:
        (WebKit::WebFontInfo::familyForChars): added 3rd parameter |preferredLocale|
        * public/linux/WebSandboxSupport.h:
        (WebKit::WebSandboxSupport::getFontFamilyForCharacters): added 3rd parameter |preferredLocale|
        * src/PlatformBridge.cpp:
        * src/gtk/WebFontInfo.cpp:

2011-03-07  James Robinson  <jamesr@chromium.org>

        Reviewed by Kenneth Russell.

        [chromium] Separate the &quot;update&quot; and &quot;draw&quot; portions of LayerRendererChromium&apos;s drawLayers function
        https://bugs.webkit.org/show_bug.cgi?id=54047

        Call updated LayerRendererChromium APIs.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):
        (WebKit::WebViewImpl::paint):
        (WebKit::WebViewImpl::doComposite):

2011-03-07  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Replace WebKit2's decidePolicyForMIMEType with decidePolicyForResponse
        https://bugs.webkit.org/show_bug.cgi?id=55827

        Renamed FrameLoaderClient::dispatchDecidePolicyForMIMEType to dispatchDecidePolicyForResponse
        and pass the entire response, instead of just the MIMEType.

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::dispatchDecidePolicyForResponse):
        * src/FrameLoaderClientImpl.h:

2011-03-07  Marcus Bulach  <bulach@chromium.org>

        Reviewed by Dan Bernstein.

        WebViewImpl::focusedWebCoreFrame() should be const.
        https://bugs.webkit.org/show_bug.cgi?id=55870

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::focusedWebCoreFrame):
        * src/WebViewImpl.h:

2011-03-07  Eric Carlson  <eric.carlson@apple.com>

        Reviewed by Darin Adler.

        Add API to enumerate/delete files downloaded for <audio> and <video>
        https://bugs.webkit.org/show_bug.cgi?id=55267

        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::registerSelf): Update for MediaEngineRegistrar change.

2011-03-07  Andrei Popescu  <andreip@google.com>

        Reviewed by Steve Block.

        IDBRequest::onSuccess(IDBObjectStore*) should be removed as it is unused.
        https://bugs.webkit.org/show_bug.cgi?id=55777

        * src/IDBCallbacksProxy.cpp:
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        * src/WebIDBCallbacksImpl.h:

2011-03-07  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80458.
        http://trac.webkit.org/changeset/80458
        https://bugs.webkit.org/show_bug.cgi?id=55863

        caused tests to crash on several chromium bots (Requested by
        ukai on #webkit).

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        (WebKit::AssociatedURLLoader::prepareRequest):
        (WebKit::AssociatedURLLoader::willSendRequest):
        (WebKit::AssociatedURLLoader::didSendData):
        (WebKit::AssociatedURLLoader::didReceiveResponse):
        (WebKit::AssociatedURLLoader::didDownloadData):
        (WebKit::AssociatedURLLoader::didReceiveData):
        (WebKit::AssociatedURLLoader::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::didFinishLoading):
        (WebKit::AssociatedURLLoader::didFail):
        * src/AssociatedURLLoader.h:

2011-03-07  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No tests needed. Exposes no new functionality.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:
        (WebKit::AssociatedURLLoaderOptions::AssociatedURLLoaderOptions):

2011-03-06  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Dimitri Glazkov.

        Expose page dismissal event status through the WebKit API for chromium.
        https://bugs.webkit.org/show_bug.cgi?id=55844

        Chromium will find it useful to know the page dismissal status (i.e.,
        whether a frame is in the midst of executing a beforeunload or unload
        handler), so expose that information through the chromium port in the
        WebKit API.
     
        This is my second attempt at this patch. The previous one broke
        downstream Chromium builds of some unit tests which had classes derived
        from WebFrame (and thus became uninstantiable because of this new pure
        virtual method). Those have now been fixed (http://crrev.com/77101).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::pageDismissalEventBeingDispatched):
        * src/WebFrameImpl.h:

2011-03-06  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80436.
        http://trac.webkit.org/changeset/80436
        https://bugs.webkit.org/show_bug.cgi?id=55849

        Broke Chromium compile across the board (Requested by dglazkov
        on #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-03-06  Sreeram Ramachandran  <sreeram@google.com>

        Reviewed by Dimitri Glazkov.

        Expose page dismissal event status through the WebKit API for chromium
        https://bugs.webkit.org/show_bug.cgi?id=55844

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::pageDismissalEventBeingDispatched):
        * src/WebFrameImpl.h:

2011-03-05  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by Dmitry Titov.

        [chromium] Add method to WebClipboard to read images from the clipboard.
        https://bugs.webkit.org/show_bug.cgi?id=55814

        * public/WebClipboard.h:
        (WebKit::WebClipboard::readImage):

2011-03-04  Adam Barth  <abarth@webkit.org>

        Reviewed by Dimitri Glazkov.

        Remove unneeded round-trips through ../Source in the Chromium GYP build
        https://bugs.webkit.org/show_bug.cgi?id=55795

        * WebKit.gyp:

2011-03-03  John Abd-El-Malek  <jam@chromium.org>

        Reviewed by Dimitri Glazkov.

        [chromium] Get rid of IsContentFiltered flags since they&apos;re not used anymore
        https://bugs.webkit.org/show_bug.cgi?id=55748

        * DEPS:
        * public/WebURLResponse.h:
        * src/WebURLResponse.cpp:

2011-03-04  James Su <suzhe@chromium.org>

        Reviewed by Dimitri Glazkov.

        [Chromium] keycode is always 0 when using non-Latin keyboard layout.
        https://bugs.webkit.org/show_bug.cgi?id=54939

        No intended functionality change.

        * src/mac/WebInputEventFactory.mm:
        (WebKit::windowsKeyCodeForKeyEvent): Use the same implementation
        provided in WebCore/platform/mac/KeyEventMac.mm.

2011-03-04  Zelidrag Hornung  <zelidrag@chromium.org>

        Reviewed by David Levin

        Expose ability to create instance of DOMFileSystem from Chromium side.
        https://bugs.webkit.org/show_bug.cgi?id=55618

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::createFileSystem):
        * src/WebFrameImpl.h:

2011-03-03  Nat Duca  <nduca@chromium.org>

        Reviewed by James Robinson.

        [chromium] Create a LayerChromium layerTreeAsText. Add HUD to
        LayerRendererChromium that draws compositor FPS and, optionally,
        the layer tree.
        https://bugs.webkit.org/show_bug.cgi?id=54710

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setShowFPSCounter):
        (WebKit::WebSettingsImpl::setShowPlatformLayerTree):
        * src/WebSettingsImpl.h:
        (WebKit::WebSettingsImpl::showFPSCounter):
        (WebKit::WebSettingsImpl::showPlatformLayerTree):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doComposite):

2011-03-03  Alexey Proskuryakov  <ap@apple.com>

        Removing an include of WebCoreKeyboardUIMode.h that Ive just added. It's already included
        via ChromeClient.h

        * src/ChromeClientImpl.h:

2011-03-02  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Darin Adler.

        REGRESSION (WebKit2): Tab keys no longer observe Full Keyboard Access
        https://bugs.webkit.org/show_bug.cgi?id=55633
        <rdar://problem/8963023>

        * src/ChromeClientImpl.cpp: (WebKit::ChromeClientImpl::keyboardUIMode):
        * src/ChromeClientImpl.h:
        Implement keyboardUIMode() instead of tabsToLinks(). No change in functionality, since
        this platform doesn't observe or have full keyboard access state.

2011-03-03  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80219.
        http://trac.webkit.org/changeset/80219
        https://bugs.webkit.org/show_bug.cgi?id=55680

        "Causes several media test crashes" (Requested by tonyg-cr on
        #webkit).

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        (WebKit::AssociatedURLLoader::prepareRequest):
        (WebKit::AssociatedURLLoader::willSendRequest):
        (WebKit::AssociatedURLLoader::didSendData):
        (WebKit::AssociatedURLLoader::didReceiveResponse):
        (WebKit::AssociatedURLLoader::didDownloadData):
        (WebKit::AssociatedURLLoader::didReceiveData):
        (WebKit::AssociatedURLLoader::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::didFinishLoading):
        (WebKit::AssociatedURLLoader::didFail):
        * src/AssociatedURLLoader.h:

2011-03-03  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Add an equals() method to WebAccessibilityObject.
        https://bugs.webkit.org/show_bug.cgi?id=55631

        * public/WebAccessibilityObject.h:
        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::equals):

2011-03-03  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Yury Semikhatsky.

        Web Inspector: make selected call frame debugger presentation model property.
        https://bugs.webkit.org/show_bug.cgi?id=55582

        * src/js/Tests.js:

2011-03-03  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        AssociatedURLLoader does not support Cross Origin Requests
        https://bugs.webkit.org/show_bug.cgi?id=53925

        No tests needed. Exposes no new functionality.

        * src/AssociatedURLLoader.cpp:
        (WebKit::AssociatedURLLoader::ClientAdapter::create):
        (WebKit::AssociatedURLLoader::ClientAdapter::ClientAdapter):
        (WebKit::AssociatedURLLoader::ClientAdapter::willSendRequest):
        (WebKit::AssociatedURLLoader::ClientAdapter::didSendData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveResponse):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveData):
        (WebKit::AssociatedURLLoader::ClientAdapter::didReceiveCachedMetadata):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFinishLoading):
        (WebKit::AssociatedURLLoader::ClientAdapter::didFail):
        (WebKit::AssociatedURLLoader::AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::~AssociatedURLLoader):
        (WebKit::AssociatedURLLoader::loadSynchronously):
        (WebKit::AssociatedURLLoader::loadAsynchronously):
        (WebKit::AssociatedURLLoader::cancel):
        (WebKit::AssociatedURLLoader::setDefersLoading):
        * src/AssociatedURLLoader.h:
        (WebKit::AssociatedURLLoaderOptions::AssociatedURLLoaderOptions):

2011-03-03  Steve Lacey  <sjl@chromium.org>

        Reviewed by Darin Fisher.

        Wire up webkit metrics changes to chromium changes.
        https://bugs.webkit.org/show_bug.cgi?id=54580

        * features.gypi:
        * public/WebMediaPlayer.h:
        * src/WebMediaPlayerClientImpl.cpp:
        (WebKit::WebMediaPlayerClientImpl::decodedFrameCount):
        (WebKit::WebMediaPlayerClientImpl::droppedFrameCount):
        (WebKit::WebMediaPlayerClientImpl::audioDecodedByteCount):
        (WebKit::WebMediaPlayerClientImpl::videoDecodedByteCount):
        * src/WebMediaPlayerClientImpl.h:

2011-03-02  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Manually revert ChromiumDataObject changes.
        https://bugs.webkit.org/show_bug.cgi?id=55627

        * public/WebView.h:
        * src/WebDragData.cpp:
        (WebKit::WebDragData::initialize):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragTargetDragEnter):
        * src/WebViewImpl.h:

2011-03-02  David Grogan  <dgrogan@chromium.org>

        Reviewed by Jeremy Orlow.

        IndexedDB: fire versionchange events when calling setVersion
        https://bugs.webkit.org/show_bug.cgi?id=55095

        * WebKit.gyp:
        * src/IDBDatabaseCallbacksProxy.cpp: Copied from Source/WebCore/storage/IDBVersionChangeEvent.h.
        (WebCore::IDBDatabaseCallbacksProxy::create):
        (WebCore::IDBDatabaseCallbacksProxy::IDBDatabaseCallbacksProxy):
        (WebCore::IDBDatabaseCallbacksProxy::~IDBDatabaseCallbacksProxy):
        (WebCore::IDBDatabaseCallbacksProxy::onVersionChange):
        * src/IDBDatabaseCallbacksProxy.h: Copied from Source/WebCore/storage/IDBVersionChangeEvent.h.
        * src/IDBDatabaseProxy.cpp:
        (WebCore::IDBDatabaseProxy::setVersion):
        (WebCore::IDBDatabaseProxy::close):
        (WebCore::IDBDatabaseProxy::open):
        * src/IDBDatabaseProxy.h:
        * src/WebIDBDatabaseCallbacksImpl.cpp: Copied from Source/WebCore/storage/IDBVersionChangeEvent.cpp.
        (WebCore::WebIDBDatabaseCallbacksImpl::WebIDBDatabaseCallbacksImpl):
        (WebCore::WebIDBDatabaseCallbacksImpl::~WebIDBDatabaseCallbacksImpl):
        (WebCore::WebIDBDatabaseCallbacksImpl::onVersionChange):
        * src/WebIDBDatabaseCallbacksImpl.h: Copied from Source/WebCore/storage/IDBVersionChangeEvent.h.
        * src/WebIDBDatabaseImpl.cpp:
        (WebKit::WebIDBDatabaseImpl::setVersion):
        (WebKit::WebIDBDatabaseImpl::close):
        (WebKit::WebIDBDatabaseImpl::open):
        * src/WebIDBDatabaseImpl.h:

2011-03-02  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80139.
        http://trac.webkit.org/changeset/80139
        https://bugs.webkit.org/show_bug.cgi?id=55620

        failing and crashing tests on Snow Leopard bot (Requested by
        mihaip1 on #webkit).

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:

2011-03-02  Daniel Cheng  <dcheng@chromium.org>

        Revert frame-specific WebClipboard changes
        https://bugs.webkit.org/show_bug.cgi?id=55617

        This code is no longer needed since we've decided to use the original
        approach to copy/paste drag/drop handling in ClipboardChromium.

        * public/WebFrameClient.h:
        * src/PlatformBridge.cpp:
        (WebCore::PlatformBridge::clipboardReadAvailableTypes):
        (WebCore::PlatformBridge::clipboardReadData):
        (WebCore::PlatformBridge::clipboardReadFilenames):
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::fromFrame):
        * src/WebFrameImpl.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::dragTargetDragEnterNew):

2011-03-02  Tony Chang  <tony@chromium.org>

        Unreviewed, rolling chromium DEPS to r76362.

        https://bugs.webkit.org/show_bug.cgi?id=55564

        * DEPS:

2011-02-28  Jeremy Orlow  <jorlow@chromium.org>

        Reviewed by James Robinson.

        Split IDBCursor.value into IDBCursor.primaryKey and IDBCursor.value
        https://bugs.webkit.org/show_bug.cgi?id=55443

        * public/WebIDBCursor.h:
        (WebKit::WebIDBCursor::primaryKey):
        (WebKit::WebIDBCursor::value):
        * src/IDBCursorBackendProxy.cpp:
        (WebCore::IDBCursorBackendProxy::primaryKey):
        (WebCore::IDBCursorBackendProxy::value):
        * src/IDBCursorBackendProxy.h:
        * src/WebIDBCursorImpl.cpp:
        (WebKit::WebIDBCursorImpl::key):
        (WebKit::WebIDBCursorImpl::primaryKey):
        (WebKit::WebIDBCursorImpl::value):
        * src/WebIDBCursorImpl.h:

2011-03-02  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Add feature define for data transfer items
        https://bugs.webkit.org/show_bug.cgi?id=55510

        * features.gypi:

2011-01-26  John Knottenbelt  <jknotten@chromium.org>

        Detach Geolocation from Frame when Page destroyed.
        https://bugs.webkit.org/show_bug.cgi?id=52877

        Add accessors to the WebGeolocationClientMock to allow the number of
        pending geolocation permission requests to be queried.

        * public/WebGeolocationClientMock.h:
        * src/WebGeolocationClientMock.cpp:
        (WebKit::WebGeolocationClientMock::numberOfPendingPermissionRequests):

2011-03-01  David Grogan  <dgrogan@chromium.org>

        Reviewed by Jeremy Orlow.

        IndexedDB: public webkit interfaces for firing versionchange events to IDBDatabase objects
        https://bugs.webkit.org/show_bug.cgi?id=55548

        * WebKit.gyp:
        * public/WebIDBDatabase.h:
        (WebKit::WebIDBDatabase::createObjectStore):
        (WebKit::WebIDBDatabase::open):
        * public/WebIDBDatabaseCallbacks.h: Added.
        (WebKit::WebIDBDatabaseCallbacks::~WebIDBDatabaseCallbacks):
        (WebKit::WebIDBDatabaseCallbacks::onVersionChange):

2011-03-01  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r80079.
        http://trac.webkit.org/changeset/80079
        https://bugs.webkit.org/show_bug.cgi?id=55547

        "Broke the Win debug build?" (Requested by dcheng on #webkit).

        * features.gypi:

2011-03-01  Daniel Cheng  <dcheng@chromium.org>

        Reviewed by David Levin.

        Add feature define for data transfer items
        https://bugs.webkit.org/show_bug.cgi?id=55510

        * features.gypi:

2011-03-01  Jeremy Orlow  <jorlow@chromium.org>

        Reviewed by James Robinson.

        Add a primaryKey method to IDBCursor
        https://bugs.webkit.org/show_bug.cgi?id=55518

        In prep for https://bugs.webkit.org/show_bug.cgi?id=55443

        * public/WebIDBCursor.h:
        (WebKit::WebIDBCursor::primaryKey):

2011-02-28  Chang Shu  <cshu@webkit.org>

        Reviewed by Ryosuke Niwa.

        Remove the support of Frame::isContentEditable and its dependencies.
        https://bugs.webkit.org/show_bug.cgi?id=54292

        Remove the WebKit side implementation.

        * src/EditorClientImpl.cpp:
        * src/EditorClientImpl.h:

2011-02-28  Avi Drissman  <avi@google.com>

        Reviewed by James Robinson.

        WebCursorInfo needs to match enums in platform/Cursor.h
        https://bugs.webkit.org/show_bug.cgi?id=55094

        * public/WebCursorInfo.h:
        * src/AssertMatchingEnums.cpp:

2011-02-28  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r78789.
        http://trac.webkit.org/changeset/78789
        https://bugs.webkit.org/show_bug.cgi?id=55409

        Incorrect canvas fallback implementation (Requested by
        inferno-sec on #webkit).

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-02-28  Adam Klein  <adamk@chromium.org>

        Reviewed by Adam Barth.

        [fileapi] Implement LocalFileSystem.resolveLocalFileSystemURI
        https://bugs.webkit.org/show_bug.cgi?id=54774

        * src/LocalFileSystemChromium.cpp:
        (WebCore::LocalFileSystem::readFileSystem):
        Removed size argument to readFileSystem()

2011-02-27  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Darin Fisher.

        Pass frame history state in the context menu parameters.
        https://bugs.webkit.org/show_bug.cgi?id=55232

        * public/WebContextMenuData.h:
        * src/ContextMenuClientImpl.cpp:
        (WebKit::ContextMenuClientImpl::getCustomMenuFromDefaultItems):

2011-02-26  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to WebFrame.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::clearOpener):
        * src/WebFrameImpl.h:

2011-02-26  Pavel Feldman  <pfeldman@chromium.org>

        Not reviewed: rolling chromium DEPS.

        * DEPS:

2011-02-26  Bill Budge  <bbudge@chromium.org>

        Reviewed by David Levin.

        WebURLRequest, WebURLResponse properties should be passed to WebCore Layer
        https://bugs.webkit.org/show_bug.cgi?id=54489

        No tests needed. This is already tested by ui_tests, nacl_ui_tests, and nacl_sandbox_tests

        * src/WebURLRequest.cpp:
        (WebKit::WebURLRequestPrivateImpl::WebURLRequestPrivateImpl):
        (WebKit::WebURLRequest::downloadToFile):
        (WebKit::WebURLRequest::setDownloadToFile):
        * src/WebURLRequestPrivate.h:
        (WebKit::WebURLRequestPrivate::WebURLRequestPrivate):
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponsePrivateImpl::WebURLResponsePrivateImpl):
        (WebKit::WebURLResponse::downloadFilePath):
        (WebKit::WebURLResponse::setDownloadFilePath):
        * src/WebURLResponsePrivate.h:

2011-02-26  Sheriff Bot  <webkit.review.bot@gmail.com>

        Unreviewed, rolling out r79764.
        http://trac.webkit.org/changeset/79764
        https://bugs.webkit.org/show_bug.cgi?id=55295

        "broke Chromium builds" (Requested by rniwa on #webkit).

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-02-26  David Dorwin  <ddorwin@chromium.org>

        Reviewed by Darin Fisher.

        Enable WebKit Full Screen API in Chromium. The element becomes the full size of the window, but the window is not yet full screen. Support is disabled by default.

        fullscreen javascript bindings not implemented for v8
        https://bugs.webkit.org/show_bug.cgi?id=44797

        * features.gypi:
        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullScreenForElement):
        (WebKit::ChromeClientImpl::enterFullScreenForElement):
        (WebKit::ChromeClientImpl::exitFullScreenForElement):
        (WebKit::ChromeClientImpl::fullScreenRendererChanged):
        * src/ChromeClientImpl.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFullScreenEnabled):
        * src/WebSettingsImpl.h:

2011-02-26  John Mellor  <johnme@chromium.org>

        Reviewed by Antonio Gomes.

        [chromium] WebFrameImpl::m_totalMatchCount should be an int
        https://bugs.webkit.org/show_bug.cgi?id=55134

        WebFrameImpl::m_totalMatchCount should be an int instead of a size_t since it can be -1.

        * src/WebFrameImpl.h:

2011-02-26  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Pavel Feldman.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to WebFrame.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::clearOpener):
        * src/WebFrameImpl.h:

2011-02-25  Tony Chang  <tony@chromium.org>

        Roll chromium deps to include RBGToHSL fix and ICU update.

        * DEPS:

2011-02-15  Brett Wilson  <brettw@chromium.org>

        Reviewed by Darin Fisher.

        Recover the mouse capture state when we recieve a mouse event where there is no longer a button down.
        https://bugs.webkit.org/show_bug.cgi?id=54503

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::handleInputEvent):

2011-02-24  James Robinson  <jamesr@chromium.org>

        Reviewed by Darin Fisher.

        Add a USE() macro to control use of the built-in UTF8 codec
        https://bugs.webkit.org/show_bug.cgi?id=55189

        Defaults USE(BUILTIN_UTF8_CODEC) to true for the Chromium port.

        * features.gypi:

2011-02-24  James Kozianski  <koz@chromium.org>

        Reviewed by Ojan Vafai.

        Add missing plumbing for registerProtocolHandler in ChromeClientImpl.
        https://bugs.webkit.org/show_bug.cgi?id=55112

        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::registerProtocolHandler):

2011-02-24  James Robinson  <jamesr@chromium.org>

        Unreviewed, rolling out r79584.
        http://trac.webkit.org/changeset/79584
        https://bugs.webkit.org/show_bug.cgi?id=44797

        [chromium] Patch does not compile if ENABLE_FULLSCREEN_API is
        not set

        * features.gypi:
        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        * src/ChromeClientImpl.h:
        * src/WebSettingsImpl.cpp:
        * src/WebSettingsImpl.h:

2011-02-24  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r79570.
        http://trac.webkit.org/changeset/79570
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Breaks chromium build because glue/mocks/mock_web_frame.h/cc
        was not updated

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-02-24  David Dorwin  <ddorwin@chromium.org>

        Reviewed by Eric Seidel.

        Enable WebKit Full Screen API in Chromium. The element becomes the full size of the window, but the window is not yet full screen. Support is disabled by default.

        fullscreen javascript bindings not implemented for v8
        https://bugs.webkit.org/show_bug.cgi?id=44797

        * features.gypi:
        * public/WebSettings.h:
        * src/ChromeClientImpl.cpp:
        (WebKit::ChromeClientImpl::supportsFullScreenForElement):
        (WebKit::ChromeClientImpl::enterFullScreenForElement):
        (WebKit::ChromeClientImpl::exitFullScreenForElement):
        (WebKit::ChromeClientImpl::fullScreenRendererChanged):
        * src/ChromeClientImpl.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::setFullScreenEnabled):
        * src/WebSettingsImpl.h:

2011-02-24  Patrick Gansterer  <paroga@webkit.org>

        Reviewed by Eric Seidel.

        Rename PLATFORM(SKIA) to USE(SKIA)
        https://bugs.webkit.org/show_bug.cgi?id=55090

        * src/GraphicsContext3DChromium.cpp:
        (WebCore::GraphicsContext3DInternal::GraphicsContext3DInternal):
        (WebCore::GraphicsContext3DInternal::paintRenderingResultsToCanvas):
        * src/GraphicsContext3DInternal.h:
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doPixelReadbackToCanvas):

2011-02-24  Vsevolod Vlasov  <vsevik@chromium.org>

        Reviewed by Alexey Proskuryakov.

        DumpRenderTree should reset frame opener between tests.
        https://bugs.webkit.org/show_bug.cgi?id=54874

        Added clearOpener method to WebFrame.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::clearOpener):
        * src/WebFrameImpl.h:

2011-02-24  Adam Klein  <adamk@chromium.org>

        Reviewed by Darin Fisher.

        [chromium] Add code to WebKit Chromium to allow access to NetworkStateNotifier
        https://bugs.webkit.org/show_bug.cgi?id=54516

        Add a new WebNetworkStateNotifier class with a single static method,
        setOnLine(), which dispatches to WebCore's singleton NetworkStateNotifier.

        * WebKit.gyp:
        * public/WebNetworkStateNotifier.h: Added.
        * src/WebNetworkStateNotifier.cpp: Added.
        (WebKit::WebNetworkStateNotifier::setOnLine):

2011-02-24  Robert Kroeger <rjkroege@chromium.org>

        Reviewed by Darin Fisher.

        Added timestamps to PlatformTouchEvent etc.

        PlatformTouchEvent doesn't have a timestamp and so
        eventSender.leapForward cannot be used for touchevent based tests.
        This change constructs PlatformTouchEvents with timestamps
        provided from a WebTouchEvent on chromium. It also adds an enum
        to make code referring to specific WebTouchPoints easier to read.

        [chromium] [WebCore] [android] Touch events are missing time stamps
        https://bugs.webkit.org/show_bug.cgi?id=53510

        * public/WebTouchPoint.h:
        (WebKit::WebTouchPoint::WebTouchPoint):
        * src/WebInputEventConversion.cpp:
        (WebKit::PlatformTouchEventBuilder::PlatformTouchEventBuilder):

2011-02-23  Adam Barth  <abarth@webkit.org>

        Reviewed by James Robinson.

        [Chromium] Use WebKitClient for OSRandomSource instead of trying to talk to the file system in the sandbox
        https://bugs.webkit.org/show_bug.cgi?id=55093

        We need to get OS randomness from the WebKit client rather than try to
        get it from /dev/urandom directly because WebKit doesn't have access to
        the file system when running inside the Chromium sandbox.

        * WebKit.gyp:
        * src/ChromiumOSRandomSource.cpp: Added.

2011-02-23  Adam Barth  <abarth@webkit.org>

        Reviewed by James Robinson.

        Roll Chromium DEPS
        https://bugs.webkit.org/show_bug.cgi?id=55096

        Rolling to the future, like a truck.

        * DEPS:

2011-02-23  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Fisher.

        [Chromium] Add WebKitClient::cryptographicallyRandomValues
        https://bugs.webkit.org/show_bug.cgi?id=55073

        This patch adds a WebKit client API to get cryptographic randomness.
        We'll use this API to gather seed randomness while inside the sandbox.

        * public/WebKitClient.h:
        (WebKit::WebKitClient::cryptographicallyRandomValues):

2011-02-23  Kenneth Russell  <kbr@google.com>

        Unreviewed, rolling out r79387.
        https://bugs.webkit.org/show_bug.cgi?id=54885

        Reapply the code changes from r79038 since they weren't the root
        cause of the test timeouts.

        * src/WebKit.cpp:
        (WebKit::initialize):

2011-02-23  Takashi Toyoshima  <toyoshim@chromium.org>

        Reviewed by Shinichiro Hamaji.

        [chromium] Control-Up/Down should be PageUp/Down on Mac.
        https://bugs.webkit.org/show_bug.cgi?id=54606

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::scrollViewWithKeyboard):

2011-02-22  Kenneth Russell  <kbr@google.com>

        Reviewed by James Robinson.

        Many tests started timing out on the chrome mac canaries around r79035
        https://bugs.webkit.org/show_bug.cgi?id=54885

        Revert the code changes, but not the Chromium DEPS roll, from
        r79038 to see whether this clears up the timing-out tests. Was not
        able to reproduce the timeouts locally with a Release mode build
        of DRT (on Snow Leopard).

        * src/WebKit.cpp:
        (WebKit::initialize):

2011-02-21  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] WebWorkerBase::openFileSystem confuses clang's -Woverloaded-virtual
        https://bugs.webkit.org/show_bug.cgi?id=54920

        Rename WebWorkerBase::openFileSystem() to openFileSystemForWorker() to
        make it obvious it's not an override of
        WebFrameClient::openFileSystem().

        Remove a failed attempt to override it in WebWorkerClientImpl (the
        override didn't change the behavior).

        No intended functionality change.

        * src/LocalFileSystemChromium.cpp:
        (WebCore::LocalFileSystem::requestFileSystem):
        Call new name.
        * src/WebWorkerBase.cpp:
        (WebKit::WebWorkerBase::openFileSystemForWorker):
        Rename openFileSystem() to openFileSystemForWorker().
        * src/WebWorkerBase.h:
        Rename openFileSystem() to openFileSystemForWorker().
        * src/WebWorkerClientImpl.h:
        (WebKit::WebWorkerClientImpl::allowDatabase):
        Remove unsuccessful (and pointless) override.

2011-02-22  Ilya Tikhonovsky  <loislo@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: flakyness of inspector tests.
        https://bugs.webkit.org/show_bug.cgi?id=54729

        As far as we have the protocol with sequence numbers we can simplify test harness support
        and drop out chomium specific methods.

        * src/js/DevTools.js:

2011-02-21  Pavel Podivilov  <podivilov@chromium.org>

        Reviewed by Pavel Feldman.

        Web Inspector: move source mapping from SourceFrame to ScriptsPanel.
        https://bugs.webkit.org/show_bug.cgi?id=54645

        * src/js/Tests.js:
        (.TestSuite.prototype._checkExecutionLine):

2011-02-21  Nico Weber  <thakis@chromium.org>

        Reviewed by James Robinson.

        [chromium] PopupContainer::show() confuses clang's -Woverloaded-virtual
        https://bugs.webkit.org/show_bug.cgi?id=54923

        Rename PopupContainer::show() to showInRect(), to make it obvious it's
        not an override of ScrollView::show().

        No intended functionality change.

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::applyAutoFillSuggestions):

2011-02-21  Nico Weber  <thakis@chromium.org>

        Reviewed by Kent Tamura.

        [chromium] ChromePluginPrintContext::begin() fails to override superclass method
        https://bugs.webkit.org/show_bug.cgi?id=54914

        Update subclass method signature to match superclass again. This
        regressed in http://trac.webkit.org/changeset/71964

        * src/WebFrameImpl.cpp:
        (WebKit::ChromePluginPrintContext::begin):

2011-02-17  Ryosuke Niwa  <rniwa@webkit.org>

        Reviewed by Kent Tamura.

        Rename Position::node() to Position::deprecatedNode()
        https://bugs.webkit.org/show_bug.cgi?id=54622

        Done the rename. All calls to node() are replaced by calls to deprecatedNode().

        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::setComposition): Check the nullity of startContainer() instead of startPosition()->node().
        (WebKit::WebViewImpl::confirmComposition): Ditto.
        (WebKit::WebViewImpl::textInputType):
        (WebKit::WebViewImpl::caretOrSelectionBounds):

2011-02-19  Brian Ryner  <bryner@chromium.org>

        Reviewed by Adam Barth.

        Add missing #includes of DocumentLoader.h, needed since the transitive
        include through Document.h is removed.
        https://bugs.webkit.org/show_bug.cgi?id=50489

        * src/WebPageSerializerImpl.cpp:
        * src/WebSearchableFormData.cpp:

2011-02-19  Charlie Reis  <creis@chromium.org>

        Reviewed by Mihai Parparita.

        Ensure loading has stopped in HistoryController::goToItem
        https://bugs.webkit.org/show_bug.cgi?id=54517

        Call Page::goToItem instead of HistoryController::goToItem, so that
        FrameLoader::stopAllLoaders is called first.  Also adds a callback in
        FrameLoaderClient for checking for pseudo-back-forward URLs.

        Test: http/tests/navigation/forward-to-fragment-fires-onload.html

        * src/FrameLoaderClientImpl.cpp:
        (WebKit::FrameLoaderClientImpl::shouldStopLoadingForHistoryItem): Added.
        * src/FrameLoaderClientImpl.h:
        * src/WebFrameImpl.cpp:

2011-02-18  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Dimitri Glazkov.

        Marks any actions triggered by performDefaultAction as a user
        gesture, so that a user with a screen reader isn't prevented from
        performing operations that must be triggered by a user gesture.
        https://bugs.webkit.org/show_bug.cgi?id=54759

        * src/WebAccessibilityObject.cpp:
        (WebKit::WebAccessibilityObject::performDefaultAction):

2011-02-18  Kenneth Russell  <kbr@google.com>

        Reviewed by James Robinson.

        [chromium] Clean up initialization of minimum timer interval
        https://bugs.webkit.org/show_bug.cgi?id=54772

        Rolled forward Chromium DEPS to pick up new webkit_support entry
        point. Removed setting of default minimum timer interval, as this
        is now done every time WebPreferences are applied.

        Tested with Chromium DRT port built from WebKit workspace; ran
        fast/dom/ layout tests.

        * DEPS:
        * src/WebKit.cpp:
        (WebKit::initialize):

2011-02-18  Ben Vanik  <benvanik@google.com>

        Reviewed by Kenneth Russell.

        Bug 53940: Implement the OES_vertex_array_object WebGL extension
        https://bugs.webkit.org/show_bug.cgi?id=53940

        Stubbed out methods for the new OES_vertex_array_object methods.

        * src/Extensions3DChromium.cpp:
        (WebCore::Extensions3DChromium::createVertexArrayOES):
        (WebCore::Extensions3DChromium::deleteVertexArrayOES):
        (WebCore::Extensions3DChromium::isVertexArrayOES):
        (WebCore::Extensions3DChromium::bindVertexArrayOES):

2011-02-17  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Shinichiro Hamaji.

        Retry landing after fixing Chromium side.
        Fix for Bug 54632 - [chromium] Printing causes view to scroll
        https://bugs.webkit.org/show_bug.cgi?id=54632

        Expose setScrollOffset such that Chromium can restore the scroll offset
        after printing the document. The bug will be fixed when the counterpart
        patch http://codereview.chromium.org/6539011/ is landed for Chromium.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setScrollOffset):
        * src/WebFrameImpl.h:

2011-02-17  Andrew Wilson  <atwilson@chromium.org>

        Unreviewed, rolling out r78936.
        http://trac.webkit.org/changeset/78936
        https://bugs.webkit.org/show_bug.cgi?id=54632

        Breaks chromium build

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        * src/WebFrameImpl.h:

2011-02-17  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Shinichiro Hamaji.

        Fix for Bug 54632 - [chromium] Printing causes view to scroll
        https://bugs.webkit.org/show_bug.cgi?id=54632

        Expose setScrollOffset such that Chromium can restore the scroll offset
        after printing the document. The bug will be fixed when the counterpart
        patch http://codereview.chromium.org/6539011/ is landed for Chromium.

        * public/WebFrame.h:
        * src/WebFrameImpl.cpp:
        (WebKit::WebFrameImpl::setScrollOffset):
        * src/WebFrameImpl.h:

2011-02-17  W. James MacLean  <wjmaclean@chromium.org>

        Reviewed by James Robinson.

        [chromium] Add command-line flag to enable composite to offscreen texture.
        https://bugs.webkit.org/show_bug.cgi?id=52311

        Add plumbing to allow command-line switch to enable offscreen compositing. Function
        LayerRendererChromium::copyOffscreenTextureToDisplay used for now to mimic
        normal renderer operation.

        * public/WebSettings.h:
        * src/WebSettingsImpl.cpp:
        (WebKit::WebSettingsImpl::WebSettingsImpl):
        (WebKit::WebSettingsImpl::setCompositeToTextureEnabled):
        * src/WebSettingsImpl.h:
        (WebKit::WebSettingsImpl::compositeToTextureEnabled):
        * src/WebViewImpl.cpp:
        (WebKit::WebViewImpl::doComposite):

2011-02-10  Luiz Agostini  <luiz.agostini@openbossa.org>

        Reviewed by Adam Roben.

        HTML5 <details> and <summary>: localized text
        https://bugs.webkit.org/show_bug.cgi?id=54260

        The method defaultDetailsSummaryText was added to LocalizedStrings. It is used to provide
        the default label to be used by a <details> tag that has no <summary> child.

        * src/LocalizedStrings.cpp:
        (WebCore::defaultDetailsSummaryText):

2011-02-17  Steve Lacey  <sjl@chromium.org>

        Reviewed by Darin Fisher.

        Roll chromium deps to 75190. Includes new dependency
        on libjingle.

        https://bugs.webkit.org/show_bug.cgi?id=54588

        * DEPS:

2011-02-17  Pavel Podivilov  <podivilov@chromium.org>

        Unreviewed, interactive ui test fix for r78808.

        * src/js/Tests.js:
        (.TestSuite.prototype._waitUntilScriptsAreParsed.waitForAllScripts):
        (.TestSuite.prototype._waitUntilScriptsAreParsed):

2011-02-16  Brian Ryner  <bryner@chromium.org>

        Reviewed by Darin Fisher.

        Split the socket address field into separate IP address and port fields.
        This will make the field less error-prone to parse, for example when
        dealing with IPv6 literals.
        https://bugs.webkit.org/show_bug.cgi?id=54607

        * public/WebURLResponse.h:
        * src/WebURLResponse.cpp:
        (WebKit::WebURLResponse::remoteIPAddress):
        (WebKit::WebURLResponse::setRemoteIPAddress):
        (WebKit::WebURLResponse::remotePort):
        (WebKit::WebURLResponse::setRemotePort):

2011-02-16  Dominic Mazzoni  <dmazzoni@google.com>

        Reviewed by Chris Fleizach.

        Add new role for canvas elements.

        https://bugs.webkit.org/show_bug.cgi?id=50126

        * public/WebAccessibilityRole.h:
        * src/AssertMatchingEnums.cpp:

2011-02-16  Victoria Kirst  <vrk@google.com>

        Reviewed by Kenneth Russell.

        [chromium] Fix green pixels at edge of certain GPU-accelerated videos
        https://bugs.webkit.org/show_bug.cgi?id=54559

        * src/VideoFrameChromiumImpl.cpp:
        (WebKit::VideoFrameChromiumImpl::width):
        (WebKit::VideoFrameChromiumImpl::height):
        (WebKit::VideoFrameChromiumImpl::requiredTextureSize):
        (WebKit::VideoFrameChromiumImpl::hasPaddingBytes):
        * src/VideoFrameChromiumImpl.h:

2011-02-16  Jeremy Orlow  <jorlow@chromium.org>

        Back out IndexedDB change thats no longer necessary
        https://bugs.webkit.org/show_bug.cgi?id=54603

        Backing out 78645 as it turns out that it's not necessary.

        * public/WebIDBFactory.h:
        (WebKit::WebIDBFactory::open):
        * src/AssertMatchingEnums.cpp:
        * src/IDBFactoryBackendProxy.cpp:
        * src/IDBFactoryBackendProxy.h:
        * src/WebIDBFactoryImpl.cpp:
        (WebKit::WebIDBFactoryImpl::open):
        * src/WebIDBFactoryImpl.h:

2011-02-16  David Grogan  <dgrogan@chromium.org>

        Reviewed by Jeremy Orlow.

        indexeddb: make setVersion fire blocked event if other connections are open
        https://bugs.webkit.org/show_bug.cgi?id=53728

        * src/IDBCallbacksProxy.cpp:
        (WebCore::IDBCallbacksProxy::onBlocked):
        * src/IDBCallbacksProxy.h:
        * src/WebIDBCallbacksImpl.cpp:
        (WebCore::WebIDBCallbacksImpl::onBlocked):
        * src/WebIDBCallbacksImpl.h:

== Rolled over to ChangeLog-2011-02-16 ==
