#======================================================================
#
# Makefile
#
# $RCSfile$
# $Revision$
# $Author$
# $Date$
#
#======================================================================
# set top source dir relative to this directory
# include make vars boilerplate
#

TOPSRCDIR = ../../../../..
include $(TOPSRCDIR)/Makefile.vars

#----------------------------------------------------------------------
# Set variables for this directory

SOURCES = $(wildcard *.cpp)
HEADERS = $(wildcard *.h)
CXXOBJECTS = $(patsubst %.cpp,%.o,$(wildcard *.cpp))

TAGFILES = \
	htmltags.c \
	htmltags.h \
	htmltags.gperf \
	$(NULL)

ATTRSFILES = \
	htmlattrs.c \
	htmlattrs.h \
	htmlattrs.gperf \
	$(NULL)

GENERATE_OBJECTS = $(TAGFILES) $(ATTRSFILES)

EXPORT_HEADERS = $(HEADERS)

OBJECTS = khtmldata.h $(GENERATE_OBJECTS) $(CXXOBJECTS)
EXPORT_OBJECTS = $(CXXOBJECTS)

EXPORT_HEADERS_DIR = $(TOPSRCDIR)/WebCore/include/private
EXPORT_OBJECTS_DIR = $(TOPSRCDIR)/WebCore/lib

LIBRARY = libkhtmlmisc.a

CLEAN_FILES = $(OBJECTS) \
	$(LIBRARY) \
	$(GENERATE_OBJECTS) \
	$(NULL)

#----------------------------------------------------------------------
# Set flags for this directory

CXXFLAGS = $(BASECXXFLAGS) \
	-I$(TOPSRCDIR) \
    -I$(TOPSRCDIR)/WebCore/src/kdelibs/khtml/ecma \
	-I$(TOPSRCDIR)/WebCore/src/kwq \
	-I$(TOPSRCDIR)/WebCore/src/kwq/qt \
	-I$(TOPSRCDIR)/WebCore/src/kwq/kde \
	-I$(TOPSRCDIR)/WebCore/src/kwq/kdecore \
	-I$(TOPSRCDIR)/WebCore/src/kwq/kdeui \
	-I$(TOPSRCDIR)/WebCore/src/kwq/kio \
	-I$(TOPSRCDIR)/WebCore/src/kwq/dcop \
	-I../dom \
	-I../html \
	-I../xml \
	-I.. \
	-I. \
	$(NULL)

DEPFLAGS = $(CXXFLAGS)

#----------------------------------------------------------------------
# Set targets for this directory

all: generate-objects $(OBJECTS) export-headers export-objects 

$(LIBRARY): $(OBJECTS)
	$(AR) $(ARFLAGS) $(LIBRARY) $(CXXOBJECTS)
	$(RANLIB) $(LIBRARY)

khtmldata.h:
	touch $@

$(TAGFILES):
	perl ./maketags

$(ATTRSFILES):
	perl ./makeattrs

#----------------------------------------------------------------------
# include make rules boilerplate

include $(TOPSRCDIR)/Makefile.rules

#======================================================================
# end
#======================================================================
