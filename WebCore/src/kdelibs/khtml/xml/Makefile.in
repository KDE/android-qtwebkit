#======================================================================
#
# Makefile
#
# $RCSfile$
# $Revision$
# $Author$
# $Date$
#
#======================================================================
# set top source dir relative to this directory
# include make vars boilerplate
#

TOPSRCDIR = ../../../..
include $(TOPSRCDIR)/Makefile.vars

#----------------------------------------------------------------------
# Set variables for this directory

SOURCES = $(wildcard *.cpp)
HEADERS = $(wildcard *.h)

CXXOBJECTS = \
	dom2_eventsimpl.o \
	dom2_rangeimpl.o \
	dom2_traversalimpl.o \
	dom2_viewsimpl.o \
	dom_docimpl.o \
	dom_elementimpl.o \
	dom_nodeimpl.o \
	dom_stringimpl.o \
	dom_textimpl.o \
	dom_xmlimpl.o \
	xml_tokenizer.o \
	$(NULL)

OBJECTS = $(CXXOBJECTS) 
EXPORT_OBJECTS = $(CXXOBJECTS)

LIBRARY = libkhtmlxml.a

CLEAN_FILES = $(OBJECTS) \
	$(LIBRARY) \
	*.moc \
	$(NULL)

#----------------------------------------------------------------------
# Set flags for this directory

# FIXME: Need a hack here to give the xml tokenizer text stream
# defines from Qt. The NEED_BOGUS_TEXTSTREAMS symbol
# can be removed when we have Qt text streams implemented
CXXFLAGS = $(BASECXXFLAGS) \
    -DNEED_BOGUS_TEXTSTREAMS \
    -I$(TOPSRCDIR) \
    -I$(TOPSRCDIR)/src/kwq \
    -I$(TOPSRCDIR)/src/kwq/kde \
    -I$(TOPSRCDIR)/src/kwq/kdecore \
    -I$(TOPSRCDIR)/src/kwq/kdeui \
    -I$(TOPSRCDIR)/src/kwq/khtml \
    -I$(TOPSRCDIR)/src/kwq/qt \
    -I../css \
    -I../dom \
    -I../html \
    -I../misc \
    -I.. \
    -I. \
    $(NULL)

DEPFLAGS = $(CXXFLAGS)

#----------------------------------------------------------------------
# Set targets for this directory

all: $(OBJECTS) export-objects

dom_docimpl.cpp: dom_docimpl.moc
dom_docimpl.moc:
	touch $@
xml_tokenizer.cpp: xml_tokenizer.moc
xml_tokenizer.moc:
	touch $@

$(LIBRARY): $(CXXOBJECTS)
	$(AR) $(ARFLAGS) $(LIBRARY) $(CXXOBJECTS)
	$(RANLIB) $(LIBRARY)

#----------------------------------------------------------------------
# include make rules boilerplate

include $(TOPSRCDIR)/Makefile.rules

#======================================================================
# end
#======================================================================
