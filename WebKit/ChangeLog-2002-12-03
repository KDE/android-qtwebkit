2002-01-31  John Sullivan  <sullivan@apple.com>

	* History.subproj/WKURIList.m: (newURIListNode):
	retain entries before adding them to list. The node-freeing
	routine was releasing, but the node-adding routine wasn't
	retaining. Bad asymmetry, made up for by WebViewTest not
	autoreleasing. I fixed that too.

2002-01-31  John Sullivan  <sullivan@apple.com>

	* WebKit.pbproj: Removed -O0, so it will now get all the same
	warnings as pbxbuild gets.

2002-01-31  Kenneth Kocienda  <kocienda@apple.com>

        Removed dependency on WC versions of these files
        
	* History.subproj/WKBackForwardList.h:
	* History.subproj/WKBackForwardList.m:
	* History.subproj/WKURIEntry.h:
	* History.subproj/WKURIEntry.m:
	* WebKit.pbproj/project.pbxproj:

2002-01-31  John Sullivan  <sullivan@apple.com>

	* WebKit.pbproj:
	Marked WKURIList.h as a public header

2002-01-30  Richard Williamson  <rjw@apple.com>

	* WebView.subproj/WKDefaultWebController.mm: (-[WKDefaultWebController
	createFrameNamed:for:inParent:]):
	* WebView.subproj/WKWebDataSource.mm: (-[WKWebDataSource documentTextFromDOM]):

2002-01-30  Richard Williamson  <rjw@apple.com>

    Cleaned up API w/ respect to frames.
    
	* WebView.subproj/WKDefaultWebController.h:
	* WebView.subproj/WKDefaultWebController.mm: (-[WKDefaultWebController
	setView:andDataSource:]), (-[WKDefaultWebController
	createFrameNamed:for:inParent:]):
	* WebView.subproj/WKWebController.h:
	* WebView.subproj/WKWebDataSource.h:

2002-01-30  Kenneth Kocienda  <kocienda@apple.com>

        Added *.lo, *.la, Icon, and .libs to .cvsignore files
        
	* .cvsignore:

2002-01-29  Richard Williamson  <rjw@apple.com>

	* ChangeLog:
	* WebView.subproj/WKDefaultWebController.h:
	* WebView.subproj/WKDefaultWebController.mm: (-[WKDefaultWebController
	setView:andDataSource:]), (-[WKDefaultWebController dataSourceForView:]):

2002-01-29  Richard Williamson  <rjw@apple.com>

	* WebView.subproj/WKDefaultWebController.mm: (-[WKDefaultWebController
	setView:andDataSource:]):

2002-01-29  Richard Williamson  <rjw@apple.com>

    First pass at frame code.  Still needs lots of cleanup.
    
	* WebKit.pbproj/project.pbxproj:
	* WebView.subproj/WKDefaultWebController.h:
	* WebView.subproj/WKDefaultWebController.mm: (-[WKDefaultWebController init]):
	* WebView.subproj/WKWebDataSource.h:
	* WebView.subproj/WKWebDataSource.mm: (-[WKWebDataSource dealloc]),
	(-[WKWebDataSource frameName]), (-[WKWebDataSource parent]), (-[WKWebDataSource
	children]), (-[WKWebDataSource addFrame:]), (-[WKWebDataSource frameNamed:]):
	* WebView.subproj/WKWebDataSourcePrivate.h:
	* WebView.subproj/WKWebDataSourcePrivate.mm: (-[WKWebDataSourcePrivate init]),
	(-[WKWebDataSourcePrivate dealloc]), (-[WKWebDataSource _setController:]),
	(-[WKWebDataSource _setFrameName:]):
	* WebView.subproj/WKWebView.mm: (-[WKWebView mouseUp:]):
	* WebView.subproj/WKWebViewPrivate.h:
	* WebView.subproj/WKWebViewPrivate.mm: (-[WKWebViewPrivate dealloc]),
	(-[WKWebView _setController:]), (-[WKWebView _widget]):

2002-01-29  Kenneth Kocienda  <kocienda@apple.com>

        WebKit now links with WebFoundation
        
	* WebKit.pbproj/kocienda.pbxuser:
	* WebKit.pbproj/project.pbxproj:


2002-01-23  Ken Kocienda  <kocienda@apple.com>

	Took out @executable_path hack added for Alexander demo.
	This should clear up a class of crash-on-launch issues.

	* WebKit.pbproj/project.pbxproj:

2002-01-21  John Sullivan  <sullivan@apple.com>

	* WebView.subproj/WKWebController.h:
	* WebView.subproj/WKWebView.h:
	Changed WKConcreteWebController to WKDefaultWebController in a
	couple of comments.

2002-01-18  Richard Williamson  <rjw@apple.com>

    First pass at new view/datasource/controller API.
    
	* Misc.subproj/WKException.h:
	* Misc.subproj/WKException.m:
	* WebKit.pbproj/project.pbxproj:
	* WebView.subproj/WKDefaultWebController.h:
	* WebView.subproj/WKDefaultWebController.mm: (+[WKObjectHolder
	holderWithObject:]), (-[WKObjectHolder initWithObject:]), (-[WKObjectHolder
	dealloc]), (-[WKObjectHolder copyWithZone:]), (-[WKObjectHolder hash]),
	(-[WKObjectHolder object]), (-[WKObjectHolder isEqual:]),
	(-[WKDefaultWebController initWithView:dataSource:]), (-[WKDefaultWebController
	dealloc]), (-[WKDefaultWebController setDirectsAllLinksToSystemBrowser:]),
	(-[WKDefaultWebController directsAllLinksToSystemBrowser]),
	(-[WKDefaultWebController setView:andDataSource:]), (-[WKDefaultWebController
	viewForDataSource:]), (-[WKDefaultWebController dataSourceForView:]),
	(-[WKDefaultWebController mainView]), (-[WKDefaultWebController mainDataSource]),
	(-[WKDefaultWebController createViewForDataSource:inFrameNamed:]),
	(-[WKDefaultWebController createViewForDataSource:inIFrame:]),
	(-[WKDefaultWebController setStatusText:forDataSource:]),
	(-[WKDefaultWebController statusTextForDataSource:]), (-[WKDefaultWebController
	authenticate:]), (-[WKDefaultWebController
	receivedProgress:forResource:fromDataSource:]), (-[WKDefaultWebController
	receivedError:forResource:partialProgress:fromDataSource:]),
	(-[WKDefaultWebController locationWillChangeTo:]), (-[WKDefaultWebController
	locationChangeStartedForDataSource:]), (-[WKDefaultWebController
	locationChangeInProgressForDataSource:]), (-[WKDefaultWebController
	locationChangeDone:forDataSource:]), (-[WKDefaultWebController
	receivedPageTitle:forDataSource:]), (-[WKDefaultWebController
	serverRedirectTo:forDataSource:]):
	* WebView.subproj/WKDefaultWebControllerPrivate.h:
	* WebView.subproj/WKDefaultWebControllerPrivate.mm:
	(-[WKDefaultWebControllerPrivate init]), (-[WKDefaultWebControllerPrivate
	dealloc]):
	* WebView.subproj/WKWebController.h:
	* WebView.subproj/WKWebController.mm:
	* WebView.subproj/WKWebDataSource.h:
	* WebView.subproj/WKWebDataSource.mm: (-[WKWebDataSource _commonInitialization]),
	(-[WKWebDataSource initWithURL:]), (-[WKWebDataSource parent]),
	(-[WKWebDataSource isMainDocument]), (-[WKWebDataSource children]),
	(-[WKWebDataSource frameNames]), (-[WKWebDataSource
	findDataSourceForFrameNamed:]), (-[WKWebDataSource frameExists:]),
	(-[WKWebDataSource openURL:inFrameNamed:]), (-[WKWebDataSource
	openURL:inIFrame:]), (-[WKWebDataSource controller]), (-[WKWebDataSource
	inputURL]), (-[WKWebDataSource finalURL]), (-[WKWebDataSource wasRedirected]),
	(-[WKWebDataSource startLoading:]), (-[WKWebDataSource stopLoading]),
	(-[WKWebDataSource isLoading]), (-[WKWebDataSource documentText]),
	(-[WKWebDataSource base]), (-[WKWebDataSource baseTarget]), (-[WKWebDataSource
	encoding]), (-[WKWebDataSource setUserStyleSheetFromURL:]), (-[WKWebDataSource
	setUserStyleSheetFromString:]), (-[WKWebDataSource icon]), (-[WKWebDataSource
	isPageSecure]), (-[WKWebDataSource pageTitle]):
	* WebView.subproj/WKWebDataSourcePrivate.h:
	* WebView.subproj/WKWebDataSourcePrivate.mm: (-[WKWebDataSourcePrivate init]),
	(-[WKWebDataSourcePrivate dealloc]), (-[WKWebDataSource _setController:]),
	(-[WKWebDataSource _part]):
	* WebView.subproj/WKWebView.h:
	* WebView.subproj/WKWebView.mm: (-[WKWebView initWithFrame:]), (-[WKWebView
	dealloc]), (-[WKWebView controller]), (-[WKWebView dataSourceChanged]),
	(-[WKWebView layout]), (-[WKWebView stopAnimations]), (-[WKWebView
	setFontSizes:]), (-[WKWebView fontSizes]), (-[WKWebView resetFontSizes]),
	(-[WKWebView setStandardFont:]), (-[WKWebView standardFont]), (-[WKWebView
	setFixedFont:]), (-[WKWebView fixedFont]), (-[WKWebView setCanDragFrom:]),
	(-[WKWebView canDragFrom]), (-[WKWebView setCanDragTo:]), (-[WKWebView
	canDragTo]), (-[WKWebView defaultContextMenuItemsForNode:]), (-[WKWebView
	setContextMenusEnabled:]), (-[WKWebView deselectText]), (-[WKWebView
	searchFor:direction:caseSensitive:]), (-[WKWebView selectedText]), (-[WKWebView
	delayLayout:]), (-[WKWebView notificationReceived:]), (-[WKWebView
	setNeedsLayout:]), (-[WKWebView drawRect:]), (-[WKWebView setIsFlipped:]),
	(-[WKWebView isFlipped]), (-[WKWebView setFrame:]), (-[WKWebView mouseUp:]),
	(-[WKWebView mouseDown:]), (-[WKWebView mouseDragged:]):
	* WebView.subproj/WKWebViewPrivate.h:
	* WebView.subproj/WKWebViewPrivate.mm: (-[WKWebViewPrivate init]),
	(-[WKWebViewPrivate dealloc]), (-[WKWebView _resetView]), (-[WKWebView
	_setController:]):

2002-01-14  Maciej Stachowiak  <mjs@apple.com>

	Convert build system to automake

	* Makefile.am: Add this
	* Makefile.in: Remove this (now autogenerated)
	* .cvsignore: Fix ignores
	* WebKit.pbproj/project.pbxproj: Twiddle link flags

2001-12-21  John Sullivan  <sullivan@apple.com>

	* .cvsignore:
	* WebKit.pbproj/.cvsignore:
	Added files that were showing up on my machine to .cvsignores.

2001-12-18  Kenneth Kocienda  <kocienda@apple.com>

        Deleted one little word

	* Documentation/WebKit-White-Paper/WebKit-White-Paper.html:

2001-12-18  Richard Williamson  <rjw@apple.com>

        Restructing of headers in prepartion for implementation.  Added new WK*
        headers to PB project description.

	* ChangeLog:
	* WebKit.pbproj/project.pbxproj:
	* WebView.subproj/NSWebPageDataSource.h:
	* WebView.subproj/NSWebPageDataSource.mm:
	* WebView.subproj/NSWebPageDataSourcePrivate.h:
	* WebView.subproj/NSWebPageView.h:
	* WebView.subproj/NSWebPageView.mm:
	* WebView.subproj/NSWebPageViewPrivate.h:
	* WebView.subproj/WKWebController.h:
	* WebView.subproj/WKWebController.mm:
	* WebView.subproj/WKWebDataSource.h:
	* WebView.subproj/WKWebDataSource.mm: (+[WKWebDataSource initialize]):
	* WebView.subproj/WKWebDataSourcePrivate.h:
	* WebView.subproj/WKWebView.h:
	* WebView.subproj/WKWebView.mm:
	* WebView.subproj/WKWebViewPrivate.h:

2001-12-18  Kenneth Kocienda  <kocienda@apple.com>

        Updated the white paper text and graphics.
        
	* Documentation/WebKit-White-Paper/WebKit-White-Paper.html:
	* Documentation/WebKit-White-Paper/images/webkit-cache-loader.jpg:
	* Documentation/WebKit-White-Paper/images/webkit-classes.jpg:

2001-12-18  Kenneth Kocienda  <kocienda@apple.com>

        Merged "Changes" information into individual files

	* Cache.subproj/WKLoadChunk.h:
	* Cache.subproj/WKWebCache.h:
	* Cache.subproj/WKWebCacheClient.h:
	* Cache.subproj/WKWebContentType.h:

2001-12-17  Kenneth Kocienda  <kocienda@apple.com>

        Fixed small cpp glitch in WKWebCache.
        Added WKAttributedURL header.
        Updated WKBackForwardList with ifdef'ed out new design.
        
	* Cache.subproj/WKWebCache.h:
	* History.subproj/WKAttributedURL.h:
	* History.subproj/WKBackForwardList.h:

2001-12-17  Kenneth Kocienda  <kocienda@apple.com>

        Added header files by chopping up the CacheAPI.h document I have been working on.

	* Cache.subproj/WKLoadChunk.h:
	* Cache.subproj/WKWebCache.h:
	* Cache.subproj/WKWebCacheClient.h:
	* Cache.subproj/WKWebContentType.h:

2001-12-17  Kenneth Kocienda  <kocienda@apple.com>

        Did some verb tense cleanup.

	* Documentation/WebKit-White-Paper/WebKit-White-Paper.html:

2001-12-17  Kenneth Kocienda  <kocienda@apple.com>

        Added the current draft of the WebKit white paper.
        
	* Documentation/WebKit-White-Paper/WebKit-White-Paper.html:
	* Documentation/WebKit-White-Paper/images/webkit-cache-loader.jpg:

2001-12-14  Richard Williamson  <rjw@apple.com>

        Remove WKContextMenuHandler for want of a better way to describe the
        not-yet-existing WKDOMNode.  We can't think of any initial clients that want
        to override the default behavior anyway.  Put it in WKGrabBag.h for now.

	* WebView.subproj/WKWebController.h:   

2001-12-14  Richard Williamson  <rjw@apple.com>
        
        Remove explicit API to get/set the selection range.  This will be postponed until we
        have a DOM API that allows us to express selection ranges correctly.  Instead we have API
        that should support searching and getting a NSAttributedString that corresponds to
        the selected text.

        Added the following methods:
            - (void)searchFor: (NSString *)string direction: (BOOL)forward caseSensitive: (BOOL)case
            - deselectText;
            - (NSAttributedString *)selectedText;
       
	* WebView.subproj/WKWebView.h:    

        Moved search API to WKWebView.
        
        Moved WKPreferences to a new file, WKPreferences.h.  We are still discussing
        this item and it will not make it into the white paper.
                    
	Minor naming changes.

	* WebView.subproj/WKDataSource.h:        

2001-12-14  Maciej Stachowiak  <mjs@apple.com>

	Simplified WKLocationChangeHandler and updated
	WKAuthenticationHandler.

	* WebView.subproj/WKWebController.h:
	(WKWebDataSource): Renamed methods to be forDataSource, not
	byDataSource.
	(-[WKWebDataSource locationChangeInProgressForDataSource:]): Added.
	(-[WKWebDataSource locationChangeDone:forDataSource:]): Added as a
	collapsed version of locationChangeCancelled:,
	locationChangeStopped: and locationChangeFinished:.
	(WKSimpleAuthenticationResult, WKSimpleAuthenticationRequest):
	made these interfaces instead of structs.
	
2001-12-14  Maciej Stachowiak  <mjs@apple.com>

	Minor cleanups, mostly for naming consistency.
	
	* WebView.subproj/WKWebController.h: 
	(WKSimpleAuthenticationRequest) name field `url', not `uri'.
	(-[WKWebDataSourceErrorHandler receivedError:forDataSource:]):
	renamed from `error:inDataSource:' so that it's a verb phrase.
	
	* WebView.subproj/WKWebDataSource.h:
	(-[WKWebDataSource initWithURL:]): Rename `inputUrl' argument to
	`inputURL'.
	(-[WKWebDataSource initWithLoader:]): Change argument type from
	`WKURILoader' to `WKLoader'.
	(-[WKWebDataSource wasRedirected]): Renamed from `isRedirected',
	the past tense seems more appropriate here.
	(-[WKWebDataSource setJavaEnabled:]): Add missing semicolon.
	(-[WKWebDataSource pluginsEnabled:]): renamed from `pluginEnabled'
	for consistency with `setPluginsEnabled:'.

	* WebView.subproj/WKWebView.h:
	(-[WKWebView fontSizes]): renamed from `fontSize' for sonsistency
	with `setFontSizes:'.
	(-[WKWebView setContextMenusEnabled]): renamed from
	'setEnableContextMenus:' for consistency with
	`contextMenusenabled'.

2001-12-14  Maciej Stachowiak  <mjs@apple.com>

	After discussion with Don, Removed all methods relating to
	resolved URLs, since browsers don't actually treat aliases
	specially.
	
	* WebView.subproj/WKWebController.h: removed inputURLresolvedTo: methods.
	* WebView.subproj/WKWebDataSource.h: remove resolvedURL method,
	and mentions of it in comments.

2001-12-13  Richard Williamson  <rjw@apple.com>
  
        Removed WKFrameSetHandler, placed that functionality on WKWebDataSource.
        
        Changed WKLocationChangeHandler to add a parameter specifying the data source
        that sent the message.

	* WebView.subproj/WKWebController.h:

2001-12-13  Maciej Stachowiak  <mjs@apple.com>

	Warning fixes and support to pass the http headers along with
	cache data items

	* Cache.subproj/NSURICacheData.h, Cache.subproj/NSURICacheData.m:
	(+[NSURICacheData
	dataWithURL:status:error:headers:data:size:notificationString:userData:],
	-[NSURICacheData
	initWithURL:status:error:headers:data:size:notificationString:userData:]),
	-[NSURICacheData dealloc], -[NSURICacheData error],
	-[NSURICacheData headers]: 
	NSURICacheData now carries a copy of the response headers
	dictionary.
	* Cache.subproj/NSURICache.m: include "WCURICache.h" to fix warnings.
	(-[NSURICache requestWithURL:requestor:userData:]): 
	Handle headers in CacheData.
	* Cache.subproj/NSURILoad.h, Cache.subproj/NSURILoad.m:
	(-[NSURILoad __NSURILoadReadStreamCallback:event:data:],
	-[NSURILoad headers], -[NSURILoad dealloc], -[NSURILoad done]): 
	An NSURILoad object now carries the response headers associated
	with its connection, if any.

	* History.subproj/WKBackForwardList.m: include WCBackForwardList.h
	to fix warning.
	* History.subproj/WKURIEntry.m: include WCURIEntry.h to fix
	warning.
	* Misc.subproj/WebKitDebug.h: Use (void) for C prototypes, not ().
	* WebView.subproj/NSWebPageDataSource.mm: (+[NSWebPageDataSource
	initialize]): Remove unused variable to fix warning.
	* WebKit.pbproj/project.pbxproj: Enable many warning flags and -Werror

2001-12-13  Maciej Stachowiak  <mjs@apple.com>

	* WebView.subproj/WKWebController.h: Defined initial version of
	WKAuthenticationHandler interface, and associated
	WKSimpleAuthenticationRequest and WKSimpleAuthenticationResult
	structs.

2001-12-13  Richard Williamson  <rjw@apple.com>
    
        Remove setBase: and setBaseTarget:
        
        Changed return type of baseTarget to (NSString *)
        
        Added the following two methods:
            - (WKDataSource *)parent;
            - (NSArry *)children;
            - (BOOL)isMainDocument;
  
        Added the following methods:
        
            - (NSArray *)frameNames;
            - (WKWebDataSource) findDataSourceForFrameNamed: (NSString *)name;
            - (BOOL)frameExists: (NSString *)name;
            - (void)openURL: (NSURL *)url inFrameNamed: (NSString *)frameName;
            - (void)openURL: (NSURL *)url inIFrame: (id)iFrameIdentifier;

	* WebView.subproj/WKWebDataSource.h:

2001-12-12  Richard Williamson  <rjw@apple.com>

        Changed WKConcreteWebController to WKDefaultWebController.
        
        Changed WKLocationChangedHandler naming, replace "loadingXXX" with
        "locationChangeXXX".

        Changed loadingStopped in WKLocationChangedHandler to locationChangeStopped:(WKError *).

        Changed loadingCancelled in WKLocationChangedHandler to locationChangeCancelled:(WKError *).
        
        Changed loadedPageTitle in WKLocationChangedHandler to receivedPageTitle:.

        Added inputURL:(NSURL *) resolvedTo: (NSURL *) to WKLocationChangedHandler.
        
        Added the following two methods to WKLocationChangedHandler:
        
            - (void)inputURL: (NSURL *)inputURL resolvedTo: (NSURL *)resolvedURL;
            - (void)serverRedirectTo: (NSURL *)url;
       
        Put locationWillChangeTo: back on WKLocationChangedHandler.
        
        Changed XXXforLocation in WKLoadHandler to XXXforResource.
        
        Changed timeoutForLocation: in WKLoadHandler to receivedError:forResource:partialProgress:
        
        Added the following two methods to WKDefaultWebController:
        
            - setDirectsAllLinksToSystemBrowser: (BOOL)flag
            - (BOOL)directsAllLinksToSystemBrowser;
            
        Removed WKError.  This will be described in WKError.h.

        * WebView.subproj/WKWebController.h:

2001-12-12  Richard Williamson  <rjw@apple.com>
    
        After group discussion we decided to classify API as :
        Tier 1:  Needed by our browser (or Sherlock).
        Tier 2:  Nedded by Apple internal clients (Mail, Help, PB, other TBD).
        Tier 3:  Third party software vendors.
    
        Added finalURL and isRedirected.
	
        * WebView.subproj/WKWebDataSource.h:

2001-12-11  Chris Blumenberg  <cblu@apple.com>

	* ChangeLog:
	* WebView.subproj/NSWebPageDataSource.mm: (+[NSWebPageDataSource initialize]):

2001-12-11  Chris Blumenberg  <cblu@apple.com>

	* WebView.subproj/NSWebPageDataSource.mm: (+[NSWebPageDataSource initialize]):

2001-12-10  John Sullivan  <sullivan@apple.com>

	* WebView.subproj/WKWebController.h:
	* WebView.subproj/WKWebDataSource.h:
	* WebView.subproj/WKWebView.h:

	Fixed some typos and misspellings.

2001-12-07  Richard Williamson  <rjw@apple.com>

	* WebView.subproj/NSWebPageDataSource.h:
	* WebView.subproj/NSWebPageDataSourcePrivate.h:
	* WebView.subproj/NSWebPageView.h:
        
        First pass at API for WKWebView and WKWebDataSource.  Note
        that we have to change names from NS to WK!  The new API is conditionally
        excluded #ifdef READY_FOR_PRIMETIME
        
        Added these files:
        
	* WebView.subproj/WKWebDataSource.h:
	* WebView.subproj/WKWebView.h:
	* WebView.subproj/WKWebController.h:

2001-12-06  Maciej Stachowiak  <mjs@apple.com>

	* Cache.subproj/NSURICacheData.m: (+[NSURICacheData
	dataWithURL:status:error:data:size:notificationString:userData:]),
	(-[NSURICacheData
	initWithURL:status:error:data:size:notificationString:userData:]):
	Remove redundant semicolons between the end of the prototype and
	the open brace, because they confuse the changelog script.

